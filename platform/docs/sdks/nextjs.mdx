---
title: "@flowglad/nextjs"
description: "Official Next.js SDK for Flowglad with App Router and Pages Router support"
---

import NextjsSetup from '/snippets/setup-nextjs.mdx'

<Info>
  NPM Package: [@flowglad/nextjs](https://www.npmjs.com/package/@flowglad/nextjs)
</Info>

## Overview

The Next.js SDK provides a complete integration for both App Router and Pages Router, including server-side utilities and client-side components.

<NextjsSetup />

## Key Features

- **App Router Support**: First-class support for Next.js App Router with Server Components
- **Pages Router Support**: Full compatibility with Pages Router
- **Type-safe Route Handlers**: Automatic type inference for API routes
- **Server-side Utilities**: Access billing data in Server Components and API routes
- **Client Components**: Pre-built components for subscriptions and billing
- **React Context**: Global billing state management

## API Reference

### Server Exports

Import from `@flowglad/nextjs/server`:

#### `FlowgladServer`

The main server class for backend operations. See the [Server SDK documentation](/sdks/server) for full details.

#### `createAppRouterRouteHandler(flowgladServer, options?)`

Creates GET and POST handlers for App Router:

```ts
const { GET, POST } = createAppRouterRouteHandler(flowgladServer)
export { GET, POST }
```

You can pass a second argument with `beforeRequest`, `afterRequest`, or `onError` hooks if you need custom behavior.

#### `createPagesRouterRouteHandler(flowgladServer, options?)`

Creates a single handler for Pages Router:

```ts
export default createPagesRouterRouteHandler(flowgladServer)
```

As with the App Router helper, you may provide an optional options object to run request lifecycle hooks.

### Client Exports

Import from `@flowglad/nextjs`:

#### `FlowgladProvider`

The main provider component. See the [React SDK documentation](/sdks/react) for full details on props and usage.

#### `useBilling()`

Access billing data and functions. See the [React SDK documentation](/sdks/react) for full API reference.

## Integration with Authentication

<Info>
Native constructor params are available for popular auth providers including Supabase Auth, Clerk, Next Auth. Read more about auth adaptors [here](/sdks/auth-adaptors)
</Info>

### Supabase Auth Example

```ts app/lib/flowglad.ts
import { FlowgladServer } from '@flowglad/nextjs/server'
import { createClient } from '@/utils/supabase/server'

export const flowgladServer = new FlowgladServer({
  getRequestingCustomer: async () => {
    const supabase = await createClient()
    const { data: { user } } = await supabase.auth.getUser()
    
    if (!user) return null

    return {
      externalId: user.id,
      name: user.user_metadata.full_name,
      email: user.email!,
    }
  },
})
```

### NextAuth Example

```ts app/lib/flowglad.ts
import { FlowgladServer } from '@flowglad/nextjs/server'
import { getServerSession } from 'next-auth'
import { authOptions } from '@/app/api/auth/[...nextauth]/route'

export const flowgladServer = new FlowgladServer({
  getRequestingCustomer: async () => {
    const session = await getServerSession(authOptions)
    
    if (!session?.user) return null

    return {
      externalId: session.user.id,
      name: session.user.name!,
      email: session.user.email!,
    }
  },
})
```

## Complete Example

For full working examples, check out our [example projects](https://github.com/flowglad/flowglad/tree/main/examples) with authentication and billing integration.

## Next Steps

<CardGroup cols={2}>
  <Card title="React SDK" icon="react" href="/sdks/react">
    Learn about React components and hooks
  </Card>
  <Card title="Server SDK" icon="server" href="/sdks/server">
    Explore server-side capabilities
  </Card>
</CardGroup>

