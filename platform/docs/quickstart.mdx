---
title: "Quickstart"
description: "Process your first payment in 3 minutes"
---

This guide will show you how set up Flowglad in your app. It's optimized for Next.js, but it can be adapted for any React \+ Node.js application.

<Note>
  Looking for detailed SDK documentation? Check out our [**SDK documentation**](/sdks/introduction) for comprehensive guides on [@flowglad/nextjs](/sdks/nextjs), [@flowglad/react](/sdks/react), [@flowglad/express](/sdks/express), and more.
</Note>

## 1. Sign Up For Flowglad

[Create a Flowglad account](https://app.flowglad.com/sign-up).

## 2. Add Your API Key

Add your Flowglad API key to your environment

```bash .env
FLOWGLAD_SECRET_KEY="sk_test_...."
```

Quicklinks to add your key to your secrets:

[Vercel Dashboard](https://vercel.com/dashboard)

[Infisical Dashboard](https://app.infisical.com/dashboard)

## 3. Install Flowglad

<CodeGroup>

```bash Next.js
bun add @flowglad/nextjs
```

```bash Other React Frameworks
bun add @flowglad/react @flowglad/server
```

</CodeGroup>

## 4. Server Setup

First, set up a Flowglad server factory function.
Do this in a file that can be imported wherever you need to access billing data, or make calls to Flowglad.

<CodeGroup>

```ts lib/flowglad.ts
import { FlowgladServer } from '@flowglad/nextjs/server'

export const flowglad = (customerExternalId: string) => {
  // customerExternalId is the ID from YOUR app's database, NOT Flowglad's customer ID
  return new FlowgladServer({
    customerExternalId,
    getCustomerDetails: async (customerExternalId) => {
      // Fetch customer details from YOUR database using YOUR app's ID
      const user = await db.users.findOne({ id: customerExternalId })
      if (!user) {
        throw new Error('Customer not found')
      }
      return {
        email: user.email,
        name: user.name,
      }
    },
  })
}
```

```ts Example: Better Auth
import { FlowgladServer } from '@flowglad/nextjs/server'
import { auth } from '@/utils/auth'
import { headers } from 'next/headers'

export const flowglad = (customerExternalId: string) => {
  return new FlowgladServer({
    customerExternalId,
    getCustomerDetails: async (customerExternalId) => {
      const session = await auth.api.getSession({
        headers: await headers(),
      })
      if (!session?.user) {
        throw new Error('User not authenticated')
      }
      return {
        email: session.user.email || '',
        name: session.user.name || ''
      }
    },
  })
}
```

```ts Example: Supabase Auth
import { FlowgladServer } from '@flowglad/nextjs/server'
import { createClient } from '@/utils/supabase/server'

export const flowglad = (customerExternalId: string) => {
  return new FlowgladServer({
    customerExternalId,
    getCustomerDetails: async (customerExternalId) => {
      const supabase = await createClient()
      const { data: { user } } = await supabase.auth.getUser()
      if (!user) {
        throw new Error('User not authenticated')
      }
      return {
        email: user.email || '',
        name: user.user_metadata.name || user.email || ''
      }
    },
  })
}
```

```ts Example: B2B (Organization-based)
import { FlowgladServer } from '@flowglad/nextjs/server'

export const flowglad = (organizationId: string) => {
  // For B2B apps: organizationId is ID from YOUR app's database
  return new FlowgladServer({
    customerExternalId: organizationId,
    getCustomerDetails: async (customerExternalId) => {
      // Fetch organization details from YOUR database using YOUR org ID
      const org = await db.organizations.findOne({ id: customerExternalId })
      if (!org) {
        throw new Error('Organization not found')
      }
      return {
        email: org.billingEmail || org.ownerEmail,
        name: org.name,
      }
    },
  })
}
```

</CodeGroup>

<Note>
**Important:** `customerExternalId` is the ID from **your app's database** (e.g., `user.id` or `organization.id`), **not** Flowglad's customer ID.

**B2C apps:** Pass `user.id` as `customerExternalId`  
**B2B apps:** Pass `organization.id` or `team.id` as `customerExternalId`
</Note>

Next, set up your Flowglad API route at `/api/flowglad/[...path]`. Your app will use this to send and receive data from Flowglad.

<CodeGroup>

```ts app/api/flowglad/[...path]/route.ts (App Router)
import { nextRouteHandler } from '@flowglad/nextjs/server'
import { flowglad } from '@/utils/flowglad'

export const { GET, POST } = nextRouteHandler({
  flowglad,
  getCustomerExternalId: async (req) => {
    // Extract customerExternalId from your auth/session
    // This should be YOUR app's user/organization ID, NOT Flowglad's customer ID
    // For B2C: return user.id (from your database)
    // For B2B: return organization.id (from your database)
    const userId = await getUserIdFromRequest(req)
    if (!userId) {
      throw new Error('User not authenticated')
    }
    return userId
  },
})
```

```ts Example: Better Auth
import { nextRouteHandler } from '@flowglad/nextjs/server'
import { flowglad } from '@/utils/flowglad'
import { auth } from '@/utils/auth'
import { headers } from 'next/headers'

export const { GET, POST } = nextRouteHandler({
  flowglad,
  getCustomerExternalId: async (req) => {
    const session = await auth.api.getSession({
      headers: await headers(),
    })
    const userId = session?.user?.id
    if (!userId) {
      throw new Error('User not found')
    }
    return userId
  },
})
```

```ts Example: Supabase Auth
import { nextRouteHandler } from '@flowglad/nextjs/server'
import { flowglad } from '@/utils/flowglad'
import { createClient } from '@/utils/supabase/server'

export const { GET, POST } = nextRouteHandler({
  flowglad,
  getCustomerExternalId: async (req) => {
    const supabase = await createClient()
    const {
      data: { user }
    } = await supabase.auth.getUser()
    const userId = user?.id
    if (!userId) {
      throw new Error('User not found')
    }
    return userId
  },
})
```

</CodeGroup>

<Note>
The `getCustomerExternalId` function extracts the customer ID from **your app's database** (via your authentication system). Flowglad doesn't care how you authenticateâ€”just return the ID from your system that represents the billing entity (user ID for B2C, organization ID for B2B). This is **not** Flowglad's customer ID.
</Note>

<Info>
Flowglad integrates seamlessly with your auth provider. Read more about auth options [here](/sdks/auth).
</Info>

<Info>
  You can mount Flowglad's handler at a different route, but you'll
  need to specify it via the `baseURL` prop in `
            <FlowgladProvider />` in your React app. Flowglad will automatically append `/api/flowglad` to the baseURL when making requests.
</Info>

## 5. Set up React

Next, you need to set up the FlowgladProvider component.

<CodeGroup>

```tsx Supabase Auth
// app/layout.tsx
import { PropsWithChildren } from 'react'
import { FlowgladProvider } from '@flowglad/react'
// or wherever you initialize your supabase client
import { createClient } from '@/utils/supabase'

export default function RootLayout({
  children,
}: PropsWithChildren) {
    const supabase = createClient();
  const {
    data: { user }
  } = await supabase.auth.getUser();
  return (
    <FlowgladProvider loadBilling={!!user}>
    { /* ... existing layout JSX ... */}
      {children}
    { /* ... existing layout JSX ... */}
    </FlowgladProvider>
  )
}
```


```tsx Clerk
// app/layout.tsx
import { PropsWithChildren } from 'react'
import { FlowgladProvider } from '@flowglad/nextjs'
import { currentUser } from '@clerk/nextjs/server'

export default async function RootLayout({
  children,
}: Readonly<{
  children: React.ReactNode
}>) {
  const user = await currentUser()
  return (
      <html lang="en">
        <body>
          <FlowgladProvider loadBilling={!!user}>
            {children}
          </FlowgladProvider>
        </body>
      </html>
  )
}
```


```tsx Next Auth
// app/layout.tsx
import { PropsWithChildren } from 'react'
import { FlowgladProvider } from '@flowglad/react'
import { SessionProvider } from 'next-auth/react'

export default async function RootLayout({
  children,
}: PropsWithChildren) {
  const session = await auth()
  return (
    <SessionProvider basePath={'/auth'} session={session}>
      <FlowgladProviderWithAuth
        loadBilling={session.status === 'authenticated'}
      >
        {children}
      </FlowgladProviderWithAuth>
    </SessionProvider>
  )
}
```

</CodeGroup>

## 6. `useBilling`

Use the `useBilling` hook to get billing data on your customer's frontend.

<CodeGroup>

```tsx Next
'use client'
import { useBilling } from '@flowglad/nextjs'

export default function Billing() {
  const { checkFeatureAccess } = useBilling()
  if (!checkFeatureAccess) {
    return <div>Loading ...</div>  
  }
  if (checkFeatureAccess("my_feature")) {
    return <div>You have access!</div>
  } else {
    return <div>Please upgrade</div>
  }
}
```
</CodeGroup>

## 7. Join the Community!
<CardGroup cols={1}>
  <Card title="Join our Discord" icon="discord" iconType="regular" color="#FFFFFF" href="https://discord.gg/XTK7hVyQD9" cta="Join our Discord">
    - Get help fast from the founders and others building in public.
  </Card>
  <Card title="Star on GitHub" icon="github" color="#FFFFFF" href="https://github.com/flowglad/flowglad" cta="Star on GitHub">
    - Support the project and follow our open source roadmap.
  </Card>
  <Card title="Follow us on X" icon="twitter" color="#FFFFFF" href="https://x.com/flowglad" cta="Follow us on X">
    - Get release updates and feature drops from the founders in real time.
  </Card>
</CardGroup>
