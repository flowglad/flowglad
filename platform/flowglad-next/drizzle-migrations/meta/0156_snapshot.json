{
  "id": "4175e628-2109-4cfb-b525-50aed96ff555",
  "prevId": "e4396b37-6572-4088-9397-e256f273c92a",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "public.api_keys": {
      "name": "api_keys",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "livemode": {
          "name": "livemode",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "organization_id": {
          "name": "organization_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "token": {
          "name": "token",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "active": {
          "name": "active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "unkey_id": {
          "name": "unkey_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "type": {
          "name": "type",
          "type": "apiKeyType",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "api_keys_organization_id_idx": {
          "name": "api_keys_organization_id_idx",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "api_keys_organization_id_Organizations_id_fk": {
          "name": "api_keys_organization_id_Organizations_id_fk",
          "tableFrom": "api_keys",
          "tableTo": "Organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "api_keys_id_unique": {
          "name": "api_keys_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "id"
          ]
        }
      },
      "policies": {
        "Enable all actions for own organizations": {
          "name": "Enable all actions for own organizations",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ],
          "using": "\"organizationId\" in (select \"organizationId\" from \"Memberships\")"
        },
        "Check mode": {
          "name": "Check mode",
          "as": "RESTRICTIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ],
          "using": "current_setting('app.livemode')::boolean = livemode"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.billing_period_items": {
      "name": "billing_period_items",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "livemode": {
          "name": "livemode",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "billing_period_id": {
          "name": "billing_period_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "quantity": {
          "name": "quantity",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "unit_price": {
          "name": "unit_price",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "discount_redemption_id": {
          "name": "discount_redemption_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "billing_period_items_billing_period_id_idx": {
          "name": "billing_period_items_billing_period_id_idx",
          "columns": [
            {
              "expression": "billing_period_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "billing_period_items_discount_redemption_id_idx": {
          "name": "billing_period_items_discount_redemption_id_idx",
          "columns": [
            {
              "expression": "discount_redemption_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "billing_period_items_billing_period_id_billing_periods_id_fk": {
          "name": "billing_period_items_billing_period_id_billing_periods_id_fk",
          "tableFrom": "billing_period_items",
          "tableTo": "billing_periods",
          "columnsFrom": [
            "billing_period_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "billing_period_items_discount_redemption_id_DiscountRedemptions_id_fk": {
          "name": "billing_period_items_discount_redemption_id_DiscountRedemptions_id_fk",
          "tableFrom": "billing_period_items",
          "tableTo": "DiscountRedemptions",
          "columnsFrom": [
            "discount_redemption_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "billing_period_items_id_unique": {
          "name": "billing_period_items_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "id"
          ]
        }
      },
      "policies": {
        "Enable read for own organizations": {
          "name": "Enable read for own organizations",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ],
          "using": "\"billingPeriodId\" in (select \"id\" from \"BillingPeriods\" where \"subscriptionId\" in (select \"id\" from \"Subscriptions\" where \"organizationId\" in (select \"organizationId\" from \"Memberships\")))"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.billing_periods": {
      "name": "billing_periods",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "livemode": {
          "name": "livemode",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "subscription_id": {
          "name": "subscription_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "start_date": {
          "name": "start_date",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true
        },
        "end_date": {
          "name": "end_date",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "BillingPeriodStatus",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "trial_period": {
          "name": "trial_period",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        }
      },
      "indexes": {
        "billing_periods_subscription_id_idx": {
          "name": "billing_periods_subscription_id_idx",
          "columns": [
            {
              "expression": "subscription_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "billing_periods_status_idx": {
          "name": "billing_periods_status_idx",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "billing_periods_subscription_id_Subscriptions_id_fk": {
          "name": "billing_periods_subscription_id_Subscriptions_id_fk",
          "tableFrom": "billing_periods",
          "tableTo": "Subscriptions",
          "columnsFrom": [
            "subscription_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "billing_periods_id_unique": {
          "name": "billing_periods_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "id"
          ]
        }
      },
      "policies": {
        "Enable read for own organizations": {
          "name": "Enable read for own organizations",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ],
          "using": "\"subscriptionId\" in (select \"id\" from \"Subscriptions\" where \"organizationId\" in (select \"organizationId\" from \"Memberships\"))"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.billing_runs": {
      "name": "billing_runs",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "livemode": {
          "name": "livemode",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "billing_period_id": {
          "name": "billing_period_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "scheduled_for": {
          "name": "scheduled_for",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true
        },
        "started_at": {
          "name": "started_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "completed_at": {
          "name": "completed_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "BillingRunStatus",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "stripe_payment_intent_id": {
          "name": "stripe_payment_intent_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "attempt_number": {
          "name": "attempt_number",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "error_details": {
          "name": "error_details",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "subscription_id": {
          "name": "subscription_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "payment_method_id": {
          "name": "payment_method_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "last_stripe_payment_intent_event_timestamp": {
          "name": "last_stripe_payment_intent_event_timestamp",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "billing_runs_billing_period_id_idx": {
          "name": "billing_runs_billing_period_id_idx",
          "columns": [
            {
              "expression": "billing_period_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "billing_runs_status_idx": {
          "name": "billing_runs_status_idx",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "billing_runs_billing_period_id_billing_periods_id_fk": {
          "name": "billing_runs_billing_period_id_billing_periods_id_fk",
          "tableFrom": "billing_runs",
          "tableTo": "billing_periods",
          "columnsFrom": [
            "billing_period_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "billing_runs_subscription_id_Subscriptions_id_fk": {
          "name": "billing_runs_subscription_id_Subscriptions_id_fk",
          "tableFrom": "billing_runs",
          "tableTo": "Subscriptions",
          "columnsFrom": [
            "subscription_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "billing_runs_payment_method_id_PaymentMethods_id_fk": {
          "name": "billing_runs_payment_method_id_PaymentMethods_id_fk",
          "tableFrom": "billing_runs",
          "tableTo": "PaymentMethods",
          "columnsFrom": [
            "payment_method_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "billing_runs_id_unique": {
          "name": "billing_runs_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "id"
          ]
        }
      },
      "policies": {
        "Enable read for own organizations": {
          "name": "Enable read for own organizations",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ],
          "using": "\"billingPeriodId\" in (select \"id\" from \"BillingPeriods\" where \"subscriptionId\" in (select \"id\" from \"Subscriptions\" where \"organizationId\" in (select \"organizationId\" from \"Memberships\")))"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.countries": {
      "name": "countries",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "code": {
          "name": "code",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "countries_name_unique_idx": {
          "name": "countries_name_unique_idx",
          "columns": [
            {
              "expression": "name",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "countries_code_unique_idx": {
          "name": "countries_code_unique_idx",
          "columns": [
            {
              "expression": "code",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "countries_id_unique": {
          "name": "countries_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "id"
          ]
        },
        "countries_name_unique": {
          "name": "countries_name_unique",
          "nullsNotDistinct": false,
          "columns": [
            "name"
          ]
        },
        "countries_code_unique": {
          "name": "countries_code_unique",
          "nullsNotDistinct": false,
          "columns": [
            "code"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.customer_profiles": {
      "name": "customer_profiles",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "livemode": {
          "name": "livemode",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "customer_id": {
          "name": "customer_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "organization_id": {
          "name": "organization_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "invoice_number_base": {
          "name": "invoice_number_base",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "archived": {
          "name": "archived",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "stripe_customer_id": {
          "name": "stripe_customer_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "customer_tax_id": {
          "name": "customer_tax_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "slack_id": {
          "name": "slack_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "logo_url": {
          "name": "logo_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "icon_url": {
          "name": "icon_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "domain": {
          "name": "domain",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "billing_address": {
          "name": "billing_address",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "external_id": {
          "name": "external_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "customer_profiles_customer_id_idx": {
          "name": "customer_profiles_customer_id_idx",
          "columns": [
            {
              "expression": "customer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "customer_profiles_organization_id_idx": {
          "name": "customer_profiles_organization_id_idx",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "customer_profiles_email_organization_id_idx": {
          "name": "customer_profiles_email_organization_id_idx",
          "columns": [
            {
              "expression": "email",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "customer_profiles_customer_id_organization_id_unique_idx": {
          "name": "customer_profiles_customer_id_organization_id_unique_idx",
          "columns": [
            {
              "expression": "customer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "customer_profiles_organization_id_external_id_unique_idx": {
          "name": "customer_profiles_organization_id_external_id_unique_idx",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "external_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "customer_profiles_organization_id_invoice_number_base_unique_idx": {
          "name": "customer_profiles_organization_id_invoice_number_base_unique_idx",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "invoice_number_base",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "customer_profiles_stripe_customer_id_unique_idx": {
          "name": "customer_profiles_stripe_customer_id_unique_idx",
          "columns": [
            {
              "expression": "stripe_customer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "customer_profiles_slack_id_idx": {
          "name": "customer_profiles_slack_id_idx",
          "columns": [
            {
              "expression": "slack_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "customer_profiles_customer_id_Customers_id_fk": {
          "name": "customer_profiles_customer_id_Customers_id_fk",
          "tableFrom": "customer_profiles",
          "tableTo": "Customers",
          "columnsFrom": [
            "customer_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "customer_profiles_organization_id_Organizations_id_fk": {
          "name": "customer_profiles_organization_id_Organizations_id_fk",
          "tableFrom": "customer_profiles",
          "tableTo": "Organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "customer_profiles_id_unique": {
          "name": "customer_profiles_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "id"
          ]
        }
      },
      "policies": {
        "Check mode": {
          "name": "Check mode",
          "as": "RESTRICTIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ],
          "using": "current_setting('app.livemode')::boolean = livemode"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.Customers": {
      "name": "Customers",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "livemode": {
          "name": "livemode",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "billing_address": {
          "name": "billing_address",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "user_id": {
          "name": "user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "Customers_user_id_idx": {
          "name": "Customers_user_id_idx",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "Customers_email_livemode_unique_idx": {
          "name": "Customers_email_livemode_unique_idx",
          "columns": [
            {
              "expression": "email",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "livemode",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "Customers_user_id_Users_id_fk": {
          "name": "Customers_user_id_Users_id_fk",
          "tableFrom": "Customers",
          "tableTo": "Users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "Customers_id_unique": {
          "name": "Customers_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "id"
          ]
        },
        "Customers_email_unique": {
          "name": "Customers_email_unique",
          "nullsNotDistinct": false,
          "columns": [
            "email"
          ]
        }
      },
      "policies": {
        "Check mode": {
          "name": "Check mode",
          "as": "RESTRICTIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ],
          "using": "current_setting('app.livemode')::boolean = livemode"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.DiscountRedemptions": {
      "name": "DiscountRedemptions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "livemode": {
          "name": "livemode",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "discount_id": {
          "name": "discount_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "purchase_id": {
          "name": "purchase_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "discount_name": {
          "name": "discount_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "discount_code": {
          "name": "discount_code",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "discount_amount": {
          "name": "discount_amount",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "discount_amount_type": {
          "name": "discount_amount_type",
          "type": "DiscountAmountType",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "duration": {
          "name": "duration",
          "type": "DiscountDuration",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "number_of_payments": {
          "name": "number_of_payments",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "DiscountRedemptions_discount_id_idx": {
          "name": "DiscountRedemptions_discount_id_idx",
          "columns": [
            {
              "expression": "discount_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "DiscountRedemptions_purchase_id_idx": {
          "name": "DiscountRedemptions_purchase_id_idx",
          "columns": [
            {
              "expression": "purchase_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "DiscountRedemptions_purchase_id_unique_idx": {
          "name": "DiscountRedemptions_purchase_id_unique_idx",
          "columns": [
            {
              "expression": "purchase_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "DiscountRedemptions_discount_id_Discounts_id_fk": {
          "name": "DiscountRedemptions_discount_id_Discounts_id_fk",
          "tableFrom": "DiscountRedemptions",
          "tableTo": "Discounts",
          "columnsFrom": [
            "discount_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "DiscountRedemptions_purchase_id_Purchases_id_fk": {
          "name": "DiscountRedemptions_purchase_id_Purchases_id_fk",
          "tableFrom": "DiscountRedemptions",
          "tableTo": "Purchases",
          "columnsFrom": [
            "purchase_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "DiscountRedemptions_id_unique": {
          "name": "DiscountRedemptions_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "id"
          ]
        }
      },
      "policies": {
        "Check mode": {
          "name": "Check mode",
          "as": "RESTRICTIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ],
          "using": "current_setting('app.livemode')::boolean = livemode"
        },
        "Enable read for own organizations": {
          "name": "Enable read for own organizations",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ],
          "using": "\"discountId\" in (select \"discountId\" from \"Discounts\" where \"organizationId\" in (select \"organizationId\" from \"Memberships\"))"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.Discounts": {
      "name": "Discounts",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "livemode": {
          "name": "livemode",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "organization_id": {
          "name": "organization_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "code": {
          "name": "code",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "amount": {
          "name": "amount",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "amountType": {
          "name": "amountType",
          "type": "DiscountAmountType",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "active": {
          "name": "active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "duration": {
          "name": "duration",
          "type": "DiscountDuration",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "numberOfPayments": {
          "name": "numberOfPayments",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "stripeCouponId": {
          "name": "stripeCouponId",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "Discounts_organization_id_idx": {
          "name": "Discounts_organization_id_idx",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "Discounts_code_idx": {
          "name": "Discounts_code_idx",
          "columns": [
            {
              "expression": "code",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "Discounts_code_organization_id_unique_idx": {
          "name": "Discounts_code_organization_id_unique_idx",
          "columns": [
            {
              "expression": "code",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "Discounts_organization_id_Organizations_id_fk": {
          "name": "Discounts_organization_id_Organizations_id_fk",
          "tableFrom": "Discounts",
          "tableTo": "Organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "Discounts_id_unique": {
          "name": "Discounts_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "id"
          ]
        }
      },
      "policies": {
        "Check mode": {
          "name": "Check mode",
          "as": "RESTRICTIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ],
          "using": "current_setting('app.livemode')::boolean = livemode"
        },
        "Enable all actions for discounts in own organization": {
          "name": "Enable all actions for discounts in own organization",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ],
          "using": "\"organizationId\" in (select \"organizationId\" from \"Memberships\")"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.Events": {
      "name": "Events",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "livemode": {
          "name": "livemode",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "type": {
          "name": "type",
          "type": "FlowgladEventType",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "eventCategory": {
          "name": "eventCategory",
          "type": "EventCategory",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "eventRetentionPolicy": {
          "name": "eventRetentionPolicy",
          "type": "EventRetentionPolicy",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "rawPayload": {
          "name": "rawPayload",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "occurredAt": {
          "name": "occurredAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true
        },
        "submittedAt": {
          "name": "submittedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true
        },
        "processedAt": {
          "name": "processedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "source": {
          "name": "source",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "subjectEntity": {
          "name": "subjectEntity",
          "type": "EventNoun",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "subjectId": {
          "name": "subjectId",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "objectEntity": {
          "name": "objectEntity",
          "type": "EventNoun",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "objectId": {
          "name": "objectId",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "hash": {
          "name": "hash",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "organization_id": {
          "name": "organization_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "Events_type_idx": {
          "name": "Events_type_idx",
          "columns": [
            {
              "expression": "type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "Events_eventCategory_idx": {
          "name": "Events_eventCategory_idx",
          "columns": [
            {
              "expression": "eventCategory",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "Events_eventRetentionPolicy_idx": {
          "name": "Events_eventRetentionPolicy_idx",
          "columns": [
            {
              "expression": "eventRetentionPolicy",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "Events_subjectEntity_idx": {
          "name": "Events_subjectEntity_idx",
          "columns": [
            {
              "expression": "subjectEntity",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "Events_objectEntity_idx": {
          "name": "Events_objectEntity_idx",
          "columns": [
            {
              "expression": "objectEntity",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "Events_subjectEntity_subjectId_idx": {
          "name": "Events_subjectEntity_subjectId_idx",
          "columns": [
            {
              "expression": "subjectEntity",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "subjectId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "Events_objectEntity_objectId_idx": {
          "name": "Events_objectEntity_objectId_idx",
          "columns": [
            {
              "expression": "objectEntity",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "objectId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "Events_hash_unique_idx": {
          "name": "Events_hash_unique_idx",
          "columns": [
            {
              "expression": "hash",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "Events_organization_id_Organizations_id_fk": {
          "name": "Events_organization_id_Organizations_id_fk",
          "tableFrom": "Events",
          "tableTo": "Organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "Events_id_unique": {
          "name": "Events_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "id"
          ]
        },
        "Events_hash_unique": {
          "name": "Events_hash_unique",
          "nullsNotDistinct": false,
          "columns": [
            "hash"
          ]
        }
      },
      "policies": {
        "Check mode": {
          "name": "Check mode",
          "as": "RESTRICTIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ],
          "using": "current_setting('app.livemode')::boolean = livemode"
        },
        "Enable all actions for own organization": {
          "name": "Enable all actions for own organization",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "\"organizationId\" in (select \"organizationId\" from \"Memberships\")"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.FeeCalculations": {
      "name": "FeeCalculations",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "livemode": {
          "name": "livemode",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "organization_id": {
          "name": "organization_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "PurchaseSessionId": {
          "name": "PurchaseSessionId",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "PurchaseId": {
          "name": "PurchaseId",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "discount_id": {
          "name": "discount_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "variant_id": {
          "name": "variant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "paymentMethodType": {
          "name": "paymentMethodType",
          "type": "PaymentMethodType",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "discountAmountFixed": {
          "name": "discountAmountFixed",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "paymentMethodFeeFixed": {
          "name": "paymentMethodFeeFixed",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "baseAmount": {
          "name": "baseAmount",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "internationalFeePercentage": {
          "name": "internationalFeePercentage",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "flowgladFeePercentage": {
          "name": "flowgladFeePercentage",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "billingAddress": {
          "name": "billingAddress",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "taxAmountFixed": {
          "name": "taxAmountFixed",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "pretaxTotal": {
          "name": "pretaxTotal",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "stripeTaxCalculationId": {
          "name": "stripeTaxCalculationId",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "stripeTaxTransactionId": {
          "name": "stripeTaxTransactionId",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "billing_period_id": {
          "name": "billing_period_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "currency": {
          "name": "currency",
          "type": "CurrencyCode",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "type": {
          "name": "type",
          "type": "FeeCalculationType",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "internalNotes": {
          "name": "internalNotes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "FeeCalculations_organization_id_idx": {
          "name": "FeeCalculations_organization_id_idx",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "FeeCalculations_PurchaseSessionId_idx": {
          "name": "FeeCalculations_PurchaseSessionId_idx",
          "columns": [
            {
              "expression": "PurchaseSessionId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "FeeCalculations_PurchaseId_idx": {
          "name": "FeeCalculations_PurchaseId_idx",
          "columns": [
            {
              "expression": "PurchaseId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "FeeCalculations_discount_id_idx": {
          "name": "FeeCalculations_discount_id_idx",
          "columns": [
            {
              "expression": "discount_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "FeeCalculations_organization_id_Organizations_id_fk": {
          "name": "FeeCalculations_organization_id_Organizations_id_fk",
          "tableFrom": "FeeCalculations",
          "tableTo": "Organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "FeeCalculations_PurchaseSessionId_PurchaseSessions_id_fk": {
          "name": "FeeCalculations_PurchaseSessionId_PurchaseSessions_id_fk",
          "tableFrom": "FeeCalculations",
          "tableTo": "PurchaseSessions",
          "columnsFrom": [
            "PurchaseSessionId"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "FeeCalculations_PurchaseId_Purchases_id_fk": {
          "name": "FeeCalculations_PurchaseId_Purchases_id_fk",
          "tableFrom": "FeeCalculations",
          "tableTo": "Purchases",
          "columnsFrom": [
            "PurchaseId"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "FeeCalculations_discount_id_Discounts_id_fk": {
          "name": "FeeCalculations_discount_id_Discounts_id_fk",
          "tableFrom": "FeeCalculations",
          "tableTo": "Discounts",
          "columnsFrom": [
            "discount_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "FeeCalculations_variant_id_Variants_id_fk": {
          "name": "FeeCalculations_variant_id_Variants_id_fk",
          "tableFrom": "FeeCalculations",
          "tableTo": "Variants",
          "columnsFrom": [
            "variant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "FeeCalculations_billing_period_id_billing_periods_id_fk": {
          "name": "FeeCalculations_billing_period_id_billing_periods_id_fk",
          "tableFrom": "FeeCalculations",
          "tableTo": "billing_periods",
          "columnsFrom": [
            "billing_period_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "FeeCalculations_id_unique": {
          "name": "FeeCalculations_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "id"
          ]
        }
      },
      "policies": {
        "Check mode": {
          "name": "Check mode",
          "as": "RESTRICTIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ],
          "using": "current_setting('app.livemode')::boolean = livemode"
        },
        "Enable select for own organization": {
          "name": "Enable select for own organization",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "\"organizationId\" in (select \"organizationId\" from \"Memberships\")"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.Files": {
      "name": "Files",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "livemode": {
          "name": "livemode",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "organization_id": {
          "name": "organization_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "ProductId": {
          "name": "ProductId",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "sizeKb": {
          "name": "sizeKb",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "contentType": {
          "name": "contentType",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "objectKey": {
          "name": "objectKey",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "cdnUrl": {
          "name": "cdnUrl",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "etag": {
          "name": "etag",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "contentHash": {
          "name": "contentHash",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "Files_organization_id_idx": {
          "name": "Files_organization_id_idx",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "Files_objectKey_unique_idx": {
          "name": "Files_objectKey_unique_idx",
          "columns": [
            {
              "expression": "objectKey",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "Files_organization_id_Organizations_id_fk": {
          "name": "Files_organization_id_Organizations_id_fk",
          "tableFrom": "Files",
          "tableTo": "Organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "Files_ProductId_Products_id_fk": {
          "name": "Files_ProductId_Products_id_fk",
          "tableFrom": "Files",
          "tableTo": "Products",
          "columnsFrom": [
            "ProductId"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "Files_id_unique": {
          "name": "Files_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "id"
          ]
        },
        "Files_objectKey_unique": {
          "name": "Files_objectKey_unique",
          "nullsNotDistinct": false,
          "columns": [
            "objectKey"
          ]
        }
      },
      "policies": {
        "Check mode": {
          "name": "Check mode",
          "as": "RESTRICTIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ],
          "using": "current_setting('app.livemode')::boolean = livemode"
        },
        "Enable read for own organizations": {
          "name": "Enable read for own organizations",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ],
          "using": "\"organizationId\" in (select \"organizationId\" from \"Memberships\")",
          "withCheck": "\"ProductId\" is null OR \"ProductId\" in (select \"id\" from \"Products\")"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.FormFields": {
      "name": "FormFields",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "livemode": {
          "name": "livemode",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "order": {
          "name": "order",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "FormId": {
          "name": "FormId",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "type": {
          "name": "type",
          "type": "FormFieldType",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "question": {
          "name": "question",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "required": {
          "name": "required",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "fieldParameters": {
          "name": "fieldParameters",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "FormFields_FormId_idx": {
          "name": "FormFields_FormId_idx",
          "columns": [
            {
              "expression": "FormId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "FormFields_type_idx": {
          "name": "FormFields_type_idx",
          "columns": [
            {
              "expression": "type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "FormFields_FormId_Forms_id_fk": {
          "name": "FormFields_FormId_Forms_id_fk",
          "tableFrom": "FormFields",
          "tableTo": "Forms",
          "columnsFrom": [
            "FormId"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "FormFields_id_unique": {
          "name": "FormFields_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "id"
          ]
        }
      },
      "policies": {
        "Enable all for own forms": {
          "name": "Enable all for own forms",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ],
          "using": "\"FormId\" in (select \"id\" from \"Forms\")"
        },
        "Check mode": {
          "name": "Check mode",
          "as": "RESTRICTIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ],
          "using": "current_setting('app.livemode')::boolean = livemode"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.Forms": {
      "name": "Forms",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "livemode": {
          "name": "livemode",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "organization_id": {
          "name": "organization_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "ProductId": {
          "name": "ProductId",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "Forms_organization_id_idx": {
          "name": "Forms_organization_id_idx",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "Forms_ProductId_unique_idx": {
          "name": "Forms_ProductId_unique_idx",
          "columns": [
            {
              "expression": "ProductId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "Forms_organization_id_Organizations_id_fk": {
          "name": "Forms_organization_id_Organizations_id_fk",
          "tableFrom": "Forms",
          "tableTo": "Organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "Forms_ProductId_Products_id_fk": {
          "name": "Forms_ProductId_Products_id_fk",
          "tableFrom": "Forms",
          "tableTo": "Products",
          "columnsFrom": [
            "ProductId"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "Forms_id_unique": {
          "name": "Forms_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "id"
          ]
        }
      },
      "policies": {
        "Enable all for own organizations": {
          "name": "Enable all for own organizations",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ],
          "using": "\"organizationId\" in (select \"organizationId\" from \"Memberships\")",
          "withCheck": "\"ProductId\" is null OR \"ProductId\" in (select \"id\" from \"Products\")"
        },
        "Check mode": {
          "name": "Check mode",
          "as": "RESTRICTIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ],
          "using": "current_setting('app.livemode')::boolean = livemode"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.FormSubmissions": {
      "name": "FormSubmissions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "livemode": {
          "name": "livemode",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "FormId": {
          "name": "FormId",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "UserId": {
          "name": "UserId",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "response": {
          "name": "response",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "FormSubmissions_FormId_idx": {
          "name": "FormSubmissions_FormId_idx",
          "columns": [
            {
              "expression": "FormId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "FormSubmissions_UserId_idx": {
          "name": "FormSubmissions_UserId_idx",
          "columns": [
            {
              "expression": "UserId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "FormSubmissions_FormId_Forms_id_fk": {
          "name": "FormSubmissions_FormId_Forms_id_fk",
          "tableFrom": "FormSubmissions",
          "tableTo": "Forms",
          "columnsFrom": [
            "FormId"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "FormSubmissions_UserId_Users_id_fk": {
          "name": "FormSubmissions_UserId_Users_id_fk",
          "tableFrom": "FormSubmissions",
          "tableTo": "Users",
          "columnsFrom": [
            "UserId"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "FormSubmissions_id_unique": {
          "name": "FormSubmissions_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "id"
          ]
        }
      },
      "policies": {
        "Enable all for own forms": {
          "name": "Enable all for own forms",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ],
          "using": "\"FormId\" in (select \"id\" from \"Forms\")"
        },
        "Check mode": {
          "name": "Check mode",
          "as": "RESTRICTIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ],
          "using": "current_setting('app.livemode')::boolean = livemode"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.Integrations": {
      "name": "Integrations",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "livemode": {
          "name": "livemode",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "UserId": {
          "name": "UserId",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "organization_id": {
          "name": "organization_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "provider": {
          "name": "provider",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "method": {
          "name": "method",
          "type": "IntegrationMethod",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "encryptedAccessToken": {
          "name": "encryptedAccessToken",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "encryptedRefreshToken": {
          "name": "encryptedRefreshToken",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "encryptedApiKey": {
          "name": "encryptedApiKey",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "IntegrationStatus",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "scope": {
          "name": "scope",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "tokenExpiresAt": {
          "name": "tokenExpiresAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "lastTokenRefresh": {
          "name": "lastTokenRefresh",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "providerConfig": {
          "name": "providerConfig",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "Integrations_UserId_idx": {
          "name": "Integrations_UserId_idx",
          "columns": [
            {
              "expression": "UserId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "Integrations_organization_id_idx": {
          "name": "Integrations_organization_id_idx",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "Integrations_provider_idx": {
          "name": "Integrations_provider_idx",
          "columns": [
            {
              "expression": "provider",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "Integrations_status_idx": {
          "name": "Integrations_status_idx",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "Integrations_UserId_Users_id_fk": {
          "name": "Integrations_UserId_Users_id_fk",
          "tableFrom": "Integrations",
          "tableTo": "Users",
          "columnsFrom": [
            "UserId"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "Integrations_organization_id_Organizations_id_fk": {
          "name": "Integrations_organization_id_Organizations_id_fk",
          "tableFrom": "Integrations",
          "tableTo": "Organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "Integrations_id_unique": {
          "name": "Integrations_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "id"
          ]
        }
      },
      "policies": {
        "Enable read for own organizations": {
          "name": "Enable read for own organizations",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ],
          "using": "\"organizationId\" in (select \"organizationId\" from \"Memberships\") OR \"UserId\" = requesting_user_id()"
        },
        "Check mode": {
          "name": "Check mode",
          "as": "RESTRICTIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ],
          "using": "current_setting('app.livemode')::boolean = livemode"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.IntegrationSessions": {
      "name": "IntegrationSessions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "livemode": {
          "name": "livemode",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "IntegrationId": {
          "name": "IntegrationId",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "state": {
          "name": "state",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "codeVerifier": {
          "name": "codeVerifier",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "redirectUrl": {
          "name": "redirectUrl",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "expiresAt": {
          "name": "expiresAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "IntegrationSessions_IntegrationId_idx": {
          "name": "IntegrationSessions_IntegrationId_idx",
          "columns": [
            {
              "expression": "IntegrationId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IntegrationSessions_state_idx": {
          "name": "IntegrationSessions_state_idx",
          "columns": [
            {
              "expression": "state",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "IntegrationSessions_IntegrationId_Integrations_id_fk": {
          "name": "IntegrationSessions_IntegrationId_Integrations_id_fk",
          "tableFrom": "IntegrationSessions",
          "tableTo": "Integrations",
          "columnsFrom": [
            "IntegrationId"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "IntegrationSessions_id_unique": {
          "name": "IntegrationSessions_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "id"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.InvoiceLineItems": {
      "name": "InvoiceLineItems",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "livemode": {
          "name": "livemode",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "invoice_id": {
          "name": "invoice_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "quantity": {
          "name": "quantity",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "variant_id": {
          "name": "variant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "price": {
          "name": "price",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "InvoiceLineItems_invoice_id_idx": {
          "name": "InvoiceLineItems_invoice_id_idx",
          "columns": [
            {
              "expression": "invoice_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "InvoiceLineItems_variant_id_idx": {
          "name": "InvoiceLineItems_variant_id_idx",
          "columns": [
            {
              "expression": "variant_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "InvoiceLineItems_invoice_id_Invoices_id_fk": {
          "name": "InvoiceLineItems_invoice_id_Invoices_id_fk",
          "tableFrom": "InvoiceLineItems",
          "tableTo": "Invoices",
          "columnsFrom": [
            "invoice_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "InvoiceLineItems_variant_id_Variants_id_fk": {
          "name": "InvoiceLineItems_variant_id_Variants_id_fk",
          "tableFrom": "InvoiceLineItems",
          "tableTo": "Variants",
          "columnsFrom": [
            "variant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "InvoiceLineItems_id_unique": {
          "name": "InvoiceLineItems_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "id"
          ]
        }
      },
      "policies": {
        "Check mode": {
          "name": "Check mode",
          "as": "RESTRICTIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ],
          "using": "current_setting('app.livemode')::boolean = livemode"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.Invoices": {
      "name": "Invoices",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "livemode": {
          "name": "livemode",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "purchase_id": {
          "name": "purchase_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "invoice_number": {
          "name": "invoice_number",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "invoice_date": {
          "name": "invoice_date",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "billing_period_id": {
          "name": "billing_period_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "due_date": {
          "name": "due_date",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "stripe_payment_intent_id": {
          "name": "stripe_payment_intent_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "customer_profile_id": {
          "name": "customer_profile_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "organization_id": {
          "name": "organization_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "InvoiceStatus",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'draft'"
        },
        "billingInterval": {
          "name": "billingInterval",
          "type": "interval",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "billing_period_start_date": {
          "name": "billing_period_start_date",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "billing_period_end_date": {
          "name": "billing_period_end_date",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "billing_interval_count": {
          "name": "billing_interval_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "billing_anchor_date": {
          "name": "billing_anchor_date",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "owner_membership_id": {
          "name": "owner_membership_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "pdf_url": {
          "name": "pdf_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "receipt_pdf_url": {
          "name": "receipt_pdf_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "memo": {
          "name": "memo",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "bank_payment_only": {
          "name": "bank_payment_only",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "type": {
          "name": "type",
          "type": "InvoiceType",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "currency": {
          "name": "currency",
          "type": "CurrencyCode",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "taxAmount": {
          "name": "taxAmount",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "subtotal": {
          "name": "subtotal",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "stripeTaxCalculationId": {
          "name": "stripeTaxCalculationId",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "stripeTaxTransactionId": {
          "name": "stripeTaxTransactionId",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "taxType": {
          "name": "taxType",
          "type": "TaxType",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "taxCountry": {
          "name": "taxCountry",
          "type": "CountryCode",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "taxState": {
          "name": "taxState",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "taxRatePercentage": {
          "name": "taxRatePercentage",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "applicationFee": {
          "name": "applicationFee",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "Invoices_invoice_number_unique_idx": {
          "name": "Invoices_invoice_number_unique_idx",
          "columns": [
            {
              "expression": "invoice_number",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "Invoices_purchase_id_idx": {
          "name": "Invoices_purchase_id_idx",
          "columns": [
            {
              "expression": "purchase_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "Invoices_status_idx": {
          "name": "Invoices_status_idx",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "Invoices_customer_profile_id_idx": {
          "name": "Invoices_customer_profile_id_idx",
          "columns": [
            {
              "expression": "customer_profile_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "Invoices_stripe_payment_intent_id_idx": {
          "name": "Invoices_stripe_payment_intent_id_idx",
          "columns": [
            {
              "expression": "stripe_payment_intent_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "Invoices_organization_id_idx": {
          "name": "Invoices_organization_id_idx",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "Invoices_purchase_id_Purchases_id_fk": {
          "name": "Invoices_purchase_id_Purchases_id_fk",
          "tableFrom": "Invoices",
          "tableTo": "Purchases",
          "columnsFrom": [
            "purchase_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "Invoices_billing_period_id_billing_periods_id_fk": {
          "name": "Invoices_billing_period_id_billing_periods_id_fk",
          "tableFrom": "Invoices",
          "tableTo": "billing_periods",
          "columnsFrom": [
            "billing_period_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "Invoices_customer_profile_id_customer_profiles_id_fk": {
          "name": "Invoices_customer_profile_id_customer_profiles_id_fk",
          "tableFrom": "Invoices",
          "tableTo": "customer_profiles",
          "columnsFrom": [
            "customer_profile_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "Invoices_organization_id_Organizations_id_fk": {
          "name": "Invoices_organization_id_Organizations_id_fk",
          "tableFrom": "Invoices",
          "tableTo": "Organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "Invoices_owner_membership_id_Memberships_id_fk": {
          "name": "Invoices_owner_membership_id_Memberships_id_fk",
          "tableFrom": "Invoices",
          "tableTo": "Memberships",
          "columnsFrom": [
            "owner_membership_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "Invoices_id_unique": {
          "name": "Invoices_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "id"
          ]
        },
        "Invoices_invoice_number_unique": {
          "name": "Invoices_invoice_number_unique",
          "nullsNotDistinct": false,
          "columns": [
            "invoice_number"
          ]
        }
      },
      "policies": {
        "Check mode": {
          "name": "Check mode",
          "as": "RESTRICTIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ],
          "using": "current_setting('app.livemode')::boolean = livemode"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.Links": {
      "name": "Links",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "livemode": {
          "name": "livemode",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "organization_id": {
          "name": "organization_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "ProductId": {
          "name": "ProductId",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "url": {
          "name": "url",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "Links_organization_id_idx": {
          "name": "Links_organization_id_idx",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "Links_ProductId_idx": {
          "name": "Links_ProductId_idx",
          "columns": [
            {
              "expression": "ProductId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "Links_organization_id_Organizations_id_fk": {
          "name": "Links_organization_id_Organizations_id_fk",
          "tableFrom": "Links",
          "tableTo": "Organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "Links_ProductId_Products_id_fk": {
          "name": "Links_ProductId_Products_id_fk",
          "tableFrom": "Links",
          "tableTo": "Products",
          "columnsFrom": [
            "ProductId"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "Links_id_unique": {
          "name": "Links_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "id"
          ]
        }
      },
      "policies": {
        "Enable read for own organizations": {
          "name": "Enable read for own organizations",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ],
          "using": "\"organizationId\" in (select \"organizationId\" from \"Memberships\")",
          "withCheck": "\"ProductId\" is null OR \"ProductId\" in (select \"id\" from \"Products\")"
        },
        "Check mode": {
          "name": "Check mode",
          "as": "RESTRICTIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ],
          "using": "current_setting('app.livemode')::boolean = livemode"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.Memberships": {
      "name": "Memberships",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "livemode": {
          "name": "livemode",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "UserId": {
          "name": "UserId",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "organization_id": {
          "name": "organization_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "focused": {
          "name": "focused",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        }
      },
      "indexes": {
        "Memberships_UserId_idx": {
          "name": "Memberships_UserId_idx",
          "columns": [
            {
              "expression": "UserId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "Memberships_organization_id_idx": {
          "name": "Memberships_organization_id_idx",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "Memberships_UserId_organization_id_unique_idx": {
          "name": "Memberships_UserId_organization_id_unique_idx",
          "columns": [
            {
              "expression": "UserId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "Memberships_UserId_Users_id_fk": {
          "name": "Memberships_UserId_Users_id_fk",
          "tableFrom": "Memberships",
          "tableTo": "Users",
          "columnsFrom": [
            "UserId"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "Memberships_organization_id_Organizations_id_fk": {
          "name": "Memberships_organization_id_Organizations_id_fk",
          "tableFrom": "Memberships",
          "tableTo": "Organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "Memberships_id_unique": {
          "name": "Memberships_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "id"
          ]
        }
      },
      "policies": {
        "Enable read for own organizations": {
          "name": "Enable read for own organizations",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "\"UserId\" = requesting_user_id()"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.Messages": {
      "name": "Messages",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "livemode": {
          "name": "livemode",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "customer_profile_id": {
          "name": "customer_profile_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "messageSentAt": {
          "name": "messageSentAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true
        },
        "OrganizationMemberId": {
          "name": "OrganizationMemberId",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "rawText": {
          "name": "rawText",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "platform": {
          "name": "platform",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "platformThreadId": {
          "name": "platformThreadId",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "platformChannelId": {
          "name": "platformChannelId",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "platformId": {
          "name": "platformId",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "platformUserId": {
          "name": "platformUserId",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "payload": {
          "name": "payload",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "Messages_platformId_idx": {
          "name": "Messages_platformId_idx",
          "columns": [
            {
              "expression": "platformId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "Messages_platformThreadId_idx": {
          "name": "Messages_platformThreadId_idx",
          "columns": [
            {
              "expression": "platformThreadId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "Messages_platformId_platform_unique_idx": {
          "name": "Messages_platformId_platform_unique_idx",
          "columns": [
            {
              "expression": "platformId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "platform",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "Messages_customer_profile_id_customer_profiles_id_fk": {
          "name": "Messages_customer_profile_id_customer_profiles_id_fk",
          "tableFrom": "Messages",
          "tableTo": "customer_profiles",
          "columnsFrom": [
            "customer_profile_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "Messages_OrganizationMemberId_Memberships_id_fk": {
          "name": "Messages_OrganizationMemberId_Memberships_id_fk",
          "tableFrom": "Messages",
          "tableTo": "Memberships",
          "columnsFrom": [
            "OrganizationMemberId"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "Messages_id_unique": {
          "name": "Messages_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "id"
          ]
        }
      },
      "policies": {
        "Check mode": {
          "name": "Check mode",
          "as": "RESTRICTIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ],
          "using": "current_setting('app.livemode')::boolean = livemode"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.Organizations": {
      "name": "Organizations",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "stripeAccountId": {
          "name": "stripeAccountId",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "domain": {
          "name": "domain",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "CountryId": {
          "name": "CountryId",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "logoURL": {
          "name": "logoURL",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "tagline": {
          "name": "tagline",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "subdomainSlug": {
          "name": "subdomainSlug",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "payoutsEnabled": {
          "name": "payoutsEnabled",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "onboardingStatus": {
          "name": "onboardingStatus",
          "type": "BusinessOnboardingStatus",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "feePercentage": {
          "name": "feePercentage",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'3.00'"
        },
        "defaultCurrency": {
          "name": "defaultCurrency",
          "type": "CurrencyCode",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "billingAddress": {
          "name": "billingAddress",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "contactEmail": {
          "name": "contactEmail",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "stripeConnectContractType": {
          "name": "stripeConnectContractType",
          "type": "StripeConnectContractType",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'platform'"
        }
      },
      "indexes": {
        "Organizations_name_idx": {
          "name": "Organizations_name_idx",
          "columns": [
            {
              "expression": "name",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "Organizations_stripeAccountId_unique_idx": {
          "name": "Organizations_stripeAccountId_unique_idx",
          "columns": [
            {
              "expression": "stripeAccountId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "Organizations_domain_unique_idx": {
          "name": "Organizations_domain_unique_idx",
          "columns": [
            {
              "expression": "domain",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "Organizations_CountryId_idx": {
          "name": "Organizations_CountryId_idx",
          "columns": [
            {
              "expression": "CountryId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "Organizations_CountryId_countries_id_fk": {
          "name": "Organizations_CountryId_countries_id_fk",
          "tableFrom": "Organizations",
          "tableTo": "countries",
          "columnsFrom": [
            "CountryId"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "Organizations_id_unique": {
          "name": "Organizations_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "id"
          ]
        },
        "Organizations_stripeAccountId_unique": {
          "name": "Organizations_stripeAccountId_unique",
          "nullsNotDistinct": false,
          "columns": [
            "stripeAccountId"
          ]
        },
        "Organizations_domain_unique": {
          "name": "Organizations_domain_unique",
          "nullsNotDistinct": false,
          "columns": [
            "domain"
          ]
        },
        "Organizations_subdomainSlug_unique": {
          "name": "Organizations_subdomainSlug_unique",
          "nullsNotDistinct": false,
          "columns": [
            "subdomainSlug"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.PaymentMethods": {
      "name": "PaymentMethods",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "livemode": {
          "name": "livemode",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "customer_profile_id": {
          "name": "customer_profile_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "billingDetails": {
          "name": "billingDetails",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "type": {
          "name": "type",
          "type": "PaymentMethodType",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "default": {
          "name": "default",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "paymentMethodData": {
          "name": "paymentMethodData",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "stripePaymentMethodId": {
          "name": "stripePaymentMethodId",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "PaymentMethods_customer_profile_id_idx": {
          "name": "PaymentMethods_customer_profile_id_idx",
          "columns": [
            {
              "expression": "customer_profile_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "PaymentMethods_type_idx": {
          "name": "PaymentMethods_type_idx",
          "columns": [
            {
              "expression": "type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "PaymentMethods_customer_profile_id_customer_profiles_id_fk": {
          "name": "PaymentMethods_customer_profile_id_customer_profiles_id_fk",
          "tableFrom": "PaymentMethods",
          "tableTo": "customer_profiles",
          "columnsFrom": [
            "customer_profile_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "PaymentMethods_id_unique": {
          "name": "PaymentMethods_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "id"
          ]
        }
      },
      "policies": {
        "Enable read for own organizations via customer profiles": {
          "name": "Enable read for own organizations via customer profiles",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ],
          "using": "\"customerProfileId\" in (select \"id\" from \"CustomerProfiles\")"
        },
        "Check mode": {
          "name": "Check mode",
          "as": "RESTRICTIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ],
          "using": "current_setting('app.livemode')::boolean = livemode"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.Payments": {
      "name": "Payments",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "livemode": {
          "name": "livemode",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "invoice_id": {
          "name": "invoice_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "amount": {
          "name": "amount",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "paymentMethod": {
          "name": "paymentMethod",
          "type": "PaymentMethod",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "currency": {
          "name": "currency",
          "type": "Currency",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "PaymentStatus",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "chargeDate": {
          "name": "chargeDate",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true
        },
        "settlementDate": {
          "name": "settlementDate",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "receiptNumber": {
          "name": "receiptNumber",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "receiptURL": {
          "name": "receiptURL",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "organization_id": {
          "name": "organization_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "customer_profile_id": {
          "name": "customer_profile_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "PurchaseId": {
          "name": "PurchaseId",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "PaymentMethodId": {
          "name": "PaymentMethodId",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "billing_period_id": {
          "name": "billing_period_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "stripePaymentIntentId": {
          "name": "stripePaymentIntentId",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "stripeChargeId": {
          "name": "stripeChargeId",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "taxAmount": {
          "name": "taxAmount",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "subtotal": {
          "name": "subtotal",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "stripeTaxCalculationId": {
          "name": "stripeTaxCalculationId",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "stripeTaxTransactionId": {
          "name": "stripeTaxTransactionId",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "taxType": {
          "name": "taxType",
          "type": "TaxType",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "taxCountry": {
          "name": "taxCountry",
          "type": "CountryCode",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "taxState": {
          "name": "taxState",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "taxRatePercentage": {
          "name": "taxRatePercentage",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "applicationFee": {
          "name": "applicationFee",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "refunded": {
          "name": "refunded",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "refundedAmount": {
          "name": "refundedAmount",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "refundedAt": {
          "name": "refundedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "Payments_invoice_id_idx": {
          "name": "Payments_invoice_id_idx",
          "columns": [
            {
              "expression": "invoice_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "Payments_organization_id_idx": {
          "name": "Payments_organization_id_idx",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "Payments_paymentMethod_idx": {
          "name": "Payments_paymentMethod_idx",
          "columns": [
            {
              "expression": "paymentMethod",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "Payments_customer_profile_id_idx": {
          "name": "Payments_customer_profile_id_idx",
          "columns": [
            {
              "expression": "customer_profile_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "Payments_status_idx": {
          "name": "Payments_status_idx",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "Payments_currency_idx": {
          "name": "Payments_currency_idx",
          "columns": [
            {
              "expression": "currency",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "Payments_PurchaseId_idx": {
          "name": "Payments_PurchaseId_idx",
          "columns": [
            {
              "expression": "PurchaseId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "Payments_stripeChargeId_unique_idx": {
          "name": "Payments_stripeChargeId_unique_idx",
          "columns": [
            {
              "expression": "stripeChargeId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "Payments_invoice_id_Invoices_id_fk": {
          "name": "Payments_invoice_id_Invoices_id_fk",
          "tableFrom": "Payments",
          "tableTo": "Invoices",
          "columnsFrom": [
            "invoice_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "Payments_organization_id_Organizations_id_fk": {
          "name": "Payments_organization_id_Organizations_id_fk",
          "tableFrom": "Payments",
          "tableTo": "Organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "Payments_customer_profile_id_customer_profiles_id_fk": {
          "name": "Payments_customer_profile_id_customer_profiles_id_fk",
          "tableFrom": "Payments",
          "tableTo": "customer_profiles",
          "columnsFrom": [
            "customer_profile_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "Payments_PurchaseId_Purchases_id_fk": {
          "name": "Payments_PurchaseId_Purchases_id_fk",
          "tableFrom": "Payments",
          "tableTo": "Purchases",
          "columnsFrom": [
            "PurchaseId"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "Payments_PaymentMethodId_PaymentMethods_id_fk": {
          "name": "Payments_PaymentMethodId_PaymentMethods_id_fk",
          "tableFrom": "Payments",
          "tableTo": "PaymentMethods",
          "columnsFrom": [
            "PaymentMethodId"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "Payments_billing_period_id_billing_periods_id_fk": {
          "name": "Payments_billing_period_id_billing_periods_id_fk",
          "tableFrom": "Payments",
          "tableTo": "billing_periods",
          "columnsFrom": [
            "billing_period_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "Payments_id_unique": {
          "name": "Payments_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "id"
          ]
        }
      },
      "policies": {
        "Enable select for own organization": {
          "name": "Enable select for own organization",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "\"organizationId\" in (select \"organizationId\" from \"Memberships\")"
        },
        "Enable update for own organization": {
          "name": "Enable update for own organization",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "\"organizationId\" in (select \"organizationId\" from \"Memberships\")"
        },
        "Check mode": {
          "name": "Check mode",
          "as": "RESTRICTIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ],
          "using": "current_setting('app.livemode')::boolean = livemode"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.Products": {
      "name": "Products",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "livemode": {
          "name": "livemode",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "imageURL": {
          "name": "imageURL",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "stripeProductId": {
          "name": "stripeProductId",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "organization_id": {
          "name": "organization_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "displayFeatures": {
          "name": "displayFeatures",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "active": {
          "name": "active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        }
      },
      "indexes": {
        "Products_organization_id_idx": {
          "name": "Products_organization_id_idx",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "Products_active_idx": {
          "name": "Products_active_idx",
          "columns": [
            {
              "expression": "active",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "Products_stripeProductId_idx": {
          "name": "Products_stripeProductId_idx",
          "columns": [
            {
              "expression": "stripeProductId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "Products_organization_id_Organizations_id_fk": {
          "name": "Products_organization_id_Organizations_id_fk",
          "tableFrom": "Products",
          "tableTo": "Organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "Products_id_unique": {
          "name": "Products_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "id"
          ]
        },
        "Products_stripeProductId_unique": {
          "name": "Products_stripeProductId_unique",
          "nullsNotDistinct": false,
          "columns": [
            "stripeProductId"
          ]
        }
      },
      "policies": {
        "Enable read for own organizations": {
          "name": "Enable read for own organizations",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ],
          "using": "\"organizationId\" in (select \"organizationId\" from \"Memberships\")"
        },
        "Check mode": {
          "name": "Check mode",
          "as": "RESTRICTIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ],
          "using": "current_setting('app.livemode')::boolean = livemode"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.ProperNouns": {
      "name": "ProperNouns",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "livemode": {
          "name": "livemode",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "EntityId": {
          "name": "EntityId",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "entityType": {
          "name": "entityType",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "organization_id": {
          "name": "organization_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "ProperNouns_organization_id_idx": {
          "name": "ProperNouns_organization_id_idx",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ProperNouns_EntityId_entityType_unique_idx": {
          "name": "ProperNouns_EntityId_entityType_unique_idx",
          "columns": [
            {
              "expression": "EntityId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "entityType",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ProperNouns_entityType_EntityId_organization_id_idx": {
          "name": "ProperNouns_entityType_EntityId_organization_id_idx",
          "columns": [
            {
              "expression": "entityType",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "EntityId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ProperNouns_name_idx": {
          "name": "ProperNouns_name_idx",
          "columns": [
            {
              "expression": "name",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "proper_noun_name_search_index": {
          "name": "proper_noun_name_search_index",
          "columns": [
            {
              "expression": "to_tsvector('english', \"name\")",
              "asc": true,
              "isExpression": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "gin",
          "with": {}
        },
        "ProperNouns_EntityId_idx": {
          "name": "ProperNouns_EntityId_idx",
          "columns": [
            {
              "expression": "EntityId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "ProperNouns_organization_id_Organizations_id_fk": {
          "name": "ProperNouns_organization_id_Organizations_id_fk",
          "tableFrom": "ProperNouns",
          "tableTo": "Organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "ProperNouns_id_unique": {
          "name": "ProperNouns_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "id"
          ]
        }
      },
      "policies": {
        "Enable read for own organizations": {
          "name": "Enable read for own organizations",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "\"organizationId\" in (select \"organizationId\" from \"Memberships\" where \"UserId\" = requesting_user_id())"
        },
        "Check mode": {
          "name": "Check mode",
          "as": "RESTRICTIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ],
          "using": "current_setting('app.livemode')::boolean = livemode"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.PurchaseAccessSessions": {
      "name": "PurchaseAccessSessions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "livemode": {
          "name": "livemode",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "PurchaseId": {
          "name": "PurchaseId",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "token": {
          "name": "token",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "source": {
          "name": "source",
          "type": "PurchaseAccessSessionSource",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "expires": {
          "name": "expires",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true
        },
        "granted": {
          "name": "granted",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "PurchaseAccessSessions_PurchaseId_idx": {
          "name": "PurchaseAccessSessions_PurchaseId_idx",
          "columns": [
            {
              "expression": "PurchaseId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "PurchaseAccessSessions_token_unique_idx": {
          "name": "PurchaseAccessSessions_token_unique_idx",
          "columns": [
            {
              "expression": "token",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "PurchaseAccessSessions_PurchaseId_Purchases_id_fk": {
          "name": "PurchaseAccessSessions_PurchaseId_Purchases_id_fk",
          "tableFrom": "PurchaseAccessSessions",
          "tableTo": "Purchases",
          "columnsFrom": [
            "PurchaseId"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "PurchaseAccessSessions_id_unique": {
          "name": "PurchaseAccessSessions_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "id"
          ]
        }
      },
      "policies": {
        "Check mode": {
          "name": "Check mode",
          "as": "RESTRICTIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ],
          "using": "current_setting('app.livemode')::boolean = livemode"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.Purchases": {
      "name": "Purchases",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "livemode": {
          "name": "livemode",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "PurchaseStatus",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false,
          "default": "'open'"
        },
        "customer_profile_id": {
          "name": "customer_profile_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "organization_id": {
          "name": "organization_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "billing_cycle_anchor": {
          "name": "billing_cycle_anchor",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "variant_id": {
          "name": "variant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "quantity": {
          "name": "quantity",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "price_type": {
          "name": "price_type",
          "type": "PriceType",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'single_payment'"
        },
        "trial_period_days": {
          "name": "trial_period_days",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "price_per_billing_cycle": {
          "name": "price_per_billing_cycle",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "interval_unit": {
          "name": "interval_unit",
          "type": "IntervalUnit",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "interval_count": {
          "name": "interval_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "first_invoice_value": {
          "name": "first_invoice_value",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "total_purchase_value": {
          "name": "total_purchase_value",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "bank_payment_only": {
          "name": "bank_payment_only",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "purchase_date": {
          "name": "purchase_date",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "end_date": {
          "name": "end_date",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "proposal": {
          "name": "proposal",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "archived": {
          "name": "archived",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "billing_address": {
          "name": "billing_address",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "Purchases_customer_profile_id_idx": {
          "name": "Purchases_customer_profile_id_idx",
          "columns": [
            {
              "expression": "customer_profile_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "Purchases_organization_id_idx": {
          "name": "Purchases_organization_id_idx",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "Purchases_variant_id_idx": {
          "name": "Purchases_variant_id_idx",
          "columns": [
            {
              "expression": "variant_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "Purchases_customer_profile_id_customer_profiles_id_fk": {
          "name": "Purchases_customer_profile_id_customer_profiles_id_fk",
          "tableFrom": "Purchases",
          "tableTo": "customer_profiles",
          "columnsFrom": [
            "customer_profile_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "Purchases_organization_id_Organizations_id_fk": {
          "name": "Purchases_organization_id_Organizations_id_fk",
          "tableFrom": "Purchases",
          "tableTo": "Organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "Purchases_variant_id_Variants_id_fk": {
          "name": "Purchases_variant_id_Variants_id_fk",
          "tableFrom": "Purchases",
          "tableTo": "Variants",
          "columnsFrom": [
            "variant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "Purchases_id_unique": {
          "name": "Purchases_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "id"
          ]
        }
      },
      "policies": {
        "Check mode": {
          "name": "Check mode",
          "as": "RESTRICTIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ],
          "using": "current_setting('app.livemode')::boolean = livemode"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.PurchaseSessions": {
      "name": "PurchaseSessions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "livemode": {
          "name": "livemode",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "PurchaseSessionStatus",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "billing_address": {
          "name": "billing_address",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "variant_id": {
          "name": "variant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "purchase_id": {
          "name": "purchase_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "invoice_id": {
          "name": "invoice_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "quantity": {
          "name": "quantity",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "organization_id": {
          "name": "organization_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "customer_name": {
          "name": "customer_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "customer_email": {
          "name": "customer_email",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "stripe_setup_intent_id": {
          "name": "stripe_setup_intent_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "stripe_payment_intent_id": {
          "name": "stripe_payment_intent_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "customer_profile_id": {
          "name": "customer_profile_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "expires": {
          "name": "expires",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true
        },
        "paymentMethodType": {
          "name": "paymentMethodType",
          "type": "PaymentMethodType",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "discount_id": {
          "name": "discount_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "successUrl": {
          "name": "successUrl",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "cancelUrl": {
          "name": "cancelUrl",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "type": {
          "name": "type",
          "type": "PurchaseSessionType",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "PurchaseSessions_variant_id_idx": {
          "name": "PurchaseSessions_variant_id_idx",
          "columns": [
            {
              "expression": "variant_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "PurchaseSessions_stripe_payment_intent_id_idx": {
          "name": "PurchaseSessions_stripe_payment_intent_id_idx",
          "columns": [
            {
              "expression": "stripe_payment_intent_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "PurchaseSessions_organization_id_idx": {
          "name": "PurchaseSessions_organization_id_idx",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "PurchaseSessions_status_idx": {
          "name": "PurchaseSessions_status_idx",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "PurchaseSessions_stripe_setup_intent_id_idx": {
          "name": "PurchaseSessions_stripe_setup_intent_id_idx",
          "columns": [
            {
              "expression": "stripe_setup_intent_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "PurchaseSessions_purchase_id_idx": {
          "name": "PurchaseSessions_purchase_id_idx",
          "columns": [
            {
              "expression": "purchase_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "PurchaseSessions_discount_id_idx": {
          "name": "PurchaseSessions_discount_id_idx",
          "columns": [
            {
              "expression": "discount_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "PurchaseSessions_customer_profile_id_idx": {
          "name": "PurchaseSessions_customer_profile_id_idx",
          "columns": [
            {
              "expression": "customer_profile_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "PurchaseSessions_variant_id_Variants_id_fk": {
          "name": "PurchaseSessions_variant_id_Variants_id_fk",
          "tableFrom": "PurchaseSessions",
          "tableTo": "Variants",
          "columnsFrom": [
            "variant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "PurchaseSessions_purchase_id_Purchases_id_fk": {
          "name": "PurchaseSessions_purchase_id_Purchases_id_fk",
          "tableFrom": "PurchaseSessions",
          "tableTo": "Purchases",
          "columnsFrom": [
            "purchase_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "PurchaseSessions_invoice_id_Invoices_id_fk": {
          "name": "PurchaseSessions_invoice_id_Invoices_id_fk",
          "tableFrom": "PurchaseSessions",
          "tableTo": "Invoices",
          "columnsFrom": [
            "invoice_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "PurchaseSessions_organization_id_Organizations_id_fk": {
          "name": "PurchaseSessions_organization_id_Organizations_id_fk",
          "tableFrom": "PurchaseSessions",
          "tableTo": "Organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "PurchaseSessions_customer_profile_id_customer_profiles_id_fk": {
          "name": "PurchaseSessions_customer_profile_id_customer_profiles_id_fk",
          "tableFrom": "PurchaseSessions",
          "tableTo": "customer_profiles",
          "columnsFrom": [
            "customer_profile_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "PurchaseSessions_discount_id_Discounts_id_fk": {
          "name": "PurchaseSessions_discount_id_Discounts_id_fk",
          "tableFrom": "PurchaseSessions",
          "tableTo": "Discounts",
          "columnsFrom": [
            "discount_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "PurchaseSessions_id_unique": {
          "name": "PurchaseSessions_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "id"
          ]
        }
      },
      "policies": {
        "Check mode": {
          "name": "Check mode",
          "as": "RESTRICTIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ],
          "using": "current_setting('app.livemode')::boolean = livemode"
        },
        "Enable all actions for discounts in own organization": {
          "name": "Enable all actions for discounts in own organization",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ],
          "using": "\"organizationId\" in (select \"organizationId\" from \"Memberships\")"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.SubscriptionItems": {
      "name": "SubscriptionItems",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "livemode": {
          "name": "livemode",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "subscription_id": {
          "name": "subscription_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "added_date": {
          "name": "added_date",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true
        },
        "variant_id": {
          "name": "variant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "unit_price": {
          "name": "unit_price",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "quantity": {
          "name": "quantity",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "SubscriptionItems_subscription_id_idx": {
          "name": "SubscriptionItems_subscription_id_idx",
          "columns": [
            {
              "expression": "subscription_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "SubscriptionItems_variant_id_idx": {
          "name": "SubscriptionItems_variant_id_idx",
          "columns": [
            {
              "expression": "variant_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "SubscriptionItems_subscription_id_Subscriptions_id_fk": {
          "name": "SubscriptionItems_subscription_id_Subscriptions_id_fk",
          "tableFrom": "SubscriptionItems",
          "tableTo": "Subscriptions",
          "columnsFrom": [
            "subscription_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "SubscriptionItems_variant_id_Variants_id_fk": {
          "name": "SubscriptionItems_variant_id_Variants_id_fk",
          "tableFrom": "SubscriptionItems",
          "tableTo": "Variants",
          "columnsFrom": [
            "variant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "SubscriptionItems_id_unique": {
          "name": "SubscriptionItems_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "id"
          ]
        }
      },
      "policies": {
        "Enable actions for own organizations via subscriptions": {
          "name": "Enable actions for own organizations via subscriptions",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ],
          "using": "\"subscriptionId\" in (select \"id\" from \"Subscriptions\")"
        },
        "Check mode": {
          "name": "Check mode",
          "as": "RESTRICTIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ],
          "using": "current_setting('app.livemode')::boolean = livemode"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.Subscriptions": {
      "name": "Subscriptions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "livemode": {
          "name": "livemode",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "customer_profile_id": {
          "name": "customer_profile_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "organization_id": {
          "name": "organization_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "SubscriptionStatus",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "defaultPaymentMethodId": {
          "name": "defaultPaymentMethodId",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "backupPaymentMethodId": {
          "name": "backupPaymentMethodId",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "stripeSetupIntentId": {
          "name": "stripeSetupIntentId",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "trialEnd": {
          "name": "trialEnd",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "currentBillingPeriodStart": {
          "name": "currentBillingPeriodStart",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true
        },
        "currentBillingPeriodEnd": {
          "name": "currentBillingPeriodEnd",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "canceledAt": {
          "name": "canceledAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "cancelScheduledAt": {
          "name": "cancelScheduledAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "variant_id": {
          "name": "variant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "interval": {
          "name": "interval",
          "type": "IntervalUnit",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "intervalCount": {
          "name": "intervalCount",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "billingCycleAnchorDate": {
          "name": "billingCycleAnchorDate",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "Subscriptions_customer_profile_id_idx": {
          "name": "Subscriptions_customer_profile_id_idx",
          "columns": [
            {
              "expression": "customer_profile_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "Subscriptions_variant_id_idx": {
          "name": "Subscriptions_variant_id_idx",
          "columns": [
            {
              "expression": "variant_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "Subscriptions_status_idx": {
          "name": "Subscriptions_status_idx",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "Subscriptions_stripeSetupIntentId_unique_idx": {
          "name": "Subscriptions_stripeSetupIntentId_unique_idx",
          "columns": [
            {
              "expression": "stripeSetupIntentId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "Subscriptions_customer_profile_id_customer_profiles_id_fk": {
          "name": "Subscriptions_customer_profile_id_customer_profiles_id_fk",
          "tableFrom": "Subscriptions",
          "tableTo": "customer_profiles",
          "columnsFrom": [
            "customer_profile_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "Subscriptions_organization_id_Organizations_id_fk": {
          "name": "Subscriptions_organization_id_Organizations_id_fk",
          "tableFrom": "Subscriptions",
          "tableTo": "Organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "Subscriptions_defaultPaymentMethodId_PaymentMethods_id_fk": {
          "name": "Subscriptions_defaultPaymentMethodId_PaymentMethods_id_fk",
          "tableFrom": "Subscriptions",
          "tableTo": "PaymentMethods",
          "columnsFrom": [
            "defaultPaymentMethodId"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "Subscriptions_backupPaymentMethodId_PaymentMethods_id_fk": {
          "name": "Subscriptions_backupPaymentMethodId_PaymentMethods_id_fk",
          "tableFrom": "Subscriptions",
          "tableTo": "PaymentMethods",
          "columnsFrom": [
            "backupPaymentMethodId"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "Subscriptions_variant_id_Variants_id_fk": {
          "name": "Subscriptions_variant_id_Variants_id_fk",
          "tableFrom": "Subscriptions",
          "tableTo": "Variants",
          "columnsFrom": [
            "variant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "Subscriptions_id_unique": {
          "name": "Subscriptions_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "id"
          ]
        }
      },
      "policies": {
        "Enable actions for own organizations via customer profiles": {
          "name": "Enable actions for own organizations via customer profiles",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ],
          "using": "\"customerProfileId\" in (select \"id\" from \"CustomerProfiles\")"
        },
        "Forbid deletion": {
          "name": "Forbid deletion",
          "as": "RESTRICTIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "false"
        },
        "Check mode": {
          "name": "Check mode",
          "as": "RESTRICTIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ],
          "using": "current_setting('app.livemode')::boolean = livemode"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.Users": {
      "name": "Users",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "Users_name_idx": {
          "name": "Users_name_idx",
          "columns": [
            {
              "expression": "name",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "Users_email_idx": {
          "name": "Users_email_idx",
          "columns": [
            {
              "expression": "email",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "Users_id_unique": {
          "name": "Users_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "id"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.Variants": {
      "name": "Variants",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "livemode": {
          "name": "livemode",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "intervalUnit": {
          "name": "intervalUnit",
          "type": "IntervalUnit",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "intervalCount": {
          "name": "intervalCount",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "priceType": {
          "name": "priceType",
          "type": "PriceType",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "trialPeriodDays": {
          "name": "trialPeriodDays",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "setupFeeAmount": {
          "name": "setupFeeAmount",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "isDefault": {
          "name": "isDefault",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "unitPrice": {
          "name": "unitPrice",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "ProductId": {
          "name": "ProductId",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "stripePriceId": {
          "name": "stripePriceId",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "active": {
          "name": "active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "currency": {
          "name": "currency",
          "type": "CurrencyCode",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "Variants_priceType_idx": {
          "name": "Variants_priceType_idx",
          "columns": [
            {
              "expression": "priceType",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "Variants_ProductId_idx": {
          "name": "Variants_ProductId_idx",
          "columns": [
            {
              "expression": "ProductId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "Variants_stripePriceId_unique_idx": {
          "name": "Variants_stripePriceId_unique_idx",
          "columns": [
            {
              "expression": "stripePriceId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "Variants_ProductId_Products_id_fk": {
          "name": "Variants_ProductId_Products_id_fk",
          "tableFrom": "Variants",
          "tableTo": "Products",
          "columnsFrom": [
            "ProductId"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "Variants_id_unique": {
          "name": "Variants_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "id"
          ]
        },
        "Variants_stripePriceId_unique": {
          "name": "Variants_stripePriceId_unique",
          "nullsNotDistinct": false,
          "columns": [
            "stripePriceId"
          ]
        }
      },
      "policies": {
        "Enable all for self organizations via products": {
          "name": "Enable all for self organizations via products",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ],
          "using": "\"ProductId\" in (select \"id\" from \"Products\")"
        },
        "Check mode": {
          "name": "Check mode",
          "as": "RESTRICTIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ],
          "using": "current_setting('app.livemode')::boolean = livemode"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    }
  },
  "enums": {},
  "schemas": {},
  "sequences": {},
  "roles": {},
  "policies": {},
  "views": {},
  "_meta": {
    "columns": {},
    "schemas": {},
    "tables": {}
  }
}