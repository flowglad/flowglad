{
  "id": "a8df9128-b780-4994-bf94-c7367aa02d7e",
  "prevId": "1de30f36-0031-4960-a65c-447f0433e6ad",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "public.api_keys": {
      "name": "api_keys",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by_commit": {
          "name": "created_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by_commit": {
          "name": "updated_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "livemode": {
          "name": "livemode",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "position": {
          "name": "position",
          "type": "bigserial",
          "primaryKey": false,
          "notNull": true
        },
        "organization_id": {
          "name": "organization_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "token": {
          "name": "token",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "active": {
          "name": "active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "unkey_id": {
          "name": "unkey_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "type": {
          "name": "type",
          "type": "apiKeyType",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "expires_at": {
          "name": "expires_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": false
        },
        "stack_auth_hosted_billing_user_id": {
          "name": "stack_auth_hosted_billing_user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "hash_text": {
          "name": "hash_text",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "api_keys_organization_id_idx": {
          "name": "api_keys_organization_id_idx",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "api_keys_organization_id_organizations_id_fk": {
          "name": "api_keys_organization_id_organizations_id_fk",
          "tableFrom": "api_keys",
          "columnsFrom": ["organization_id"],
          "tableTo": "organizations",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "api_keys_id_unique": {
          "name": "api_keys_id_unique",
          "columns": ["id"],
          "nullsNotDistinct": false
        }
      },
      "policies": {
        "Enable all actions for own organizations": {
          "name": "Enable all actions for own organizations",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": ["merchant"],
          "using": "\"organization_id\" in (select \"organization_id\" from \"memberships\")"
        },
        "Check mode (api_keys)": {
          "name": "Check mode (api_keys)",
          "as": "RESTRICTIVE",
          "for": "ALL",
          "to": ["merchant"],
          "using": "current_setting('app.livemode')::boolean = livemode"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.better_auth_account": {
      "name": "better_auth_account",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "account_id": {
          "name": "account_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "provider_id": {
          "name": "provider_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "access_token": {
          "name": "access_token",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "refresh_token": {
          "name": "refresh_token",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "id_token": {
          "name": "id_token",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "access_token_expires_at": {
          "name": "access_token_expires_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "refresh_token_expires_at": {
          "name": "refresh_token_expires_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "scope": {
          "name": "scope",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "password": {
          "name": "password",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {
        "better_auth_account_user_id_better_auth_user_id_fk": {
          "name": "better_auth_account_user_id_better_auth_user_id_fk",
          "tableFrom": "better_auth_account",
          "columnsFrom": ["user_id"],
          "tableTo": "better_auth_user",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.better_auth_session": {
      "name": "better_auth_session",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "expires_at": {
          "name": "expires_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true
        },
        "token": {
          "name": "token",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true
        },
        "ip_address": {
          "name": "ip_address",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "user_agent": {
          "name": "user_agent",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "user_id": {
          "name": "user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {
        "better_auth_session_user_id_better_auth_user_id_fk": {
          "name": "better_auth_session_user_id_better_auth_user_id_fk",
          "tableFrom": "better_auth_session",
          "columnsFrom": ["user_id"],
          "tableTo": "better_auth_user",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "better_auth_session_token_unique": {
          "name": "better_auth_session_token_unique",
          "columns": ["token"],
          "nullsNotDistinct": false
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.better_auth_user": {
      "name": "better_auth_user",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "role": {
          "name": "role",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'user'"
        },
        "email_verified": {
          "name": "email_verified",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "image": {
          "name": "image",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "banned": {
          "name": "banned",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "better_auth_user_email_unique": {
          "name": "better_auth_user_email_unique",
          "columns": ["email"],
          "nullsNotDistinct": false
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.better_auth_verification": {
      "name": "better_auth_verification",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "identifier": {
          "name": "identifier",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "value": {
          "name": "value",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "expires_at": {
          "name": "expires_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.billing_period_items": {
      "name": "billing_period_items",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by_commit": {
          "name": "created_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by_commit": {
          "name": "updated_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "livemode": {
          "name": "livemode",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "position": {
          "name": "position",
          "type": "bigserial",
          "primaryKey": false,
          "notNull": true
        },
        "billing_period_id": {
          "name": "billing_period_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "quantity": {
          "name": "quantity",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "unit_price": {
          "name": "unit_price",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "discount_redemption_id": {
          "name": "discount_redemption_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "type": {
          "name": "type",
          "type": "SubscriptionItemType",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "billing_period_items_billing_period_id_idx": {
          "name": "billing_period_items_billing_period_id_idx",
          "columns": [
            {
              "expression": "billing_period_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "billing_period_items_discount_redemption_id_idx": {
          "name": "billing_period_items_discount_redemption_id_idx",
          "columns": [
            {
              "expression": "discount_redemption_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "billing_period_items_billing_period_id_billing_periods_id_fk": {
          "name": "billing_period_items_billing_period_id_billing_periods_id_fk",
          "tableFrom": "billing_period_items",
          "columnsFrom": ["billing_period_id"],
          "tableTo": "billing_periods",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "billing_period_items_discount_redemption_id_discount_redemptions_id_fk": {
          "name": "billing_period_items_discount_redemption_id_discount_redemptions_id_fk",
          "tableFrom": "billing_period_items",
          "columnsFrom": ["discount_redemption_id"],
          "tableTo": "discount_redemptions",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "billing_period_items_id_unique": {
          "name": "billing_period_items_id_unique",
          "columns": ["id"],
          "nullsNotDistinct": false
        }
      },
      "policies": {
        "Enable read for own organizations (billing_period_items)": {
          "name": "Enable read for own organizations (billing_period_items)",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": ["merchant"],
          "using": "\"billing_period_id\" in (select \"id\" from \"billing_periods\" where \"subscription_id\" in (select \"id\" from \"subscriptions\" where \"organization_id\" in (select \"organization_id\" from \"memberships\")))"
        },
        "Check mode (billing_period_items)": {
          "name": "Check mode (billing_period_items)",
          "as": "RESTRICTIVE",
          "for": "ALL",
          "to": ["merchant"],
          "using": "current_setting('app.livemode')::boolean = livemode"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.billing_periods": {
      "name": "billing_periods",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by_commit": {
          "name": "created_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by_commit": {
          "name": "updated_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "livemode": {
          "name": "livemode",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "position": {
          "name": "position",
          "type": "bigserial",
          "primaryKey": false,
          "notNull": true
        },
        "subscription_id": {
          "name": "subscription_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "start_date": {
          "name": "start_date",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true
        },
        "end_date": {
          "name": "end_date",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "BillingPeriodStatus",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "trial_period": {
          "name": "trial_period",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "prorated_period": {
          "name": "prorated_period",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        }
      },
      "indexes": {
        "billing_periods_subscription_id_idx": {
          "name": "billing_periods_subscription_id_idx",
          "columns": [
            {
              "expression": "subscription_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "billing_periods_status_idx": {
          "name": "billing_periods_status_idx",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "billing_periods_subscription_id_subscriptions_id_fk": {
          "name": "billing_periods_subscription_id_subscriptions_id_fk",
          "tableFrom": "billing_periods",
          "columnsFrom": ["subscription_id"],
          "tableTo": "subscriptions",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "billing_periods_id_unique": {
          "name": "billing_periods_id_unique",
          "columns": ["id"],
          "nullsNotDistinct": false
        }
      },
      "policies": {
        "Enable read for own organizations (billing_periods)": {
          "name": "Enable read for own organizations (billing_periods)",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": ["merchant"],
          "using": "\"subscription_id\" in (select \"id\" from \"subscriptions\" where \"organization_id\" in (select \"organization_id\" from \"memberships\"))"
        },
        "Check mode (billing_periods)": {
          "name": "Check mode (billing_periods)",
          "as": "RESTRICTIVE",
          "for": "ALL",
          "to": ["merchant"],
          "using": "current_setting('app.livemode')::boolean = livemode"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.billing_runs": {
      "name": "billing_runs",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by_commit": {
          "name": "created_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by_commit": {
          "name": "updated_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "livemode": {
          "name": "livemode",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "position": {
          "name": "position",
          "type": "bigserial",
          "primaryKey": false,
          "notNull": true
        },
        "billing_period_id": {
          "name": "billing_period_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "scheduled_for": {
          "name": "scheduled_for",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true
        },
        "started_at": {
          "name": "started_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": false
        },
        "completed_at": {
          "name": "completed_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "BillingRunStatus",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "stripe_payment_intent_id": {
          "name": "stripe_payment_intent_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "attempt_number": {
          "name": "attempt_number",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "error_details": {
          "name": "error_details",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "subscription_id": {
          "name": "subscription_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "payment_method_id": {
          "name": "payment_method_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "last_stripe_payment_intent_event_timestamp": {
          "name": "last_stripe_payment_intent_event_timestamp",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": false
        },
        "is_adjustment": {
          "name": "is_adjustment",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        }
      },
      "indexes": {
        "billing_runs_billing_period_id_idx": {
          "name": "billing_runs_billing_period_id_idx",
          "columns": [
            {
              "expression": "billing_period_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "billing_runs_status_idx": {
          "name": "billing_runs_status_idx",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "billing_runs_billing_period_id_billing_periods_id_fk": {
          "name": "billing_runs_billing_period_id_billing_periods_id_fk",
          "tableFrom": "billing_runs",
          "columnsFrom": ["billing_period_id"],
          "tableTo": "billing_periods",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "billing_runs_subscription_id_subscriptions_id_fk": {
          "name": "billing_runs_subscription_id_subscriptions_id_fk",
          "tableFrom": "billing_runs",
          "columnsFrom": ["subscription_id"],
          "tableTo": "subscriptions",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "billing_runs_payment_method_id_payment_methods_id_fk": {
          "name": "billing_runs_payment_method_id_payment_methods_id_fk",
          "tableFrom": "billing_runs",
          "columnsFrom": ["payment_method_id"],
          "tableTo": "payment_methods",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "billing_runs_id_unique": {
          "name": "billing_runs_id_unique",
          "columns": ["id"],
          "nullsNotDistinct": false
        }
      },
      "policies": {
        "Enable read for own organizations (billing_runs)": {
          "name": "Enable read for own organizations (billing_runs)",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": ["merchant"],
          "using": "\"billing_period_id\" in (select \"id\" from \"billing_periods\" where \"subscription_id\" in (select \"id\" from \"subscriptions\" where \"organization_id\" in (select \"organization_id\" from \"memberships\")))"
        },
        "Check mode (billing_runs)": {
          "name": "Check mode (billing_runs)",
          "as": "RESTRICTIVE",
          "for": "ALL",
          "to": ["merchant"],
          "using": "current_setting('app.livemode')::boolean = livemode"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.checkout_sessions": {
      "name": "checkout_sessions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by_commit": {
          "name": "created_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by_commit": {
          "name": "updated_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "livemode": {
          "name": "livemode",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "position": {
          "name": "position",
          "type": "bigserial",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "CheckoutSessionStatus",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "billing_address": {
          "name": "billing_address",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "price_id": {
          "name": "price_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "purchase_id": {
          "name": "purchase_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "invoice_id": {
          "name": "invoice_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "quantity": {
          "name": "quantity",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "organization_id": {
          "name": "organization_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "customer_name": {
          "name": "customer_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "customer_email": {
          "name": "customer_email",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "stripe_setup_intent_id": {
          "name": "stripe_setup_intent_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "stripe_payment_intent_id": {
          "name": "stripe_payment_intent_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "customer_id": {
          "name": "customer_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "expires": {
          "name": "expires",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true
        },
        "payment_method_type": {
          "name": "payment_method_type",
          "type": "PaymentMethodType",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "discount_id": {
          "name": "discount_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "successUrl": {
          "name": "successUrl",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "cancelUrl": {
          "name": "cancelUrl",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "type": {
          "name": "type",
          "type": "CheckoutSessionType",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "preserve_billing_cycle_anchor": {
          "name": "preserve_billing_cycle_anchor",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "output_metadata": {
          "name": "output_metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "output_name": {
          "name": "output_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "target_subscription_id": {
          "name": "target_subscription_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "automatically_update_subscriptions": {
          "name": "automatically_update_subscriptions",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "checkout_sessions_price_id_idx": {
          "name": "checkout_sessions_price_id_idx",
          "columns": [
            {
              "expression": "price_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "checkout_sessions_stripe_payment_intent_id_idx": {
          "name": "checkout_sessions_stripe_payment_intent_id_idx",
          "columns": [
            {
              "expression": "stripe_payment_intent_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "checkout_sessions_organization_id_idx": {
          "name": "checkout_sessions_organization_id_idx",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "checkout_sessions_status_idx": {
          "name": "checkout_sessions_status_idx",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "checkout_sessions_stripe_setup_intent_id_idx": {
          "name": "checkout_sessions_stripe_setup_intent_id_idx",
          "columns": [
            {
              "expression": "stripe_setup_intent_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "checkout_sessions_purchase_id_idx": {
          "name": "checkout_sessions_purchase_id_idx",
          "columns": [
            {
              "expression": "purchase_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "checkout_sessions_discount_id_idx": {
          "name": "checkout_sessions_discount_id_idx",
          "columns": [
            {
              "expression": "discount_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "checkout_sessions_customer_id_idx": {
          "name": "checkout_sessions_customer_id_idx",
          "columns": [
            {
              "expression": "customer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "checkout_sessions_price_id_prices_id_fk": {
          "name": "checkout_sessions_price_id_prices_id_fk",
          "tableFrom": "checkout_sessions",
          "columnsFrom": ["price_id"],
          "tableTo": "prices",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "checkout_sessions_purchase_id_purchases_id_fk": {
          "name": "checkout_sessions_purchase_id_purchases_id_fk",
          "tableFrom": "checkout_sessions",
          "columnsFrom": ["purchase_id"],
          "tableTo": "purchases",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "checkout_sessions_invoice_id_invoices_id_fk": {
          "name": "checkout_sessions_invoice_id_invoices_id_fk",
          "tableFrom": "checkout_sessions",
          "columnsFrom": ["invoice_id"],
          "tableTo": "invoices",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "checkout_sessions_organization_id_organizations_id_fk": {
          "name": "checkout_sessions_organization_id_organizations_id_fk",
          "tableFrom": "checkout_sessions",
          "columnsFrom": ["organization_id"],
          "tableTo": "organizations",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "checkout_sessions_customer_id_customers_id_fk": {
          "name": "checkout_sessions_customer_id_customers_id_fk",
          "tableFrom": "checkout_sessions",
          "columnsFrom": ["customer_id"],
          "tableTo": "customers",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "checkout_sessions_discount_id_discounts_id_fk": {
          "name": "checkout_sessions_discount_id_discounts_id_fk",
          "tableFrom": "checkout_sessions",
          "columnsFrom": ["discount_id"],
          "tableTo": "discounts",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "checkout_sessions_id_unique": {
          "name": "checkout_sessions_id_unique",
          "columns": ["id"],
          "nullsNotDistinct": false
        }
      },
      "policies": {
        "Enable all actions for discounts in own organization": {
          "name": "Enable all actions for discounts in own organization",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": ["merchant"],
          "using": "\"organization_id\" in (select \"organization_id\" from \"memberships\")"
        },
        "Enable select for customer": {
          "name": "Enable select for customer",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["customer"],
          "using": "\"customer_id\" in (select id from \"customers\") and \"organization_id\" = current_organization_id()"
        },
        "Check mode (checkout_sessions)": {
          "name": "Check mode (checkout_sessions)",
          "as": "RESTRICTIVE",
          "for": "ALL",
          "to": ["merchant"],
          "using": "current_setting('app.livemode')::boolean = livemode"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.countries": {
      "name": "countries",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by_commit": {
          "name": "created_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by_commit": {
          "name": "updated_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "position": {
          "name": "position",
          "type": "bigserial",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "code": {
          "name": "code",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "countries_name_unique_idx": {
          "name": "countries_name_unique_idx",
          "columns": [
            {
              "expression": "name",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "countries_code_unique_idx": {
          "name": "countries_code_unique_idx",
          "columns": [
            {
              "expression": "code",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "countries_id_unique": {
          "name": "countries_id_unique",
          "columns": ["id"],
          "nullsNotDistinct": false
        },
        "countries_name_unique": {
          "name": "countries_name_unique",
          "columns": ["name"],
          "nullsNotDistinct": false
        },
        "countries_code_unique": {
          "name": "countries_code_unique",
          "columns": ["code"],
          "nullsNotDistinct": false
        }
      },
      "policies": {
        "Enable read": {
          "name": "Enable read",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["merchant"],
          "using": "true"
        },
        "Enable read for customers (countries)": {
          "name": "Enable read for customers (countries)",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["customer"],
          "using": "true"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.customers": {
      "name": "customers",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by_commit": {
          "name": "created_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by_commit": {
          "name": "updated_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "livemode": {
          "name": "livemode",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "position": {
          "name": "position",
          "type": "bigserial",
          "primaryKey": false,
          "notNull": true
        },
        "organization_id": {
          "name": "organization_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "invoice_number_base": {
          "name": "invoice_number_base",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "archived": {
          "name": "archived",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "stripe_customer_id": {
          "name": "stripe_customer_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "tax_id": {
          "name": "tax_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "logo_url": {
          "name": "logo_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "icon_url": {
          "name": "icon_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "domain": {
          "name": "domain",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "billing_address": {
          "name": "billing_address",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "external_id": {
          "name": "external_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "pricing_model_id": {
          "name": "pricing_model_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "stack_auth_hosted_billing_user_id": {
          "name": "stack_auth_hosted_billing_user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "customers_organization_id_idx": {
          "name": "customers_organization_id_idx",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "customers_email_organization_id_livemode_idx": {
          "name": "customers_email_organization_id_livemode_idx",
          "columns": [
            {
              "expression": "email",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "livemode",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "customers_user_id_idx": {
          "name": "customers_user_id_idx",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "customers_pricing_model_id_idx": {
          "name": "customers_pricing_model_id_idx",
          "columns": [
            {
              "expression": "pricing_model_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "customers_organization_id_external_id_livemode_unique_idx": {
          "name": "customers_organization_id_external_id_livemode_unique_idx",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "external_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "livemode",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "customers_organization_id_invoice_number_base_livemode_unique_idx": {
          "name": "customers_organization_id_invoice_number_base_livemode_unique_idx",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "invoice_number_base",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "livemode",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "customers_stripe_customer_id_unique_idx": {
          "name": "customers_stripe_customer_id_unique_idx",
          "columns": [
            {
              "expression": "stripe_customer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "customers_email_idx": {
          "name": "customers_email_idx",
          "columns": [
            {
              "expression": "to_tsvector('english', \"email\")",
              "isExpression": true,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "gin",
          "concurrently": false
        },
        "customers_name_idx": {
          "name": "customers_name_idx",
          "columns": [
            {
              "expression": "to_tsvector('english', \"name\")",
              "isExpression": true,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "gin",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "customers_organization_id_organizations_id_fk": {
          "name": "customers_organization_id_organizations_id_fk",
          "tableFrom": "customers",
          "columnsFrom": ["organization_id"],
          "tableTo": "organizations",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "customers_user_id_users_id_fk": {
          "name": "customers_user_id_users_id_fk",
          "tableFrom": "customers",
          "columnsFrom": ["user_id"],
          "tableTo": "users",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "customers_pricing_model_id_pricing_models_id_fk": {
          "name": "customers_pricing_model_id_pricing_models_id_fk",
          "tableFrom": "customers",
          "columnsFrom": ["pricing_model_id"],
          "tableTo": "pricing_models",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "customers_id_unique": {
          "name": "customers_id_unique",
          "columns": ["id"],
          "nullsNotDistinct": false
        }
      },
      "policies": {
        "Enable all actions for own organizations": {
          "name": "Enable all actions for own organizations",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": ["merchant"],
          "using": "\"organization_id\" in (select \"organization_id\" from \"memberships\")"
        },
        "Enable read for customers (customers)": {
          "name": "Enable read for customers (customers)",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["customer"],
          "using": "\"user_id\" = requesting_user_id() AND \"organization_id\" = current_organization_id()"
        },
        "Disallow deletion": {
          "name": "Disallow deletion",
          "as": "RESTRICTIVE",
          "for": "DELETE",
          "to": ["merchant"],
          "using": "false"
        },
        "Check mode (customers)": {
          "name": "Check mode (customers)",
          "as": "RESTRICTIVE",
          "for": "ALL",
          "to": ["merchant"],
          "using": "current_setting('app.livemode')::boolean = livemode"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.discount_redemptions": {
      "name": "discount_redemptions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by_commit": {
          "name": "created_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by_commit": {
          "name": "updated_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "livemode": {
          "name": "livemode",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "position": {
          "name": "position",
          "type": "bigserial",
          "primaryKey": false,
          "notNull": true
        },
        "discount_id": {
          "name": "discount_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "purchase_id": {
          "name": "purchase_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "discount_name": {
          "name": "discount_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "discount_code": {
          "name": "discount_code",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "discount_amount": {
          "name": "discount_amount",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "discount_amount_type": {
          "name": "discount_amount_type",
          "type": "DiscountAmountType",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "duration": {
          "name": "duration",
          "type": "DiscountDuration",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "subscription_id": {
          "name": "subscription_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "number_of_payments": {
          "name": "number_of_payments",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "fully_redeemed": {
          "name": "fully_redeemed",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        }
      },
      "indexes": {
        "discount_redemptions_discount_id_idx": {
          "name": "discount_redemptions_discount_id_idx",
          "columns": [
            {
              "expression": "discount_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "discount_redemptions_purchase_id_idx": {
          "name": "discount_redemptions_purchase_id_idx",
          "columns": [
            {
              "expression": "purchase_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "discount_redemptions_purchase_id_unique_idx": {
          "name": "discount_redemptions_purchase_id_unique_idx",
          "columns": [
            {
              "expression": "purchase_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "discount_redemptions_subscription_id_idx": {
          "name": "discount_redemptions_subscription_id_idx",
          "columns": [
            {
              "expression": "subscription_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "discount_redemptions_discount_id_discounts_id_fk": {
          "name": "discount_redemptions_discount_id_discounts_id_fk",
          "tableFrom": "discount_redemptions",
          "columnsFrom": ["discount_id"],
          "tableTo": "discounts",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "discount_redemptions_purchase_id_purchases_id_fk": {
          "name": "discount_redemptions_purchase_id_purchases_id_fk",
          "tableFrom": "discount_redemptions",
          "columnsFrom": ["purchase_id"],
          "tableTo": "purchases",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "discount_redemptions_subscription_id_subscriptions_id_fk": {
          "name": "discount_redemptions_subscription_id_subscriptions_id_fk",
          "tableFrom": "discount_redemptions",
          "columnsFrom": ["subscription_id"],
          "tableTo": "subscriptions",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "discount_redemptions_id_unique": {
          "name": "discount_redemptions_id_unique",
          "columns": ["id"],
          "nullsNotDistinct": false
        }
      },
      "policies": {
        "Check mode (discount_redemptions)": {
          "name": "Check mode (discount_redemptions)",
          "as": "RESTRICTIVE",
          "for": "ALL",
          "to": ["merchant"],
          "using": "current_setting('app.livemode')::boolean = livemode"
        },
        "Enable read for customers (discount_redemptions)": {
          "name": "Enable read for customers (discount_redemptions)",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["customer"],
          "using": "\"subscription_id\" in (select \"id\" from \"subscriptions\")"
        },
        "Enable read for own organizations (discount_redemptions)": {
          "name": "Enable read for own organizations (discount_redemptions)",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": ["merchant"],
          "using": "\"discountId\" in (select \"discountId\" from \"Discounts\" where \"organization_id\" in (select \"organization_id\" from \"memberships\"))"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.discounts": {
      "name": "discounts",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by_commit": {
          "name": "created_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by_commit": {
          "name": "updated_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "livemode": {
          "name": "livemode",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "position": {
          "name": "position",
          "type": "bigserial",
          "primaryKey": false,
          "notNull": true
        },
        "organization_id": {
          "name": "organization_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "code": {
          "name": "code",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "amount": {
          "name": "amount",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "amount_type": {
          "name": "amount_type",
          "type": "DiscountAmountType",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "active": {
          "name": "active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "duration": {
          "name": "duration",
          "type": "DiscountDuration",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "number_of_payments": {
          "name": "number_of_payments",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "discounts_organization_id_idx": {
          "name": "discounts_organization_id_idx",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "discounts_code_idx": {
          "name": "discounts_code_idx",
          "columns": [
            {
              "expression": "code",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "discounts_code_organization_id_livemode_unique_idx": {
          "name": "discounts_code_organization_id_livemode_unique_idx",
          "columns": [
            {
              "expression": "code",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "livemode",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "discounts_organization_id_organizations_id_fk": {
          "name": "discounts_organization_id_organizations_id_fk",
          "tableFrom": "discounts",
          "columnsFrom": ["organization_id"],
          "tableTo": "organizations",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "discounts_id_unique": {
          "name": "discounts_id_unique",
          "columns": ["id"],
          "nullsNotDistinct": false
        }
      },
      "policies": {
        "Check mode (discounts)": {
          "name": "Check mode (discounts)",
          "as": "RESTRICTIVE",
          "for": "ALL",
          "to": ["merchant"],
          "using": "current_setting('app.livemode')::boolean = livemode"
        },
        "Enable read for customers (discounts)": {
          "name": "Enable read for customers (discounts)",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["customer"],
          "using": "\"organization_id\" = current_organization_id() and \"active\" = true"
        },
        "Enable all actions for discounts in own organization": {
          "name": "Enable all actions for discounts in own organization",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": ["merchant"],
          "using": "\"organization_id\" in (select \"organization_id\" from \"memberships\")"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.events": {
      "name": "events",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by_commit": {
          "name": "created_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by_commit": {
          "name": "updated_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "livemode": {
          "name": "livemode",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "position": {
          "name": "position",
          "type": "bigserial",
          "primaryKey": false,
          "notNull": true
        },
        "type": {
          "name": "type",
          "type": "FlowgladEventType",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "payload": {
          "name": "payload",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "occurred_at": {
          "name": "occurred_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true
        },
        "submitted_at": {
          "name": "submitted_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true
        },
        "processed_at": {
          "name": "processed_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": false
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "object_entity": {
          "name": "object_entity",
          "type": "EventNoun",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "object_id": {
          "name": "object_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "hash": {
          "name": "hash",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "organization_id": {
          "name": "organization_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "events_type_idx": {
          "name": "events_type_idx",
          "columns": [
            {
              "expression": "type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "events_object_entity_idx": {
          "name": "events_object_entity_idx",
          "columns": [
            {
              "expression": "object_entity",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "events_object_entity_object_id_idx": {
          "name": "events_object_entity_object_id_idx",
          "columns": [
            {
              "expression": "object_entity",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "object_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "events_hash_unique_idx": {
          "name": "events_hash_unique_idx",
          "columns": [
            {
              "expression": "hash",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "events_organization_id_organizations_id_fk": {
          "name": "events_organization_id_organizations_id_fk",
          "tableFrom": "events",
          "columnsFrom": ["organization_id"],
          "tableTo": "organizations",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "events_id_unique": {
          "name": "events_id_unique",
          "columns": ["id"],
          "nullsNotDistinct": false
        },
        "events_hash_unique": {
          "name": "events_hash_unique",
          "columns": ["hash"],
          "nullsNotDistinct": false
        }
      },
      "policies": {
        "Check mode (events)": {
          "name": "Check mode (events)",
          "as": "RESTRICTIVE",
          "for": "ALL",
          "to": ["merchant"],
          "using": "current_setting('app.livemode')::boolean = livemode"
        },
        "Enable insert for own organizations": {
          "name": "Enable insert for own organizations",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["merchant"],
          "withCheck": "\"organization_id\" in (select \"organization_id\" from \"memberships\")"
        },
        "Enable all actions for own organization": {
          "name": "Enable all actions for own organization",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["merchant"],
          "using": "\"organization_id\" in (select \"organization_id\" from \"memberships\")"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.features": {
      "name": "features",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by_commit": {
          "name": "created_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by_commit": {
          "name": "updated_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "livemode": {
          "name": "livemode",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "position": {
          "name": "position",
          "type": "bigserial",
          "primaryKey": false,
          "notNull": true
        },
        "organization_id": {
          "name": "organization_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "type": {
          "name": "type",
          "type": "FeatureType",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "slug": {
          "name": "slug",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "amount": {
          "name": "amount",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "usage_meter_id": {
          "name": "usage_meter_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "renewal_frequency": {
          "name": "renewal_frequency",
          "type": "FeatureUsageGrantFrequency",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "pricing_model_id": {
          "name": "pricing_model_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "active": {
          "name": "active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        }
      },
      "indexes": {
        "features_organization_id_idx": {
          "name": "features_organization_id_idx",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "features_type_idx": {
          "name": "features_type_idx",
          "columns": [
            {
              "expression": "type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "features_organization_id_slug_pricing_model_id_unique_idx": {
          "name": "features_organization_id_slug_pricing_model_id_unique_idx",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "slug",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "pricing_model_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "features_pricing_model_id_idx": {
          "name": "features_pricing_model_id_idx",
          "columns": [
            {
              "expression": "pricing_model_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "features_organization_id_organizations_id_fk": {
          "name": "features_organization_id_organizations_id_fk",
          "tableFrom": "features",
          "columnsFrom": ["organization_id"],
          "tableTo": "organizations",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "features_usage_meter_id_usage_meters_id_fk": {
          "name": "features_usage_meter_id_usage_meters_id_fk",
          "tableFrom": "features",
          "columnsFrom": ["usage_meter_id"],
          "tableTo": "usage_meters",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "features_pricing_model_id_pricing_models_id_fk": {
          "name": "features_pricing_model_id_pricing_models_id_fk",
          "tableFrom": "features",
          "columnsFrom": ["pricing_model_id"],
          "tableTo": "pricing_models",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "features_id_unique": {
          "name": "features_id_unique",
          "columns": ["id"],
          "nullsNotDistinct": false
        }
      },
      "policies": {
        "Enable read for own organizations (features)": {
          "name": "Enable read for own organizations (features)",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": ["merchant"],
          "using": "\"organization_id\" in (select \"organization_id\" from \"memberships\")"
        },
        "Enable read for customers (features)": {
          "name": "Enable read for customers (features)",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["customer"],
          "using": "\"organization_id\" = current_organization_id() and \"active\" = true"
        },
        "Check mode (features)": {
          "name": "Check mode (features)",
          "as": "RESTRICTIVE",
          "for": "ALL",
          "to": ["merchant"],
          "using": "current_setting('app.livemode')::boolean = livemode"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.fee_calculations": {
      "name": "fee_calculations",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by_commit": {
          "name": "created_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by_commit": {
          "name": "updated_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "livemode": {
          "name": "livemode",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "position": {
          "name": "position",
          "type": "bigserial",
          "primaryKey": false,
          "notNull": true
        },
        "organization_id": {
          "name": "organization_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "checkout_session_id": {
          "name": "checkout_session_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "purchase_id": {
          "name": "purchase_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "discount_id": {
          "name": "discount_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "price_id": {
          "name": "price_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "payment_method_type": {
          "name": "payment_method_type",
          "type": "PaymentMethodType",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "discount_amount_fixed": {
          "name": "discount_amount_fixed",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "payment_method_fee_fixed": {
          "name": "payment_method_fee_fixed",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "base_amount": {
          "name": "base_amount",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "international_fee_percentage": {
          "name": "international_fee_percentage",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "flowglad_fee_percentage": {
          "name": "flowglad_fee_percentage",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "mor_surcharge_percentage": {
          "name": "mor_surcharge_percentage",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'0'"
        },
        "billing_address": {
          "name": "billing_address",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "taxAmountFixed": {
          "name": "taxAmountFixed",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "pretaxTotal": {
          "name": "pretaxTotal",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "stripeTaxCalculationId": {
          "name": "stripeTaxCalculationId",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "stripeTaxTransactionId": {
          "name": "stripeTaxTransactionId",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "billing_period_id": {
          "name": "billing_period_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "currency": {
          "name": "currency",
          "type": "CurrencyCode",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "type": {
          "name": "type",
          "type": "FeeCalculationType",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "internalNotes": {
          "name": "internalNotes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "fee_calculations_organization_id_idx": {
          "name": "fee_calculations_organization_id_idx",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "fee_calculations_checkout_session_id_idx": {
          "name": "fee_calculations_checkout_session_id_idx",
          "columns": [
            {
              "expression": "checkout_session_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "fee_calculations_purchase_id_idx": {
          "name": "fee_calculations_purchase_id_idx",
          "columns": [
            {
              "expression": "purchase_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "fee_calculations_discount_id_idx": {
          "name": "fee_calculations_discount_id_idx",
          "columns": [
            {
              "expression": "discount_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "fee_calculations_organization_id_organizations_id_fk": {
          "name": "fee_calculations_organization_id_organizations_id_fk",
          "tableFrom": "fee_calculations",
          "columnsFrom": ["organization_id"],
          "tableTo": "organizations",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "fee_calculations_checkout_session_id_checkout_sessions_id_fk": {
          "name": "fee_calculations_checkout_session_id_checkout_sessions_id_fk",
          "tableFrom": "fee_calculations",
          "columnsFrom": ["checkout_session_id"],
          "tableTo": "checkout_sessions",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "fee_calculations_purchase_id_purchases_id_fk": {
          "name": "fee_calculations_purchase_id_purchases_id_fk",
          "tableFrom": "fee_calculations",
          "columnsFrom": ["purchase_id"],
          "tableTo": "purchases",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "fee_calculations_discount_id_discounts_id_fk": {
          "name": "fee_calculations_discount_id_discounts_id_fk",
          "tableFrom": "fee_calculations",
          "columnsFrom": ["discount_id"],
          "tableTo": "discounts",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "fee_calculations_price_id_prices_id_fk": {
          "name": "fee_calculations_price_id_prices_id_fk",
          "tableFrom": "fee_calculations",
          "columnsFrom": ["price_id"],
          "tableTo": "prices",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "fee_calculations_billing_period_id_billing_periods_id_fk": {
          "name": "fee_calculations_billing_period_id_billing_periods_id_fk",
          "tableFrom": "fee_calculations",
          "columnsFrom": ["billing_period_id"],
          "tableTo": "billing_periods",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "fee_calculations_id_unique": {
          "name": "fee_calculations_id_unique",
          "columns": ["id"],
          "nullsNotDistinct": false
        }
      },
      "policies": {
        "Check mode (fee_calculations)": {
          "name": "Check mode (fee_calculations)",
          "as": "RESTRICTIVE",
          "for": "ALL",
          "to": ["merchant"],
          "using": "current_setting('app.livemode')::boolean = livemode"
        },
        "Enable select for own organization": {
          "name": "Enable select for own organization",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["merchant"],
          "using": "\"organization_id\" in (select \"organization_id\" from \"memberships\")"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.invoice_line_items": {
      "name": "invoice_line_items",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by_commit": {
          "name": "created_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by_commit": {
          "name": "updated_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "livemode": {
          "name": "livemode",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "position": {
          "name": "position",
          "type": "bigserial",
          "primaryKey": false,
          "notNull": true
        },
        "invoice_id": {
          "name": "invoice_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "quantity": {
          "name": "quantity",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "price_id": {
          "name": "price_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "price": {
          "name": "price",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "billing_run_id": {
          "name": "billing_run_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "ledger_account_id": {
          "name": "ledger_account_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "ledger_account_credit": {
          "name": "ledger_account_credit",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "type": {
          "name": "type",
          "type": "SubscriptionItemType",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "invoice_line_items_invoice_id_idx": {
          "name": "invoice_line_items_invoice_id_idx",
          "columns": [
            {
              "expression": "invoice_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "invoice_line_items_price_id_idx": {
          "name": "invoice_line_items_price_id_idx",
          "columns": [
            {
              "expression": "price_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "invoice_line_items_billing_run_id_idx": {
          "name": "invoice_line_items_billing_run_id_idx",
          "columns": [
            {
              "expression": "billing_run_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "invoice_line_items_ledger_account_id_idx": {
          "name": "invoice_line_items_ledger_account_id_idx",
          "columns": [
            {
              "expression": "ledger_account_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "invoice_line_items_invoice_id_invoices_id_fk": {
          "name": "invoice_line_items_invoice_id_invoices_id_fk",
          "tableFrom": "invoice_line_items",
          "columnsFrom": ["invoice_id"],
          "tableTo": "invoices",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "invoice_line_items_price_id_prices_id_fk": {
          "name": "invoice_line_items_price_id_prices_id_fk",
          "tableFrom": "invoice_line_items",
          "columnsFrom": ["price_id"],
          "tableTo": "prices",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "invoice_line_items_billing_run_id_billing_runs_id_fk": {
          "name": "invoice_line_items_billing_run_id_billing_runs_id_fk",
          "tableFrom": "invoice_line_items",
          "columnsFrom": ["billing_run_id"],
          "tableTo": "billing_runs",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "invoice_line_items_ledger_account_id_ledger_accounts_id_fk": {
          "name": "invoice_line_items_ledger_account_id_ledger_accounts_id_fk",
          "tableFrom": "invoice_line_items",
          "columnsFrom": ["ledger_account_id"],
          "tableTo": "ledger_accounts",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "invoice_line_items_id_unique": {
          "name": "invoice_line_items_id_unique",
          "columns": ["id"],
          "nullsNotDistinct": false
        }
      },
      "policies": {
        "Enable read for customers (invoice_line_items)": {
          "name": "Enable read for customers (invoice_line_items)",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["customer"],
          "using": "\"invoice_id\" in (select \"id\" from \"invoices\")"
        },
        "Check mode (invoice_line_items)": {
          "name": "Check mode (invoice_line_items)",
          "as": "RESTRICTIVE",
          "for": "ALL",
          "to": ["merchant"],
          "using": "current_setting('app.livemode')::boolean = livemode"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.invoices": {
      "name": "invoices",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by_commit": {
          "name": "created_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by_commit": {
          "name": "updated_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "livemode": {
          "name": "livemode",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "position": {
          "name": "position",
          "type": "bigserial",
          "primaryKey": false,
          "notNull": true
        },
        "purchase_id": {
          "name": "purchase_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "invoice_number": {
          "name": "invoice_number",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "invoice_date": {
          "name": "invoice_date",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "billing_period_id": {
          "name": "billing_period_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "due_date": {
          "name": "due_date",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": false
        },
        "stripe_payment_intent_id": {
          "name": "stripe_payment_intent_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "customer_id": {
          "name": "customer_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "organization_id": {
          "name": "organization_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "InvoiceStatus",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'draft'"
        },
        "subscription_id": {
          "name": "subscription_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "billing_run_id": {
          "name": "billing_run_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "billing_period_start_date": {
          "name": "billing_period_start_date",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": false
        },
        "billing_period_end_date": {
          "name": "billing_period_end_date",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": false
        },
        "owner_membership_id": {
          "name": "owner_membership_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "pdf_url": {
          "name": "pdf_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "receipt_pdf_url": {
          "name": "receipt_pdf_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "memo": {
          "name": "memo",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "bank_payment_only": {
          "name": "bank_payment_only",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "type": {
          "name": "type",
          "type": "InvoiceType",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "currency": {
          "name": "currency",
          "type": "CurrencyCode",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "tax_amount": {
          "name": "tax_amount",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "subtotal": {
          "name": "subtotal",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "stripe_tax_calculation_id": {
          "name": "stripe_tax_calculation_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "stripe_tax_transaction_id": {
          "name": "stripe_tax_transaction_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "tax_type": {
          "name": "tax_type",
          "type": "TaxType",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "tax_country": {
          "name": "tax_country",
          "type": "CountryCode",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "tax_state": {
          "name": "tax_state",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "tax_rate_percentage": {
          "name": "tax_rate_percentage",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "application_fee": {
          "name": "application_fee",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "invoices_invoice_number_unique_idx": {
          "name": "invoices_invoice_number_unique_idx",
          "columns": [
            {
              "expression": "invoice_number",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "invoices_purchase_id_idx": {
          "name": "invoices_purchase_id_idx",
          "columns": [
            {
              "expression": "purchase_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "invoices_status_idx": {
          "name": "invoices_status_idx",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "invoices_customer_id_idx": {
          "name": "invoices_customer_id_idx",
          "columns": [
            {
              "expression": "customer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "invoices_stripe_payment_intent_id_idx": {
          "name": "invoices_stripe_payment_intent_id_idx",
          "columns": [
            {
              "expression": "stripe_payment_intent_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "invoices_organization_id_idx": {
          "name": "invoices_organization_id_idx",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "invoices_billing_run_id_idx": {
          "name": "invoices_billing_run_id_idx",
          "columns": [
            {
              "expression": "billing_run_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "invoices_purchase_id_purchases_id_fk": {
          "name": "invoices_purchase_id_purchases_id_fk",
          "tableFrom": "invoices",
          "columnsFrom": ["purchase_id"],
          "tableTo": "purchases",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "invoices_billing_period_id_billing_periods_id_fk": {
          "name": "invoices_billing_period_id_billing_periods_id_fk",
          "tableFrom": "invoices",
          "columnsFrom": ["billing_period_id"],
          "tableTo": "billing_periods",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "invoices_customer_id_customers_id_fk": {
          "name": "invoices_customer_id_customers_id_fk",
          "tableFrom": "invoices",
          "columnsFrom": ["customer_id"],
          "tableTo": "customers",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "invoices_organization_id_organizations_id_fk": {
          "name": "invoices_organization_id_organizations_id_fk",
          "tableFrom": "invoices",
          "columnsFrom": ["organization_id"],
          "tableTo": "organizations",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "invoices_subscription_id_subscriptions_id_fk": {
          "name": "invoices_subscription_id_subscriptions_id_fk",
          "tableFrom": "invoices",
          "columnsFrom": ["subscription_id"],
          "tableTo": "subscriptions",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "invoices_billing_run_id_billing_runs_id_fk": {
          "name": "invoices_billing_run_id_billing_runs_id_fk",
          "tableFrom": "invoices",
          "columnsFrom": ["billing_run_id"],
          "tableTo": "billing_runs",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "invoices_owner_membership_id_memberships_id_fk": {
          "name": "invoices_owner_membership_id_memberships_id_fk",
          "tableFrom": "invoices",
          "columnsFrom": ["owner_membership_id"],
          "tableTo": "memberships",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "invoices_id_unique": {
          "name": "invoices_id_unique",
          "columns": ["id"],
          "nullsNotDistinct": false
        },
        "invoices_invoice_number_unique": {
          "name": "invoices_invoice_number_unique",
          "columns": ["invoice_number"],
          "nullsNotDistinct": false
        }
      },
      "policies": {
        "Check mode (invoices)": {
          "name": "Check mode (invoices)",
          "as": "RESTRICTIVE",
          "for": "ALL",
          "to": ["merchant"],
          "using": "current_setting('app.livemode')::boolean = livemode"
        },
        "Enable read for customers (invoices)": {
          "name": "Enable read for customers (invoices)",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["customer"],
          "using": "\"customer_id\" in (select \"id\" from \"customers\")"
        },
        "Enable read for own organizations (invoices)": {
          "name": "Enable read for own organizations (invoices)",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": ["merchant"],
          "using": "\"organization_id\" in (select \"organization_id\" from \"memberships\")"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.ledger_accounts": {
      "name": "ledger_accounts",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by_commit": {
          "name": "created_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by_commit": {
          "name": "updated_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "livemode": {
          "name": "livemode",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "position": {
          "name": "position",
          "type": "bigserial",
          "primaryKey": false,
          "notNull": true
        },
        "organization_id": {
          "name": "organization_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "subscription_id": {
          "name": "subscription_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "usage_meter_id": {
          "name": "usage_meter_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "normal_balance": {
          "name": "normal_balance",
          "type": "NormalBalanceType",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'credit'"
        },
        "posted_credits_sum": {
          "name": "posted_credits_sum",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'0'"
        },
        "posted_debits_sum": {
          "name": "posted_debits_sum",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'0'"
        },
        "pending_credits_sum": {
          "name": "pending_credits_sum",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'0'"
        },
        "pending_debits_sum": {
          "name": "pending_debits_sum",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'0'"
        },
        "version": {
          "name": "version",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "pricing_model_id": {
          "name": "pricing_model_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "ledger_accounts_organization_id_idx": {
          "name": "ledger_accounts_organization_id_idx",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "ledger_accounts_subscription_id_idx": {
          "name": "ledger_accounts_subscription_id_idx",
          "columns": [
            {
              "expression": "subscription_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "ledger_accounts_subscription_id_usage_meter_id_unique_idx": {
          "name": "ledger_accounts_subscription_id_usage_meter_id_unique_idx",
          "columns": [
            {
              "expression": "subscription_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "usage_meter_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "ledger_accounts_pricing_model_id_idx": {
          "name": "ledger_accounts_pricing_model_id_idx",
          "columns": [
            {
              "expression": "pricing_model_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "ledger_accounts_organization_id_organizations_id_fk": {
          "name": "ledger_accounts_organization_id_organizations_id_fk",
          "tableFrom": "ledger_accounts",
          "columnsFrom": ["organization_id"],
          "tableTo": "organizations",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "ledger_accounts_subscription_id_subscriptions_id_fk": {
          "name": "ledger_accounts_subscription_id_subscriptions_id_fk",
          "tableFrom": "ledger_accounts",
          "columnsFrom": ["subscription_id"],
          "tableTo": "subscriptions",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "ledger_accounts_usage_meter_id_usage_meters_id_fk": {
          "name": "ledger_accounts_usage_meter_id_usage_meters_id_fk",
          "tableFrom": "ledger_accounts",
          "columnsFrom": ["usage_meter_id"],
          "tableTo": "usage_meters",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "ledger_accounts_pricing_model_id_pricing_models_id_fk": {
          "name": "ledger_accounts_pricing_model_id_pricing_models_id_fk",
          "tableFrom": "ledger_accounts",
          "columnsFrom": ["pricing_model_id"],
          "tableTo": "pricing_models",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "ledger_accounts_id_unique": {
          "name": "ledger_accounts_id_unique",
          "columns": ["id"],
          "nullsNotDistinct": false
        }
      },
      "policies": {
        "Enable read for own organizations (ledger_accounts)": {
          "name": "Enable read for own organizations (ledger_accounts)",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": ["merchant"],
          "using": "\"organization_id\" in (select \"organization_id\" from \"memberships\")"
        },
        "Check mode (ledger_accounts)": {
          "name": "Check mode (ledger_accounts)",
          "as": "RESTRICTIVE",
          "for": "ALL",
          "to": ["merchant"],
          "using": "current_setting('app.livemode')::boolean = livemode"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.ledger_entries": {
      "name": "ledger_entries",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by_commit": {
          "name": "created_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by_commit": {
          "name": "updated_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "livemode": {
          "name": "livemode",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "position": {
          "name": "position",
          "type": "bigserial",
          "primaryKey": false,
          "notNull": true
        },
        "ledger_account_id": {
          "name": "ledger_account_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "ledger_transaction_id": {
          "name": "ledger_transaction_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "subscription_id": {
          "name": "subscription_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "entry_timestamp": {
          "name": "entry_timestamp",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "status": {
          "name": "status",
          "type": "LedgerEntryStatus",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "direction": {
          "name": "direction",
          "type": "LedgerEntryDirection",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "entry_type": {
          "name": "entry_type",
          "type": "LedgerEntryType",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "amount": {
          "name": "amount",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "discarded_at": {
          "name": "discarded_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": false
        },
        "source_usage_event_id": {
          "name": "source_usage_event_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "source_usage_credit_id": {
          "name": "source_usage_credit_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "source_credit_application_id": {
          "name": "source_credit_application_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "source_credit_balance_adjustment_id": {
          "name": "source_credit_balance_adjustment_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "source_billing_period_calculation_id": {
          "name": "source_billing_period_calculation_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "source_refund_id": {
          "name": "source_refund_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "applied_to_ledger_item_id": {
          "name": "applied_to_ledger_item_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "billing_period_id": {
          "name": "billing_period_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "usage_meter_id": {
          "name": "usage_meter_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "expired_at": {
          "name": "expired_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": false
        },
        "expired_at_ledger_transaction_id": {
          "name": "expired_at_ledger_transaction_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "claimed_by_billing_run_id": {
          "name": "claimed_by_billing_run_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "organization_id": {
          "name": "organization_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "ledger_entries_subscription_id_entry_timestamp_idx": {
          "name": "ledger_entries_subscription_id_entry_timestamp_idx",
          "columns": [
            {
              "expression": "subscription_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "entry_timestamp",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "ledger_entries_ledger_account_id_idx": {
          "name": "ledger_entries_ledger_account_id_idx",
          "columns": [
            {
              "expression": "ledger_account_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "ledger_entries_entry_type_idx": {
          "name": "ledger_entries_entry_type_idx",
          "columns": [
            {
              "expression": "entry_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "ledger_entries_status_discarded_at_idx": {
          "name": "ledger_entries_status_discarded_at_idx",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "discarded_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "ledger_entries_ledger_transaction_id_idx": {
          "name": "ledger_entries_ledger_transaction_id_idx",
          "columns": [
            {
              "expression": "ledger_transaction_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "ledger_entries_source_usage_event_id_idx": {
          "name": "ledger_entries_source_usage_event_id_idx",
          "columns": [
            {
              "expression": "source_usage_event_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "ledger_entries_source_usage_credit_id_idx": {
          "name": "ledger_entries_source_usage_credit_id_idx",
          "columns": [
            {
              "expression": "source_usage_credit_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "ledger_entries_source_credit_application_id_idx": {
          "name": "ledger_entries_source_credit_application_id_idx",
          "columns": [
            {
              "expression": "source_credit_application_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "ledger_entries_source_credit_balance_adjustment_id_idx": {
          "name": "ledger_entries_source_credit_balance_adjustment_id_idx",
          "columns": [
            {
              "expression": "source_credit_balance_adjustment_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "ledger_entries_source_billing_period_calculation_id_idx": {
          "name": "ledger_entries_source_billing_period_calculation_id_idx",
          "columns": [
            {
              "expression": "source_billing_period_calculation_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "ledger_entries_applied_to_ledger_item_id_idx": {
          "name": "ledger_entries_applied_to_ledger_item_id_idx",
          "columns": [
            {
              "expression": "applied_to_ledger_item_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "ledger_entries_billing_period_id_idx": {
          "name": "ledger_entries_billing_period_id_idx",
          "columns": [
            {
              "expression": "billing_period_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "ledger_entries_usage_meter_id_idx": {
          "name": "ledger_entries_usage_meter_id_idx",
          "columns": [
            {
              "expression": "usage_meter_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "ledger_entries_claimed_by_billing_run_id_idx": {
          "name": "ledger_entries_claimed_by_billing_run_id_idx",
          "columns": [
            {
              "expression": "claimed_by_billing_run_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "ledger_entries_ledger_account_id_ledger_accounts_id_fk": {
          "name": "ledger_entries_ledger_account_id_ledger_accounts_id_fk",
          "tableFrom": "ledger_entries",
          "columnsFrom": ["ledger_account_id"],
          "tableTo": "ledger_accounts",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "ledger_entries_ledger_transaction_id_ledger_transactions_id_fk": {
          "name": "ledger_entries_ledger_transaction_id_ledger_transactions_id_fk",
          "tableFrom": "ledger_entries",
          "columnsFrom": ["ledger_transaction_id"],
          "tableTo": "ledger_transactions",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "ledger_entries_subscription_id_subscriptions_id_fk": {
          "name": "ledger_entries_subscription_id_subscriptions_id_fk",
          "tableFrom": "ledger_entries",
          "columnsFrom": ["subscription_id"],
          "tableTo": "subscriptions",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "ledger_entries_source_usage_event_id_usage_events_id_fk": {
          "name": "ledger_entries_source_usage_event_id_usage_events_id_fk",
          "tableFrom": "ledger_entries",
          "columnsFrom": ["source_usage_event_id"],
          "tableTo": "usage_events",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "ledger_entries_source_usage_credit_id_usage_credits_id_fk": {
          "name": "ledger_entries_source_usage_credit_id_usage_credits_id_fk",
          "tableFrom": "ledger_entries",
          "columnsFrom": ["source_usage_credit_id"],
          "tableTo": "usage_credits",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "ledger_entries_source_credit_application_id_usage_credit_applications_id_fk": {
          "name": "ledger_entries_source_credit_application_id_usage_credit_applications_id_fk",
          "tableFrom": "ledger_entries",
          "columnsFrom": ["source_credit_application_id"],
          "tableTo": "usage_credit_applications",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "ledger_entries_source_credit_balance_adjustment_id_usage_credit_balance_adjustments_id_fk": {
          "name": "ledger_entries_source_credit_balance_adjustment_id_usage_credit_balance_adjustments_id_fk",
          "tableFrom": "ledger_entries",
          "columnsFrom": ["source_credit_balance_adjustment_id"],
          "tableTo": "usage_credit_balance_adjustments",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "ledger_entries_source_refund_id_refunds_id_fk": {
          "name": "ledger_entries_source_refund_id_refunds_id_fk",
          "tableFrom": "ledger_entries",
          "columnsFrom": ["source_refund_id"],
          "tableTo": "refunds",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "ledger_entries_billing_period_id_billing_periods_id_fk": {
          "name": "ledger_entries_billing_period_id_billing_periods_id_fk",
          "tableFrom": "ledger_entries",
          "columnsFrom": ["billing_period_id"],
          "tableTo": "billing_periods",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "ledger_entries_usage_meter_id_usage_meters_id_fk": {
          "name": "ledger_entries_usage_meter_id_usage_meters_id_fk",
          "tableFrom": "ledger_entries",
          "columnsFrom": ["usage_meter_id"],
          "tableTo": "usage_meters",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "ledger_entries_expired_at_ledger_transaction_id_ledger_transactions_id_fk": {
          "name": "ledger_entries_expired_at_ledger_transaction_id_ledger_transactions_id_fk",
          "tableFrom": "ledger_entries",
          "columnsFrom": ["expired_at_ledger_transaction_id"],
          "tableTo": "ledger_transactions",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "ledger_entries_claimed_by_billing_run_id_billing_runs_id_fk": {
          "name": "ledger_entries_claimed_by_billing_run_id_billing_runs_id_fk",
          "tableFrom": "ledger_entries",
          "columnsFrom": ["claimed_by_billing_run_id"],
          "tableTo": "billing_runs",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "ledger_entries_organization_id_organizations_id_fk": {
          "name": "ledger_entries_organization_id_organizations_id_fk",
          "tableFrom": "ledger_entries",
          "columnsFrom": ["organization_id"],
          "tableTo": "organizations",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "ledger_entries_id_unique": {
          "name": "ledger_entries_id_unique",
          "columns": ["id"],
          "nullsNotDistinct": false
        }
      },
      "policies": {
        "Enable read for own organizations (ledger_entries)": {
          "name": "Enable read for own organizations (ledger_entries)",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": ["merchant"],
          "using": "\"organization_id\" in (select \"organization_id\" from \"memberships\")"
        },
        "Check mode (ledger_entries)": {
          "name": "Check mode (ledger_entries)",
          "as": "RESTRICTIVE",
          "for": "ALL",
          "to": ["merchant"],
          "using": "current_setting('app.livemode')::boolean = livemode"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.ledger_transactions": {
      "name": "ledger_transactions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by_commit": {
          "name": "created_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by_commit": {
          "name": "updated_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "livemode": {
          "name": "livemode",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "position": {
          "name": "position",
          "type": "bigserial",
          "primaryKey": false,
          "notNull": true
        },
        "organization_id": {
          "name": "organization_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "type": {
          "name": "type",
          "type": "LedgerTransactionType",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "initiating_source_type": {
          "name": "initiating_source_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "initiating_source_id": {
          "name": "initiating_source_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "subscription_id": {
          "name": "subscription_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "idempotency_key": {
          "name": "idempotency_key",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "ledger_transactions_initiating_source_type_initiating_source_id_idx": {
          "name": "ledger_transactions_initiating_source_type_initiating_source_id_idx",
          "columns": [
            {
              "expression": "initiating_source_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "initiating_source_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "ledger_transactions_subscription_id_idx": {
          "name": "ledger_transactions_subscription_id_idx",
          "columns": [
            {
              "expression": "subscription_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "ledger_transactions_organization_id_idx": {
          "name": "ledger_transactions_organization_id_idx",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "ledger_transactions_idempotency_key_subscription_id_unique_idx": {
          "name": "ledger_transactions_idempotency_key_subscription_id_unique_idx",
          "columns": [
            {
              "expression": "idempotency_key",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "subscription_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "ledger_transactions_type_initiating_source_type_initiating_source_id_livemode_organization_id_unique_idx": {
          "name": "ledger_transactions_type_initiating_source_type_initiating_source_id_livemode_organization_id_unique_idx",
          "columns": [
            {
              "expression": "type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "initiating_source_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "initiating_source_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "livemode",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "ledger_transactions_organization_id_organizations_id_fk": {
          "name": "ledger_transactions_organization_id_organizations_id_fk",
          "tableFrom": "ledger_transactions",
          "columnsFrom": ["organization_id"],
          "tableTo": "organizations",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "ledger_transactions_subscription_id_subscriptions_id_fk": {
          "name": "ledger_transactions_subscription_id_subscriptions_id_fk",
          "tableFrom": "ledger_transactions",
          "columnsFrom": ["subscription_id"],
          "tableTo": "subscriptions",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "ledger_transactions_id_unique": {
          "name": "ledger_transactions_id_unique",
          "columns": ["id"],
          "nullsNotDistinct": false
        }
      },
      "policies": {
        "Enable read for own organizations (ledger_transactions)": {
          "name": "Enable read for own organizations (ledger_transactions)",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": ["merchant"],
          "using": "\"organization_id\" in (select \"organization_id\" from \"memberships\")"
        },
        "Check mode (ledger_transactions)": {
          "name": "Check mode (ledger_transactions)",
          "as": "RESTRICTIVE",
          "for": "ALL",
          "to": ["merchant"],
          "using": "current_setting('app.livemode')::boolean = livemode"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.memberships": {
      "name": "memberships",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by_commit": {
          "name": "created_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by_commit": {
          "name": "updated_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "livemode": {
          "name": "livemode",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "position": {
          "name": "position",
          "type": "bigserial",
          "primaryKey": false,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "organization_id": {
          "name": "organization_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "focused": {
          "name": "focused",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        }
      },
      "indexes": {
        "memberships_user_id_idx": {
          "name": "memberships_user_id_idx",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "memberships_organization_id_idx": {
          "name": "memberships_organization_id_idx",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "memberships_user_id_focused_idx": {
          "name": "memberships_user_id_focused_idx",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "focused",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "memberships_user_id_organization_id_unique_idx": {
          "name": "memberships_user_id_organization_id_unique_idx",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "memberships_user_id_users_id_fk": {
          "name": "memberships_user_id_users_id_fk",
          "tableFrom": "memberships",
          "columnsFrom": ["user_id"],
          "tableTo": "users",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "memberships_organization_id_organizations_id_fk": {
          "name": "memberships_organization_id_organizations_id_fk",
          "tableFrom": "memberships",
          "columnsFrom": ["organization_id"],
          "tableTo": "organizations",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "memberships_id_unique": {
          "name": "memberships_id_unique",
          "columns": ["id"],
          "nullsNotDistinct": false
        }
      },
      "policies": {
        "Enable read for own organizations where focused is true": {
          "name": "Enable read for own organizations where focused is true",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["merchant"],
          "using": "\"user_id\" = requesting_user_id() AND \"organization_id\" = current_organization_id() AND (current_auth_type() = 'api_key' OR \"focused\" = true)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.organizations": {
      "name": "organizations",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by_commit": {
          "name": "created_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by_commit": {
          "name": "updated_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "position": {
          "name": "position",
          "type": "bigserial",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "stripe_account_id": {
          "name": "stripe_account_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "domain": {
          "name": "domain",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "country_id": {
          "name": "country_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "logo_url": {
          "name": "logo_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "tagline": {
          "name": "tagline",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "subdomain_slug": {
          "name": "subdomain_slug",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "payouts_enabled": {
          "name": "payouts_enabled",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "onboarding_status": {
          "name": "onboarding_status",
          "type": "BusinessOnboardingStatus",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "fee_percentage": {
          "name": "fee_percentage",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'0.65'"
        },
        "default_currency": {
          "name": "default_currency",
          "type": "CurrencyCode",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "billing_address": {
          "name": "billing_address",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "contact_email": {
          "name": "contact_email",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "stripe_connect_contract_type": {
          "name": "stripe_connect_contract_type",
          "type": "StripeConnectContractType",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'platform'"
        },
        "allow_multiple_subscriptions_per_customer": {
          "name": "allow_multiple_subscriptions_per_customer",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "feature_flags": {
          "name": "feature_flags",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "external_id": {
          "name": "external_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "security_salt": {
          "name": "security_salt",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "monthly_billing_volume_free_tier": {
          "name": "monthly_billing_volume_free_tier",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 100000
        },
        "upfront_processing_credits": {
          "name": "upfront_processing_credits",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "codebase_markdown_hash": {
          "name": "codebase_markdown_hash",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "organizations_name_idx": {
          "name": "organizations_name_idx",
          "columns": [
            {
              "expression": "name",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "organizations_stripe_account_id_unique_idx": {
          "name": "organizations_stripe_account_id_unique_idx",
          "columns": [
            {
              "expression": "stripe_account_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "organizations_domain_unique_idx": {
          "name": "organizations_domain_unique_idx",
          "columns": [
            {
              "expression": "domain",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "organizations_external_id_unique_idx": {
          "name": "organizations_external_id_unique_idx",
          "columns": [
            {
              "expression": "external_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "organizations_country_id_idx": {
          "name": "organizations_country_id_idx",
          "columns": [
            {
              "expression": "country_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "organizations_country_id_countries_id_fk": {
          "name": "organizations_country_id_countries_id_fk",
          "tableFrom": "organizations",
          "columnsFrom": ["country_id"],
          "tableTo": "countries",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "organizations_id_unique": {
          "name": "organizations_id_unique",
          "columns": ["id"],
          "nullsNotDistinct": false
        },
        "organizations_stripe_account_id_unique": {
          "name": "organizations_stripe_account_id_unique",
          "columns": ["stripe_account_id"],
          "nullsNotDistinct": false
        },
        "organizations_domain_unique": {
          "name": "organizations_domain_unique",
          "columns": ["domain"],
          "nullsNotDistinct": false
        },
        "organizations_subdomain_slug_unique": {
          "name": "organizations_subdomain_slug_unique",
          "columns": ["subdomain_slug"],
          "nullsNotDistinct": false
        },
        "organizations_external_id_unique": {
          "name": "organizations_external_id_unique",
          "columns": ["external_id"],
          "nullsNotDistinct": false
        }
      },
      "policies": {
        "Enable read for own organizations (organizations)": {
          "name": "Enable read for own organizations (organizations)",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["merchant"],
          "using": "id IN ( SELECT memberships.organization_id\n   FROM memberships\n  WHERE (memberships.user_id = requesting_user_id() and memberships.organization_id = current_organization_id()))"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.payment_methods": {
      "name": "payment_methods",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by_commit": {
          "name": "created_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by_commit": {
          "name": "updated_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "livemode": {
          "name": "livemode",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "position": {
          "name": "position",
          "type": "bigserial",
          "primaryKey": false,
          "notNull": true
        },
        "customer_id": {
          "name": "customer_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "billing_details": {
          "name": "billing_details",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "type": {
          "name": "type",
          "type": "PaymentMethodType",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "default": {
          "name": "default",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "payment_method_data": {
          "name": "payment_method_data",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "stripe_payment_method_id": {
          "name": "stripe_payment_method_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "external_id": {
          "name": "external_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "payment_methods_customer_id_idx": {
          "name": "payment_methods_customer_id_idx",
          "columns": [
            {
              "expression": "customer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "payment_methods_type_idx": {
          "name": "payment_methods_type_idx",
          "columns": [
            {
              "expression": "type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "payment_methods_external_id_unique_idx": {
          "name": "payment_methods_external_id_unique_idx",
          "columns": [
            {
              "expression": "external_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "payment_methods_customer_id_customers_id_fk": {
          "name": "payment_methods_customer_id_customers_id_fk",
          "tableFrom": "payment_methods",
          "columnsFrom": ["customer_id"],
          "tableTo": "customers",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "payment_methods_id_unique": {
          "name": "payment_methods_id_unique",
          "columns": ["id"],
          "nullsNotDistinct": false
        }
      },
      "policies": {
        "Enable read for customers (payment_methods)": {
          "name": "Enable read for customers (payment_methods)",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["customer"],
          "using": "\"customer_id\" in (select \"id\" from \"customers\")"
        },
        "Enable read for own organizations via customer": {
          "name": "Enable read for own organizations via customer",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": ["merchant"],
          "using": "\"customerId\" in (select \"id\" from \"customers\")"
        },
        "Check mode (payment_methods)": {
          "name": "Check mode (payment_methods)",
          "as": "RESTRICTIVE",
          "for": "ALL",
          "to": ["merchant"],
          "using": "current_setting('app.livemode')::boolean = livemode"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.payments": {
      "name": "payments",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by_commit": {
          "name": "created_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by_commit": {
          "name": "updated_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "livemode": {
          "name": "livemode",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "position": {
          "name": "position",
          "type": "bigserial",
          "primaryKey": false,
          "notNull": true
        },
        "invoice_id": {
          "name": "invoice_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "amount": {
          "name": "amount",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "payment_method": {
          "name": "payment_method",
          "type": "PaymentMethod",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "currency": {
          "name": "currency",
          "type": "Currency",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "PaymentStatus",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "charge_date": {
          "name": "charge_date",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true
        },
        "settlement_date": {
          "name": "settlement_date",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "receipt_number": {
          "name": "receipt_number",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "receipt_url": {
          "name": "receipt_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "organization_id": {
          "name": "organization_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "customer_id": {
          "name": "customer_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "purchase_id": {
          "name": "purchase_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "subscription_id": {
          "name": "subscription_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "payment_method_id": {
          "name": "payment_method_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "billing_period_id": {
          "name": "billing_period_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "stripe_payment_intent_id": {
          "name": "stripe_payment_intent_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "stripe_charge_id": {
          "name": "stripe_charge_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "tax_amount": {
          "name": "tax_amount",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "subtotal": {
          "name": "subtotal",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "stripe_tax_calculation_id": {
          "name": "stripe_tax_calculation_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "stripe_tax_transaction_id": {
          "name": "stripe_tax_transaction_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "tax_type": {
          "name": "tax_type",
          "type": "TaxType",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "tax_country": {
          "name": "tax_country",
          "type": "CountryCode",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "tax_state": {
          "name": "tax_state",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "tax_rate_percentage": {
          "name": "tax_rate_percentage",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "application_fee": {
          "name": "application_fee",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "refunded": {
          "name": "refunded",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "refunded_amount": {
          "name": "refunded_amount",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "refunded_at": {
          "name": "refunded_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": false
        },
        "failure_message": {
          "name": "failure_message",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "failure_code": {
          "name": "failure_code",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "payments_invoice_id_idx": {
          "name": "payments_invoice_id_idx",
          "columns": [
            {
              "expression": "invoice_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "payments_organization_id_idx": {
          "name": "payments_organization_id_idx",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "payments_payment_method_idx": {
          "name": "payments_payment_method_idx",
          "columns": [
            {
              "expression": "payment_method",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "payments_customer_id_idx": {
          "name": "payments_customer_id_idx",
          "columns": [
            {
              "expression": "customer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "payments_status_idx": {
          "name": "payments_status_idx",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "payments_currency_idx": {
          "name": "payments_currency_idx",
          "columns": [
            {
              "expression": "currency",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "payments_purchase_id_idx": {
          "name": "payments_purchase_id_idx",
          "columns": [
            {
              "expression": "purchase_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "payments_stripe_charge_id_unique_idx": {
          "name": "payments_stripe_charge_id_unique_idx",
          "columns": [
            {
              "expression": "stripe_charge_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "payments_subscription_id_idx": {
          "name": "payments_subscription_id_idx",
          "columns": [
            {
              "expression": "subscription_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "payments_invoice_id_invoices_id_fk": {
          "name": "payments_invoice_id_invoices_id_fk",
          "tableFrom": "payments",
          "columnsFrom": ["invoice_id"],
          "tableTo": "invoices",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "payments_organization_id_organizations_id_fk": {
          "name": "payments_organization_id_organizations_id_fk",
          "tableFrom": "payments",
          "columnsFrom": ["organization_id"],
          "tableTo": "organizations",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "payments_customer_id_customers_id_fk": {
          "name": "payments_customer_id_customers_id_fk",
          "tableFrom": "payments",
          "columnsFrom": ["customer_id"],
          "tableTo": "customers",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "payments_purchase_id_purchases_id_fk": {
          "name": "payments_purchase_id_purchases_id_fk",
          "tableFrom": "payments",
          "columnsFrom": ["purchase_id"],
          "tableTo": "purchases",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "payments_subscription_id_subscriptions_id_fk": {
          "name": "payments_subscription_id_subscriptions_id_fk",
          "tableFrom": "payments",
          "columnsFrom": ["subscription_id"],
          "tableTo": "subscriptions",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "payments_payment_method_id_payment_methods_id_fk": {
          "name": "payments_payment_method_id_payment_methods_id_fk",
          "tableFrom": "payments",
          "columnsFrom": ["payment_method_id"],
          "tableTo": "payment_methods",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "payments_billing_period_id_billing_periods_id_fk": {
          "name": "payments_billing_period_id_billing_periods_id_fk",
          "tableFrom": "payments",
          "columnsFrom": ["billing_period_id"],
          "tableTo": "billing_periods",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "payments_id_unique": {
          "name": "payments_id_unique",
          "columns": ["id"],
          "nullsNotDistinct": false
        }
      },
      "policies": {
        "Enable read for customers (payments)": {
          "name": "Enable read for customers (payments)",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["customer"],
          "using": "\"customer_id\" in (select \"id\" from \"customers\")"
        },
        "Enable select for own organization": {
          "name": "Enable select for own organization",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["merchant"],
          "using": "\"organization_id\" in (select \"organization_id\" from \"memberships\")"
        },
        "Enable update for own organization": {
          "name": "Enable update for own organization",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["merchant"],
          "using": "\"organization_id\" in (select \"organization_id\" from \"memberships\")"
        },
        "Check mode (payments)": {
          "name": "Check mode (payments)",
          "as": "RESTRICTIVE",
          "for": "ALL",
          "to": ["merchant"],
          "using": "current_setting('app.livemode')::boolean = livemode"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.prices": {
      "name": "prices",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by_commit": {
          "name": "created_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by_commit": {
          "name": "updated_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "livemode": {
          "name": "livemode",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "position": {
          "name": "position",
          "type": "bigserial",
          "primaryKey": false,
          "notNull": true
        },
        "interval_unit": {
          "name": "interval_unit",
          "type": "IntervalUnit",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "intervalCount": {
          "name": "intervalCount",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "type": {
          "name": "type",
          "type": "PriceType",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "trial_period_days": {
          "name": "trial_period_days",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "is_default": {
          "name": "is_default",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "unit_price": {
          "name": "unit_price",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "usage_events_per_unit": {
          "name": "usage_events_per_unit",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "product_id": {
          "name": "product_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "active": {
          "name": "active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "currency": {
          "name": "currency",
          "type": "CurrencyCode",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "external_id": {
          "name": "external_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "slug": {
          "name": "slug",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "usage_meter_id": {
          "name": "usage_meter_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "pricing_model_id": {
          "name": "pricing_model_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "prices_type_idx": {
          "name": "prices_type_idx",
          "columns": [
            {
              "expression": "type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "prices_product_id_idx": {
          "name": "prices_product_id_idx",
          "columns": [
            {
              "expression": "product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "prices_external_id_product_id_unique_idx": {
          "name": "prices_external_id_product_id_unique_idx",
          "columns": [
            {
              "expression": "external_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "prices_product_id_is_default_unique_idx": {
          "name": "prices_product_id_is_default_unique_idx",
          "columns": [
            {
              "expression": "product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "with": {},
          "method": "btree",
          "where": "\"prices\".\"is_default\"",
          "concurrently": false
        },
        "prices_usage_meter_id_idx": {
          "name": "prices_usage_meter_id_idx",
          "columns": [
            {
              "expression": "usage_meter_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "prices_pricing_model_id_idx": {
          "name": "prices_pricing_model_id_idx",
          "columns": [
            {
              "expression": "pricing_model_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "prices_product_id_products_id_fk": {
          "name": "prices_product_id_products_id_fk",
          "tableFrom": "prices",
          "columnsFrom": ["product_id"],
          "tableTo": "products",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "prices_usage_meter_id_usage_meters_id_fk": {
          "name": "prices_usage_meter_id_usage_meters_id_fk",
          "tableFrom": "prices",
          "columnsFrom": ["usage_meter_id"],
          "tableTo": "usage_meters",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "prices_pricing_model_id_pricing_models_id_fk": {
          "name": "prices_pricing_model_id_pricing_models_id_fk",
          "tableFrom": "prices",
          "columnsFrom": ["pricing_model_id"],
          "tableTo": "pricing_models",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "prices_id_unique": {
          "name": "prices_id_unique",
          "columns": ["id"],
          "nullsNotDistinct": false
        }
      },
      "policies": {
        "Enable read for customers (prices)": {
          "name": "Enable read for customers (prices)",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["customer"],
          "using": "\"product_id\" in (select \"id\" from \"products\") and \"active\" = true"
        },
        "On update, ensure usage meter belongs to same organization as product": {
          "name": "On update, ensure usage meter belongs to same organization as product",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["merchant"],
          "withCheck": "\"usage_meter_id\" IS NULL OR \"usage_meter_id\" IN (\n  SELECT \"id\" FROM \"usage_meters\"\n  WHERE \"usage_meters\".\"organization_id\" = (\n    SELECT \"organization_id\" FROM \"products\" \n    WHERE \"products\".\"id\" = \"prices\".\"product_id\"\n  )\n)"
        },
        "Ensure organization integrity with products parent table": {
          "name": "Ensure organization integrity with products parent table",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": ["merchant"],
          "using": "\"product_id\" in (select \"id\" from \"products\")"
        },
        "Check mode (prices)": {
          "name": "Check mode (prices)",
          "as": "RESTRICTIVE",
          "for": "ALL",
          "to": ["merchant"],
          "using": "current_setting('app.livemode')::boolean = livemode"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.pricing_models": {
      "name": "pricing_models",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by_commit": {
          "name": "created_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by_commit": {
          "name": "updated_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "livemode": {
          "name": "livemode",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "position": {
          "name": "position",
          "type": "bigserial",
          "primaryKey": false,
          "notNull": true
        },
        "organization_id": {
          "name": "organization_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "is_default": {
          "name": "is_default",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "integration_guide_hash": {
          "name": "integration_guide_hash",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "pricing_models_organization_id_idx": {
          "name": "pricing_models_organization_id_idx",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "pricing_models_name_idx": {
          "name": "pricing_models_name_idx",
          "columns": [
            {
              "expression": "name",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "pricing_models_organization_id_organizations_id_fk": {
          "name": "pricing_models_organization_id_organizations_id_fk",
          "tableFrom": "pricing_models",
          "columnsFrom": ["organization_id"],
          "tableTo": "organizations",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "pricing_models_id_unique": {
          "name": "pricing_models_id_unique",
          "columns": ["id"],
          "nullsNotDistinct": false
        }
      },
      "policies": {
        "Enable read for customers (pricing_models)": {
          "name": "Enable read for customers (pricing_models)",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["customer"],
          "using": "\"id\" in (select \"pricing_model_id\" from \"customers\") OR (\"is_default\" = true AND \"organization_id\" = current_organization_id())"
        },
        "Enable read for own organizations (pricing_models)": {
          "name": "Enable read for own organizations (pricing_models)",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": ["merchant"],
          "using": "\"organization_id\" in (select \"organization_id\" from \"memberships\")"
        },
        "Check mode (pricing_models)": {
          "name": "Check mode (pricing_models)",
          "as": "RESTRICTIVE",
          "for": "ALL",
          "to": ["merchant"],
          "using": "current_setting('app.livemode')::boolean = livemode"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.product_features": {
      "name": "product_features",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by_commit": {
          "name": "created_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by_commit": {
          "name": "updated_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "livemode": {
          "name": "livemode",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "position": {
          "name": "position",
          "type": "bigserial",
          "primaryKey": false,
          "notNull": true
        },
        "product_id": {
          "name": "product_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "feature_id": {
          "name": "feature_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "organization_id": {
          "name": "organization_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "expired_at": {
          "name": "expired_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": false
        },
        "pricing_model_id": {
          "name": "pricing_model_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "product_features_product_id_feature_id_unique_idx": {
          "name": "product_features_product_id_feature_id_unique_idx",
          "columns": [
            {
              "expression": "product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "feature_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "product_features_product_id_idx": {
          "name": "product_features_product_id_idx",
          "columns": [
            {
              "expression": "product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "product_features_organization_id_idx": {
          "name": "product_features_organization_id_idx",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "product_features_pricing_model_id_idx": {
          "name": "product_features_pricing_model_id_idx",
          "columns": [
            {
              "expression": "pricing_model_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "product_features_product_id_products_id_fk": {
          "name": "product_features_product_id_products_id_fk",
          "tableFrom": "product_features",
          "columnsFrom": ["product_id"],
          "tableTo": "products",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "product_features_feature_id_features_id_fk": {
          "name": "product_features_feature_id_features_id_fk",
          "tableFrom": "product_features",
          "columnsFrom": ["feature_id"],
          "tableTo": "features",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "product_features_organization_id_organizations_id_fk": {
          "name": "product_features_organization_id_organizations_id_fk",
          "tableFrom": "product_features",
          "columnsFrom": ["organization_id"],
          "tableTo": "organizations",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "product_features_pricing_model_id_pricing_models_id_fk": {
          "name": "product_features_pricing_model_id_pricing_models_id_fk",
          "tableFrom": "product_features",
          "columnsFrom": ["pricing_model_id"],
          "tableTo": "pricing_models",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "product_features_id_unique": {
          "name": "product_features_id_unique",
          "columns": ["id"],
          "nullsNotDistinct": false
        }
      },
      "policies": {
        "Enable read for own organizations": {
          "name": "Enable read for own organizations",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": ["merchant"],
          "using": "\"organization_id\" in (select \"organization_id\" from \"memberships\")"
        },
        "Enable read for customers (product_features)": {
          "name": "Enable read for customers (product_features)",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["customer"],
          "using": "\"product_id\" in (select \"id\" from \"products\")"
        },
        "Ensure organization integrity with products parent table": {
          "name": "Ensure organization integrity with products parent table",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": ["merchant"],
          "using": "\"product_id\" in (select \"id\" from \"products\")"
        },
        "Enable read for own organizations (product_features)": {
          "name": "Enable read for own organizations (product_features)",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": ["merchant"],
          "using": "\"organization_id\" in (select \"organization_id\" from \"memberships\")"
        },
        "Ensure organization integrity with features parent table": {
          "name": "Ensure organization integrity with features parent table",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": ["merchant"],
          "using": "\"feature_id\" in (select \"id\" from \"features\")"
        },
        "Check mode (product_features)": {
          "name": "Check mode (product_features)",
          "as": "RESTRICTIVE",
          "for": "ALL",
          "to": ["merchant"],
          "using": "current_setting('app.livemode')::boolean = livemode"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.products": {
      "name": "products",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by_commit": {
          "name": "created_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by_commit": {
          "name": "updated_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "livemode": {
          "name": "livemode",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "position": {
          "name": "position",
          "type": "bigserial",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "image_url": {
          "name": "image_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "organization_id": {
          "name": "organization_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "active": {
          "name": "active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "singular_quantity_label": {
          "name": "singular_quantity_label",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "plural_quantity_label": {
          "name": "plural_quantity_label",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "pricing_model_id": {
          "name": "pricing_model_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "external_id": {
          "name": "external_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "default": {
          "name": "default",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "slug": {
          "name": "slug",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "products_organization_id_idx": {
          "name": "products_organization_id_idx",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "products_active_idx": {
          "name": "products_active_idx",
          "columns": [
            {
              "expression": "active",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "products_external_id_unique_idx": {
          "name": "products_external_id_unique_idx",
          "columns": [
            {
              "expression": "external_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "products_pricing_model_id_slug_unique_idx": {
          "name": "products_pricing_model_id_slug_unique_idx",
          "columns": [
            {
              "expression": "pricing_model_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "slug",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "products_pricing_model_id_default_unique_idx": {
          "name": "products_pricing_model_id_default_unique_idx",
          "columns": [
            {
              "expression": "pricing_model_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "with": {},
          "method": "btree",
          "where": "\"products\".\"default\"",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "products_organization_id_organizations_id_fk": {
          "name": "products_organization_id_organizations_id_fk",
          "tableFrom": "products",
          "columnsFrom": ["organization_id"],
          "tableTo": "organizations",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "products_pricing_model_id_pricing_models_id_fk": {
          "name": "products_pricing_model_id_pricing_models_id_fk",
          "tableFrom": "products",
          "columnsFrom": ["pricing_model_id"],
          "tableTo": "pricing_models",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "products_id_unique": {
          "name": "products_id_unique",
          "columns": ["id"],
          "nullsNotDistinct": false
        }
      },
      "policies": {
        "Enable read for customers (products)": {
          "name": "Enable read for customers (products)",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["customer"],
          "using": "\"organization_id\" = current_organization_id() and \"active\" = true and \"pricing_model_id\" in (select \"pricing_model_id\" from \"customers\")"
        },
        "Enable read for own organizations (products)": {
          "name": "Enable read for own organizations (products)",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": ["merchant"],
          "using": "\"organization_id\" in (select \"organization_id\" from \"memberships\")"
        },
        "Check mode (products)": {
          "name": "Check mode (products)",
          "as": "RESTRICTIVE",
          "for": "ALL",
          "to": ["merchant"],
          "using": "current_setting('app.livemode')::boolean = livemode"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.purchases": {
      "name": "purchases",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by_commit": {
          "name": "created_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by_commit": {
          "name": "updated_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "livemode": {
          "name": "livemode",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "position": {
          "name": "position",
          "type": "bigserial",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "PurchaseStatus",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false,
          "default": "'open'"
        },
        "customer_id": {
          "name": "customer_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "organization_id": {
          "name": "organization_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "billing_cycle_anchor": {
          "name": "billing_cycle_anchor",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": false
        },
        "price_id": {
          "name": "price_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "quantity": {
          "name": "quantity",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "price_type": {
          "name": "price_type",
          "type": "PriceType",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'single_payment'"
        },
        "trial_period_days": {
          "name": "trial_period_days",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "price_per_billing_cycle": {
          "name": "price_per_billing_cycle",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "interval_unit": {
          "name": "interval_unit",
          "type": "IntervalUnit",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "interval_count": {
          "name": "interval_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "first_invoice_value": {
          "name": "first_invoice_value",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "total_purchase_value": {
          "name": "total_purchase_value",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "bank_payment_only": {
          "name": "bank_payment_only",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "purchase_date": {
          "name": "purchase_date",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": false
        },
        "end_date": {
          "name": "end_date",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": false
        },
        "proposal": {
          "name": "proposal",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "archived": {
          "name": "archived",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "billing_address": {
          "name": "billing_address",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "pricing_model_id": {
          "name": "pricing_model_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "purchases_customer_id_idx": {
          "name": "purchases_customer_id_idx",
          "columns": [
            {
              "expression": "customer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "purchases_organization_id_idx": {
          "name": "purchases_organization_id_idx",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "purchases_price_id_idx": {
          "name": "purchases_price_id_idx",
          "columns": [
            {
              "expression": "price_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "purchases_pricing_model_id_idx": {
          "name": "purchases_pricing_model_id_idx",
          "columns": [
            {
              "expression": "pricing_model_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "purchases_customer_id_customers_id_fk": {
          "name": "purchases_customer_id_customers_id_fk",
          "tableFrom": "purchases",
          "columnsFrom": ["customer_id"],
          "tableTo": "customers",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "purchases_organization_id_organizations_id_fk": {
          "name": "purchases_organization_id_organizations_id_fk",
          "tableFrom": "purchases",
          "columnsFrom": ["organization_id"],
          "tableTo": "organizations",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "purchases_price_id_prices_id_fk": {
          "name": "purchases_price_id_prices_id_fk",
          "tableFrom": "purchases",
          "columnsFrom": ["price_id"],
          "tableTo": "prices",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "purchases_pricing_model_id_pricing_models_id_fk": {
          "name": "purchases_pricing_model_id_pricing_models_id_fk",
          "tableFrom": "purchases",
          "columnsFrom": ["pricing_model_id"],
          "tableTo": "pricing_models",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "purchases_id_unique": {
          "name": "purchases_id_unique",
          "columns": ["id"],
          "nullsNotDistinct": false
        }
      },
      "policies": {
        "Check mode (purchases)": {
          "name": "Check mode (purchases)",
          "as": "RESTRICTIVE",
          "for": "ALL",
          "to": ["merchant"],
          "using": "current_setting('app.livemode')::boolean = livemode"
        },
        "Enable read for customers (purchases)": {
          "name": "Enable read for customers (purchases)",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["customer"],
          "using": "\"customer_id\" in (select \"id\" from \"customers\")"
        },
        "Enable read for own organizations (purchases)": {
          "name": "Enable read for own organizations (purchases)",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["merchant"],
          "using": "\"organization_id\" in (select \"organization_id\" from \"memberships\")"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.refunds": {
      "name": "refunds",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by_commit": {
          "name": "created_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by_commit": {
          "name": "updated_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "livemode": {
          "name": "livemode",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "position": {
          "name": "position",
          "type": "bigserial",
          "primaryKey": false,
          "notNull": true
        },
        "payment_id": {
          "name": "payment_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "subscription_id": {
          "name": "subscription_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "organization_id": {
          "name": "organization_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "amount": {
          "name": "amount",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "currency": {
          "name": "currency",
          "type": "CurrencyCode",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "reason": {
          "name": "reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "RefundStatus",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "refund_processed_at": {
          "name": "refund_processed_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": false
        },
        "gateway_refund_id": {
          "name": "gateway_refund_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "initiated_by_user_id": {
          "name": "initiated_by_user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "refunds_payment_id_idx": {
          "name": "refunds_payment_id_idx",
          "columns": [
            {
              "expression": "payment_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "refunds_subscription_id_idx": {
          "name": "refunds_subscription_id_idx",
          "columns": [
            {
              "expression": "subscription_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "refunds_status_idx": {
          "name": "refunds_status_idx",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "refunds_payment_id_payments_id_fk": {
          "name": "refunds_payment_id_payments_id_fk",
          "tableFrom": "refunds",
          "columnsFrom": ["payment_id"],
          "tableTo": "payments",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "refunds_subscription_id_subscriptions_id_fk": {
          "name": "refunds_subscription_id_subscriptions_id_fk",
          "tableFrom": "refunds",
          "columnsFrom": ["subscription_id"],
          "tableTo": "subscriptions",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "refunds_organization_id_organizations_id_fk": {
          "name": "refunds_organization_id_organizations_id_fk",
          "tableFrom": "refunds",
          "columnsFrom": ["organization_id"],
          "tableTo": "organizations",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "refunds_id_unique": {
          "name": "refunds_id_unique",
          "columns": ["id"],
          "nullsNotDistinct": false
        }
      },
      "policies": {
        "Enable read for customers (refunds)": {
          "name": "Enable read for customers (refunds)",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["customer"],
          "using": "\"payment_id\" in (select \"id\" from \"payments\")"
        },
        "Enable read for own organizations (refunds)": {
          "name": "Enable read for own organizations (refunds)",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": ["merchant"],
          "using": "\"organization_id\" in (select \"organization_id\" from \"memberships\")"
        },
        "Check mode (refunds)": {
          "name": "Check mode (refunds)",
          "as": "RESTRICTIVE",
          "for": "ALL",
          "to": ["merchant"],
          "using": "current_setting('app.livemode')::boolean = livemode"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.subscription_item_features": {
      "name": "subscription_item_features",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by_commit": {
          "name": "created_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by_commit": {
          "name": "updated_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "livemode": {
          "name": "livemode",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "position": {
          "name": "position",
          "type": "bigserial",
          "primaryKey": false,
          "notNull": true
        },
        "subscription_item_id": {
          "name": "subscription_item_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "feature_id": {
          "name": "feature_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "product_feature_id": {
          "name": "product_feature_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "type": {
          "name": "type",
          "type": "FeatureType",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "amount": {
          "name": "amount",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "usage_meter_id": {
          "name": "usage_meter_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "renewal_frequency": {
          "name": "renewal_frequency",
          "type": "FeatureUsageGrantFrequency",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "expired_at": {
          "name": "expired_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": false
        },
        "detached_at": {
          "name": "detached_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": false
        },
        "detached_reason": {
          "name": "detached_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "manually_created": {
          "name": "manually_created",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        }
      },
      "indexes": {
        "subscription_item_features_subscription_item_id_idx": {
          "name": "subscription_item_features_subscription_item_id_idx",
          "columns": [
            {
              "expression": "subscription_item_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "subscription_item_features_feature_id_idx": {
          "name": "subscription_item_features_feature_id_idx",
          "columns": [
            {
              "expression": "feature_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "subscription_item_features_product_feature_id_idx": {
          "name": "subscription_item_features_product_feature_id_idx",
          "columns": [
            {
              "expression": "product_feature_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "subscription_item_features_type_idx": {
          "name": "subscription_item_features_type_idx",
          "columns": [
            {
              "expression": "type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "subscription_item_features_feature_id_subscription_item_id_unique_idx": {
          "name": "subscription_item_features_feature_id_subscription_item_id_unique_idx",
          "columns": [
            {
              "expression": "feature_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "subscription_item_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "subscription_item_features_subscription_item_id_subscription_items_id_fk": {
          "name": "subscription_item_features_subscription_item_id_subscription_items_id_fk",
          "tableFrom": "subscription_item_features",
          "columnsFrom": ["subscription_item_id"],
          "tableTo": "subscription_items",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "subscription_item_features_feature_id_features_id_fk": {
          "name": "subscription_item_features_feature_id_features_id_fk",
          "tableFrom": "subscription_item_features",
          "columnsFrom": ["feature_id"],
          "tableTo": "features",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "subscription_item_features_product_feature_id_product_features_id_fk": {
          "name": "subscription_item_features_product_feature_id_product_features_id_fk",
          "tableFrom": "subscription_item_features",
          "columnsFrom": ["product_feature_id"],
          "tableTo": "product_features",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "subscription_item_features_usage_meter_id_usage_meters_id_fk": {
          "name": "subscription_item_features_usage_meter_id_usage_meters_id_fk",
          "tableFrom": "subscription_item_features",
          "columnsFrom": ["usage_meter_id"],
          "tableTo": "usage_meters",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "subscription_item_features_id_unique": {
          "name": "subscription_item_features_id_unique",
          "columns": ["id"],
          "nullsNotDistinct": false
        }
      },
      "policies": {
        "Ensure organization integrity with subscription_items parent table": {
          "name": "Ensure organization integrity with subscription_items parent table",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": ["merchant"],
          "using": "\"subscription_item_id\" in (select \"id\" from \"subscription_items\")"
        },
        "Ensure organization integrity with features parent table": {
          "name": "Ensure organization integrity with features parent table",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": ["merchant"],
          "using": "\"feature_id\" in (select \"id\" from \"features\")"
        },
        "Ensure organization integrity with usage_meters parent table": {
          "name": "Ensure organization integrity with usage_meters parent table",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": ["merchant"],
          "using": "\"usage_meter_id\" in (select \"id\" from \"usage_meters\")"
        },
        "Enable read for customers (subscription_item_features)": {
          "name": "Enable read for customers (subscription_item_features)",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["customer"],
          "using": "\"subscription_item_id\" in (select \"id\" from \"subscription_items\") and \"feature_id\" in (select \"id\" from \"features\")"
        },
        "Enable read for own organizations (subscription_item_features)": {
          "name": "Enable read for own organizations (subscription_item_features)",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["merchant"],
          "using": "\"subscription_item_id\" in (select \"id\" from \"subscription_items\")"
        },
        "Check mode (subscription_item_features)": {
          "name": "Check mode (subscription_item_features)",
          "as": "RESTRICTIVE",
          "for": "ALL",
          "to": ["merchant"],
          "using": "current_setting('app.livemode')::boolean = livemode"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.subscription_items": {
      "name": "subscription_items",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by_commit": {
          "name": "created_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by_commit": {
          "name": "updated_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "livemode": {
          "name": "livemode",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "position": {
          "name": "position",
          "type": "bigserial",
          "primaryKey": false,
          "notNull": true
        },
        "subscription_id": {
          "name": "subscription_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "added_date": {
          "name": "added_date",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true
        },
        "price_id": {
          "name": "price_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "unit_price": {
          "name": "unit_price",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "quantity": {
          "name": "quantity",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "type": {
          "name": "type",
          "type": "SubscriptionItemType",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "external_id": {
          "name": "external_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "expired_at": {
          "name": "expired_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": false
        },
        "manually_created": {
          "name": "manually_created",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        }
      },
      "indexes": {
        "subscription_items_subscription_id_idx": {
          "name": "subscription_items_subscription_id_idx",
          "columns": [
            {
              "expression": "subscription_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "subscription_items_price_id_idx": {
          "name": "subscription_items_price_id_idx",
          "columns": [
            {
              "expression": "price_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "subscription_items_external_id_unique_idx": {
          "name": "subscription_items_external_id_unique_idx",
          "columns": [
            {
              "expression": "external_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "subscription_items_subscription_id_subscriptions_id_fk": {
          "name": "subscription_items_subscription_id_subscriptions_id_fk",
          "tableFrom": "subscription_items",
          "columnsFrom": ["subscription_id"],
          "tableTo": "subscriptions",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "subscription_items_price_id_prices_id_fk": {
          "name": "subscription_items_price_id_prices_id_fk",
          "tableFrom": "subscription_items",
          "columnsFrom": ["price_id"],
          "tableTo": "prices",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "subscription_items_id_unique": {
          "name": "subscription_items_id_unique",
          "columns": ["id"],
          "nullsNotDistinct": false
        }
      },
      "policies": {
        "Enable read for customers (subscription_items)": {
          "name": "Enable read for customers (subscription_items)",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["customer"],
          "using": "\"subscription_id\" in (select \"id\" from \"subscriptions\")"
        },
        "Enable actions for own organizations via subscriptions": {
          "name": "Enable actions for own organizations via subscriptions",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": ["merchant"],
          "using": "\"subscriptionId\" in (select \"id\" from \"Subscriptions\")"
        },
        "Check mode (subscription_items)": {
          "name": "Check mode (subscription_items)",
          "as": "RESTRICTIVE",
          "for": "ALL",
          "to": ["merchant"],
          "using": "current_setting('app.livemode')::boolean = livemode"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.subscription_meter_period_calculations": {
      "name": "subscription_meter_period_calculations",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by_commit": {
          "name": "created_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by_commit": {
          "name": "updated_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "livemode": {
          "name": "livemode",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "position": {
          "name": "position",
          "type": "bigserial",
          "primaryKey": false,
          "notNull": true
        },
        "billing_run_id": {
          "name": "billing_run_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "subscription_id": {
          "name": "subscription_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "usage_meter_id": {
          "name": "usage_meter_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "billing_period_id": {
          "name": "billing_period_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "organization_id": {
          "name": "organization_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "calculated_at": {
          "name": "calculated_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "total_raw_usage_amount": {
          "name": "total_raw_usage_amount",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "credits_applied_amount": {
          "name": "credits_applied_amount",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "net_billed_amount": {
          "name": "net_billed_amount",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "SubscriptionMeterPeriodCalculationStatus",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'active'"
        },
        "superseded_by_calculation_id": {
          "name": "superseded_by_calculation_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "source_invoice_id": {
          "name": "source_invoice_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "pricing_model_id": {
          "name": "pricing_model_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "subscription_meter_period_calculations_subscription_id_idx": {
          "name": "subscription_meter_period_calculations_subscription_id_idx",
          "columns": [
            {
              "expression": "subscription_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "subscription_meter_period_calculations_usage_meter_id_idx": {
          "name": "subscription_meter_period_calculations_usage_meter_id_idx",
          "columns": [
            {
              "expression": "usage_meter_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "subscription_meter_period_calculations_billing_period_id_idx": {
          "name": "subscription_meter_period_calculations_billing_period_id_idx",
          "columns": [
            {
              "expression": "billing_period_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "subscription_meter_period_calculations_organization_id_idx": {
          "name": "subscription_meter_period_calculations_organization_id_idx",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "subscription_meter_period_calculations_status_idx": {
          "name": "subscription_meter_period_calculations_status_idx",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "subscription_meter_period_calculations_billing_run_id_idx": {
          "name": "subscription_meter_period_calculations_billing_run_id_idx",
          "columns": [
            {
              "expression": "billing_run_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "subscription_meter_period_calculations_superseded_by_calculation_id_idx": {
          "name": "subscription_meter_period_calculations_superseded_by_calculation_id_idx",
          "columns": [
            {
              "expression": "superseded_by_calculation_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "subscription_meter_period_calculations_source_invoice_id_idx": {
          "name": "subscription_meter_period_calculations_source_invoice_id_idx",
          "columns": [
            {
              "expression": "source_invoice_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "subscription_meter_period_calculations_pricing_model_id_idx": {
          "name": "subscription_meter_period_calculations_pricing_model_id_idx",
          "columns": [
            {
              "expression": "pricing_model_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "subscription_meter_period_calculations_active_calculation_uq": {
          "name": "subscription_meter_period_calculations_active_calculation_uq",
          "columns": [
            {
              "expression": "subscription_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "usage_meter_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "billing_period_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "with": {},
          "method": "btree",
          "where": "\"subscription_meter_period_calculations\".\"status\" = $1",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "subscription_meter_period_calculations_billing_run_id_billing_runs_id_fk": {
          "name": "subscription_meter_period_calculations_billing_run_id_billing_runs_id_fk",
          "tableFrom": "subscription_meter_period_calculations",
          "columnsFrom": ["billing_run_id"],
          "tableTo": "billing_runs",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "subscription_meter_period_calculations_subscription_id_subscriptions_id_fk": {
          "name": "subscription_meter_period_calculations_subscription_id_subscriptions_id_fk",
          "tableFrom": "subscription_meter_period_calculations",
          "columnsFrom": ["subscription_id"],
          "tableTo": "subscriptions",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "subscription_meter_period_calculations_usage_meter_id_usage_meters_id_fk": {
          "name": "subscription_meter_period_calculations_usage_meter_id_usage_meters_id_fk",
          "tableFrom": "subscription_meter_period_calculations",
          "columnsFrom": ["usage_meter_id"],
          "tableTo": "usage_meters",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "subscription_meter_period_calculations_billing_period_id_billing_periods_id_fk": {
          "name": "subscription_meter_period_calculations_billing_period_id_billing_periods_id_fk",
          "tableFrom": "subscription_meter_period_calculations",
          "columnsFrom": ["billing_period_id"],
          "tableTo": "billing_periods",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "subscription_meter_period_calculations_organization_id_organizations_id_fk": {
          "name": "subscription_meter_period_calculations_organization_id_organizations_id_fk",
          "tableFrom": "subscription_meter_period_calculations",
          "columnsFrom": ["organization_id"],
          "tableTo": "organizations",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "subscription_meter_period_calculations_source_invoice_id_invoices_id_fk": {
          "name": "subscription_meter_period_calculations_source_invoice_id_invoices_id_fk",
          "tableFrom": "subscription_meter_period_calculations",
          "columnsFrom": ["source_invoice_id"],
          "tableTo": "invoices",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "subscription_meter_period_calculations_pricing_model_id_pricing_models_id_fk": {
          "name": "subscription_meter_period_calculations_pricing_model_id_pricing_models_id_fk",
          "tableFrom": "subscription_meter_period_calculations",
          "columnsFrom": ["pricing_model_id"],
          "tableTo": "pricing_models",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "subscription_meter_period_calculations_superseded_by_id_fk": {
          "name": "subscription_meter_period_calculations_superseded_by_id_fk",
          "tableFrom": "subscription_meter_period_calculations",
          "columnsFrom": ["superseded_by_calculation_id"],
          "tableTo": "subscription_meter_period_calculations",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "subscription_meter_period_calculations_id_unique": {
          "name": "subscription_meter_period_calculations_id_unique",
          "columns": ["id"],
          "nullsNotDistinct": false
        }
      },
      "policies": {
        "Enable read for own organizations (subscription_meter_period_calculations)": {
          "name": "Enable read for own organizations (subscription_meter_period_calculations)",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": ["merchant"],
          "using": "\"organization_id\" in (select \"organization_id\" from \"memberships\")"
        },
        "Check mode (subscription_meter_period_calculations)": {
          "name": "Check mode (subscription_meter_period_calculations)",
          "as": "RESTRICTIVE",
          "for": "ALL",
          "to": ["merchant"],
          "using": "current_setting('app.livemode')::boolean = livemode"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.subscriptions": {
      "name": "subscriptions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by_commit": {
          "name": "created_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by_commit": {
          "name": "updated_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "livemode": {
          "name": "livemode",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "position": {
          "name": "position",
          "type": "bigserial",
          "primaryKey": false,
          "notNull": true
        },
        "start_date": {
          "name": "start_date",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true
        },
        "customer_id": {
          "name": "customer_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "organization_id": {
          "name": "organization_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "SubscriptionStatus",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "default_payment_method_id": {
          "name": "default_payment_method_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "backup_payment_method_id": {
          "name": "backup_payment_method_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "stripe_setup_intent_id": {
          "name": "stripe_setup_intent_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "trial_end": {
          "name": "trial_end",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": false
        },
        "current_billing_period_start": {
          "name": "current_billing_period_start",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": false
        },
        "current_billing_period_end": {
          "name": "current_billing_period_end",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": false
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "canceled_at": {
          "name": "canceled_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": false
        },
        "cancel_scheduled_at": {
          "name": "cancel_scheduled_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": false
        },
        "cancellation_reason": {
          "name": "cancellation_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "replaced_by_subscription_id": {
          "name": "replaced_by_subscription_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "is_free_plan": {
          "name": "is_free_plan",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "do_not_charge": {
          "name": "do_not_charge",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "price_id": {
          "name": "price_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "run_billing_at_period_start": {
          "name": "run_billing_at_period_start",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "interval": {
          "name": "interval",
          "type": "IntervalUnit",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "interval_count": {
          "name": "interval_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "billing_cycle_anchor_date": {
          "name": "billing_cycle_anchor_date",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "renews": {
          "name": "renews",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "external_id": {
          "name": "external_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "pricing_model_id": {
          "name": "pricing_model_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "subscriptions_customer_id_idx": {
          "name": "subscriptions_customer_id_idx",
          "columns": [
            {
              "expression": "customer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "subscriptions_price_id_idx": {
          "name": "subscriptions_price_id_idx",
          "columns": [
            {
              "expression": "price_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "subscriptions_status_idx": {
          "name": "subscriptions_status_idx",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "subscriptions_replaced_by_subscription_id_idx": {
          "name": "subscriptions_replaced_by_subscription_id_idx",
          "columns": [
            {
              "expression": "replaced_by_subscription_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "subscriptions_is_free_plan_idx": {
          "name": "subscriptions_is_free_plan_idx",
          "columns": [
            {
              "expression": "is_free_plan",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "subscriptions_cancellation_reason_idx": {
          "name": "subscriptions_cancellation_reason_idx",
          "columns": [
            {
              "expression": "cancellation_reason",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "subscriptions_organization_id_idx": {
          "name": "subscriptions_organization_id_idx",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "subscriptions_pricing_model_id_idx": {
          "name": "subscriptions_pricing_model_id_idx",
          "columns": [
            {
              "expression": "pricing_model_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "subscriptions_stripe_setup_intent_id_unique_idx": {
          "name": "subscriptions_stripe_setup_intent_id_unique_idx",
          "columns": [
            {
              "expression": "stripe_setup_intent_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "subscriptions_external_id_organization_id_unique_idx": {
          "name": "subscriptions_external_id_organization_id_unique_idx",
          "columns": [
            {
              "expression": "external_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "subscriptions_customer_id_customers_id_fk": {
          "name": "subscriptions_customer_id_customers_id_fk",
          "tableFrom": "subscriptions",
          "columnsFrom": ["customer_id"],
          "tableTo": "customers",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "subscriptions_organization_id_organizations_id_fk": {
          "name": "subscriptions_organization_id_organizations_id_fk",
          "tableFrom": "subscriptions",
          "columnsFrom": ["organization_id"],
          "tableTo": "organizations",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "subscriptions_default_payment_method_id_payment_methods_id_fk": {
          "name": "subscriptions_default_payment_method_id_payment_methods_id_fk",
          "tableFrom": "subscriptions",
          "columnsFrom": ["default_payment_method_id"],
          "tableTo": "payment_methods",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "subscriptions_backup_payment_method_id_payment_methods_id_fk": {
          "name": "subscriptions_backup_payment_method_id_payment_methods_id_fk",
          "tableFrom": "subscriptions",
          "columnsFrom": ["backup_payment_method_id"],
          "tableTo": "payment_methods",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "subscriptions_price_id_prices_id_fk": {
          "name": "subscriptions_price_id_prices_id_fk",
          "tableFrom": "subscriptions",
          "columnsFrom": ["price_id"],
          "tableTo": "prices",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "subscriptions_pricing_model_id_pricing_models_id_fk": {
          "name": "subscriptions_pricing_model_id_pricing_models_id_fk",
          "tableFrom": "subscriptions",
          "columnsFrom": ["pricing_model_id"],
          "tableTo": "pricing_models",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "subscriptions_id_unique": {
          "name": "subscriptions_id_unique",
          "columns": ["id"],
          "nullsNotDistinct": false
        }
      },
      "policies": {
        "Enable read for customers (subscriptions)": {
          "name": "Enable read for customers (subscriptions)",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["customer"],
          "using": "\"customer_id\" in (select \"id\" from \"customers\")"
        },
        "Enable actions for own organizations via customer": {
          "name": "Enable actions for own organizations via customer",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": ["merchant"],
          "using": "\"customer_id\" in (select \"id\" from \"customers\")"
        },
        "Forbid deletion": {
          "name": "Forbid deletion",
          "as": "RESTRICTIVE",
          "for": "DELETE",
          "to": ["merchant"],
          "using": "false"
        },
        "Check mode (subscriptions)": {
          "name": "Check mode (subscriptions)",
          "as": "RESTRICTIVE",
          "for": "ALL",
          "to": ["merchant"],
          "using": "current_setting('app.livemode')::boolean = livemode"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.usage_credit_applications": {
      "name": "usage_credit_applications",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by_commit": {
          "name": "created_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by_commit": {
          "name": "updated_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "livemode": {
          "name": "livemode",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "position": {
          "name": "position",
          "type": "bigserial",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "UsageCreditApplicationStatus",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "usage_credit_id": {
          "name": "usage_credit_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "usage_event_id": {
          "name": "usage_event_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "amount_applied": {
          "name": "amount_applied",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "applied_at": {
          "name": "applied_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "target_usage_meter_id": {
          "name": "target_usage_meter_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "organization_id": {
          "name": "organization_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "pricing_model_id": {
          "name": "pricing_model_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "usage_credit_applications_usage_credit_id_idx": {
          "name": "usage_credit_applications_usage_credit_id_idx",
          "columns": [
            {
              "expression": "usage_credit_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "usage_credit_applications_pricing_model_id_idx": {
          "name": "usage_credit_applications_pricing_model_id_idx",
          "columns": [
            {
              "expression": "pricing_model_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "usage_credit_applications_usage_credit_id_usage_credits_id_fk": {
          "name": "usage_credit_applications_usage_credit_id_usage_credits_id_fk",
          "tableFrom": "usage_credit_applications",
          "columnsFrom": ["usage_credit_id"],
          "tableTo": "usage_credits",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "usage_credit_applications_usage_event_id_usage_events_id_fk": {
          "name": "usage_credit_applications_usage_event_id_usage_events_id_fk",
          "tableFrom": "usage_credit_applications",
          "columnsFrom": ["usage_event_id"],
          "tableTo": "usage_events",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "usage_credit_applications_target_usage_meter_id_usage_meters_id_fk": {
          "name": "usage_credit_applications_target_usage_meter_id_usage_meters_id_fk",
          "tableFrom": "usage_credit_applications",
          "columnsFrom": ["target_usage_meter_id"],
          "tableTo": "usage_meters",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "usage_credit_applications_organization_id_organizations_id_fk": {
          "name": "usage_credit_applications_organization_id_organizations_id_fk",
          "tableFrom": "usage_credit_applications",
          "columnsFrom": ["organization_id"],
          "tableTo": "organizations",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "usage_credit_applications_pricing_model_id_pricing_models_id_fk": {
          "name": "usage_credit_applications_pricing_model_id_pricing_models_id_fk",
          "tableFrom": "usage_credit_applications",
          "columnsFrom": ["pricing_model_id"],
          "tableTo": "pricing_models",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "usage_credit_applications_id_unique": {
          "name": "usage_credit_applications_id_unique",
          "columns": ["id"],
          "nullsNotDistinct": false
        }
      },
      "policies": {
        "Enable read for customers (usage_credit_applications)": {
          "name": "Enable read for customers (usage_credit_applications)",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["customer"],
          "using": "\"usage_credit_id\" in (select \"id\" from \"usage_credits\")"
        },
        "Enable read for own organizations (usage_credit_applications)": {
          "name": "Enable read for own organizations (usage_credit_applications)",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": ["merchant"],
          "using": "\"organization_id\" in (select \"organization_id\" from \"memberships\")"
        },
        "Check mode (usage_credit_applications)": {
          "name": "Check mode (usage_credit_applications)",
          "as": "RESTRICTIVE",
          "for": "ALL",
          "to": ["merchant"],
          "using": "current_setting('app.livemode')::boolean = livemode"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.usage_credit_balance_adjustments": {
      "name": "usage_credit_balance_adjustments",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by_commit": {
          "name": "created_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by_commit": {
          "name": "updated_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "livemode": {
          "name": "livemode",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "position": {
          "name": "position",
          "type": "bigserial",
          "primaryKey": false,
          "notNull": true
        },
        "organization_id": {
          "name": "organization_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "usage_meter_id": {
          "name": "usage_meter_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "adjusted_usage_credit_id": {
          "name": "adjusted_usage_credit_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "amount_adjusted": {
          "name": "amount_adjusted",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "reason": {
          "name": "reason",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "adjusted_by_user_id": {
          "name": "adjusted_by_user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "adjustment_initiated_at": {
          "name": "adjustment_initiated_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "pricing_model_id": {
          "name": "pricing_model_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "usage_credit_balance_adjustments_organization_id_idx": {
          "name": "usage_credit_balance_adjustments_organization_id_idx",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "usage_credit_balance_adjustments_adjusted_usage_credit_id_idx": {
          "name": "usage_credit_balance_adjustments_adjusted_usage_credit_id_idx",
          "columns": [
            {
              "expression": "adjusted_usage_credit_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "usage_credit_balance_adjustments_adjusted_by_user_id_idx": {
          "name": "usage_credit_balance_adjustments_adjusted_by_user_id_idx",
          "columns": [
            {
              "expression": "adjusted_by_user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "usage_credit_balance_adjustments_pricing_model_id_idx": {
          "name": "usage_credit_balance_adjustments_pricing_model_id_idx",
          "columns": [
            {
              "expression": "pricing_model_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "usage_credit_balance_adjustments_organization_id_organizations_id_fk": {
          "name": "usage_credit_balance_adjustments_organization_id_organizations_id_fk",
          "tableFrom": "usage_credit_balance_adjustments",
          "columnsFrom": ["organization_id"],
          "tableTo": "organizations",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "usage_credit_balance_adjustments_usage_meter_id_usage_meters_id_fk": {
          "name": "usage_credit_balance_adjustments_usage_meter_id_usage_meters_id_fk",
          "tableFrom": "usage_credit_balance_adjustments",
          "columnsFrom": ["usage_meter_id"],
          "tableTo": "usage_meters",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "usage_credit_balance_adjustments_adjusted_usage_credit_id_usage_credits_id_fk": {
          "name": "usage_credit_balance_adjustments_adjusted_usage_credit_id_usage_credits_id_fk",
          "tableFrom": "usage_credit_balance_adjustments",
          "columnsFrom": ["adjusted_usage_credit_id"],
          "tableTo": "usage_credits",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "usage_credit_balance_adjustments_adjusted_by_user_id_users_id_fk": {
          "name": "usage_credit_balance_adjustments_adjusted_by_user_id_users_id_fk",
          "tableFrom": "usage_credit_balance_adjustments",
          "columnsFrom": ["adjusted_by_user_id"],
          "tableTo": "users",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "usage_credit_balance_adjustments_pricing_model_id_pricing_models_id_fk": {
          "name": "usage_credit_balance_adjustments_pricing_model_id_pricing_models_id_fk",
          "tableFrom": "usage_credit_balance_adjustments",
          "columnsFrom": ["pricing_model_id"],
          "tableTo": "pricing_models",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "usage_credit_balance_adjustments_id_unique": {
          "name": "usage_credit_balance_adjustments_id_unique",
          "columns": ["id"],
          "nullsNotDistinct": false
        }
      },
      "policies": {
        "Enable read for customers (usage_credit_balance_adjustments)": {
          "name": "Enable read for customers (usage_credit_balance_adjustments)",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["customer"],
          "using": "\"adjusted_usage_credit_id\" in (select \"id\" from \"usage_credits\")"
        },
        "Enable read for own organizations (usage_credit_balance_adjustments)": {
          "name": "Enable read for own organizations (usage_credit_balance_adjustments)",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": ["merchant"],
          "using": "\"organization_id\" in (select \"organization_id\" from \"memberships\")"
        },
        "Check mode (usage_credit_balance_adjustments)": {
          "name": "Check mode (usage_credit_balance_adjustments)",
          "as": "RESTRICTIVE",
          "for": "ALL",
          "to": ["merchant"],
          "using": "current_setting('app.livemode')::boolean = livemode"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.usage_credits": {
      "name": "usage_credits",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by_commit": {
          "name": "created_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by_commit": {
          "name": "updated_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "livemode": {
          "name": "livemode",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "position": {
          "name": "position",
          "type": "bigserial",
          "primaryKey": false,
          "notNull": true
        },
        "subscription_id": {
          "name": "subscription_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "organization_id": {
          "name": "organization_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "credit_type": {
          "name": "credit_type",
          "type": "UsageCreditType",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "source_reference_id": {
          "name": "source_reference_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "source_reference_type": {
          "name": "source_reference_type",
          "type": "UsageCreditSourceReferenceType",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "billing_period_id": {
          "name": "billing_period_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "usage_meter_id": {
          "name": "usage_meter_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "payment_id": {
          "name": "payment_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "issued_amount": {
          "name": "issued_amount",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "issued_at": {
          "name": "issued_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "expires_at": {
          "name": "expires_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "UsageCreditStatus",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "pricing_model_id": {
          "name": "pricing_model_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "usage_credits_subscription_id_idx": {
          "name": "usage_credits_subscription_id_idx",
          "columns": [
            {
              "expression": "subscription_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "usage_credits_organization_id_idx": {
          "name": "usage_credits_organization_id_idx",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "usage_credits_billing_period_id_idx": {
          "name": "usage_credits_billing_period_id_idx",
          "columns": [
            {
              "expression": "billing_period_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "usage_credits_usage_meter_id_idx": {
          "name": "usage_credits_usage_meter_id_idx",
          "columns": [
            {
              "expression": "usage_meter_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "usage_credits_expires_at_idx": {
          "name": "usage_credits_expires_at_idx",
          "columns": [
            {
              "expression": "expires_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "usage_credits_credit_type_idx": {
          "name": "usage_credits_credit_type_idx",
          "columns": [
            {
              "expression": "credit_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "usage_credits_status_idx": {
          "name": "usage_credits_status_idx",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "usage_credits_payment_id_idx": {
          "name": "usage_credits_payment_id_idx",
          "columns": [
            {
              "expression": "payment_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "usage_credits_pricing_model_id_idx": {
          "name": "usage_credits_pricing_model_id_idx",
          "columns": [
            {
              "expression": "pricing_model_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "usage_credits_source_reference_id_idx": {
          "name": "usage_credits_source_reference_id_idx",
          "columns": [
            {
              "expression": "source_reference_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "usage_credits_payment_id_subscription_id_usage_meter_id_unique_idx": {
          "name": "usage_credits_payment_id_subscription_id_usage_meter_id_unique_idx",
          "columns": [
            {
              "expression": "payment_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "subscription_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "usage_meter_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "usage_credits_subscription_id_subscriptions_id_fk": {
          "name": "usage_credits_subscription_id_subscriptions_id_fk",
          "tableFrom": "usage_credits",
          "columnsFrom": ["subscription_id"],
          "tableTo": "subscriptions",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "usage_credits_organization_id_organizations_id_fk": {
          "name": "usage_credits_organization_id_organizations_id_fk",
          "tableFrom": "usage_credits",
          "columnsFrom": ["organization_id"],
          "tableTo": "organizations",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "usage_credits_billing_period_id_billing_periods_id_fk": {
          "name": "usage_credits_billing_period_id_billing_periods_id_fk",
          "tableFrom": "usage_credits",
          "columnsFrom": ["billing_period_id"],
          "tableTo": "billing_periods",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "usage_credits_usage_meter_id_usage_meters_id_fk": {
          "name": "usage_credits_usage_meter_id_usage_meters_id_fk",
          "tableFrom": "usage_credits",
          "columnsFrom": ["usage_meter_id"],
          "tableTo": "usage_meters",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "usage_credits_payment_id_payments_id_fk": {
          "name": "usage_credits_payment_id_payments_id_fk",
          "tableFrom": "usage_credits",
          "columnsFrom": ["payment_id"],
          "tableTo": "payments",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "usage_credits_pricing_model_id_pricing_models_id_fk": {
          "name": "usage_credits_pricing_model_id_pricing_models_id_fk",
          "tableFrom": "usage_credits",
          "columnsFrom": ["pricing_model_id"],
          "tableTo": "pricing_models",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "usage_credits_id_unique": {
          "name": "usage_credits_id_unique",
          "columns": ["id"],
          "nullsNotDistinct": false
        }
      },
      "policies": {
        "Enable read for customers (usage_credits)": {
          "name": "Enable read for customers (usage_credits)",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["customer"],
          "using": "\"subscription_id\" in (select \"id\" from \"subscriptions\")"
        },
        "Enable read for own organizations (usage_credits)": {
          "name": "Enable read for own organizations (usage_credits)",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": ["merchant"],
          "using": "\"organization_id\" in (select \"organization_id\" from \"memberships\")"
        },
        "Check mode (usage_credits)": {
          "name": "Check mode (usage_credits)",
          "as": "RESTRICTIVE",
          "for": "ALL",
          "to": ["merchant"],
          "using": "current_setting('app.livemode')::boolean = livemode"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.usage_events": {
      "name": "usage_events",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by_commit": {
          "name": "created_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by_commit": {
          "name": "updated_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "livemode": {
          "name": "livemode",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "position": {
          "name": "position",
          "type": "bigserial",
          "primaryKey": false,
          "notNull": true
        },
        "customer_id": {
          "name": "customer_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "subscription_id": {
          "name": "subscription_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "usage_meter_id": {
          "name": "usage_meter_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "billing_period_id": {
          "name": "billing_period_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "amount": {
          "name": "amount",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "usage_date": {
          "name": "usage_date",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "transaction_id": {
          "name": "transaction_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "price_id": {
          "name": "price_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "properties": {
          "name": "properties",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "pricing_model_id": {
          "name": "pricing_model_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "usage_events_customer_id_idx": {
          "name": "usage_events_customer_id_idx",
          "columns": [
            {
              "expression": "customer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "usage_events_usage_meter_id_idx": {
          "name": "usage_events_usage_meter_id_idx",
          "columns": [
            {
              "expression": "usage_meter_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "usage_events_billing_period_id_idx": {
          "name": "usage_events_billing_period_id_idx",
          "columns": [
            {
              "expression": "billing_period_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "usage_events_subscription_id_idx": {
          "name": "usage_events_subscription_id_idx",
          "columns": [
            {
              "expression": "subscription_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "usage_events_price_id_idx": {
          "name": "usage_events_price_id_idx",
          "columns": [
            {
              "expression": "price_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "usage_events_pricing_model_id_idx": {
          "name": "usage_events_pricing_model_id_idx",
          "columns": [
            {
              "expression": "pricing_model_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "usage_events_transaction_id_usage_meter_id_unique_idx": {
          "name": "usage_events_transaction_id_usage_meter_id_unique_idx",
          "columns": [
            {
              "expression": "transaction_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "usage_meter_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "usage_events_customer_id_customers_id_fk": {
          "name": "usage_events_customer_id_customers_id_fk",
          "tableFrom": "usage_events",
          "columnsFrom": ["customer_id"],
          "tableTo": "customers",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "usage_events_subscription_id_subscriptions_id_fk": {
          "name": "usage_events_subscription_id_subscriptions_id_fk",
          "tableFrom": "usage_events",
          "columnsFrom": ["subscription_id"],
          "tableTo": "subscriptions",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "usage_events_usage_meter_id_usage_meters_id_fk": {
          "name": "usage_events_usage_meter_id_usage_meters_id_fk",
          "tableFrom": "usage_events",
          "columnsFrom": ["usage_meter_id"],
          "tableTo": "usage_meters",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "usage_events_billing_period_id_billing_periods_id_fk": {
          "name": "usage_events_billing_period_id_billing_periods_id_fk",
          "tableFrom": "usage_events",
          "columnsFrom": ["billing_period_id"],
          "tableTo": "billing_periods",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "usage_events_price_id_prices_id_fk": {
          "name": "usage_events_price_id_prices_id_fk",
          "tableFrom": "usage_events",
          "columnsFrom": ["price_id"],
          "tableTo": "prices",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "usage_events_pricing_model_id_pricing_models_id_fk": {
          "name": "usage_events_pricing_model_id_pricing_models_id_fk",
          "tableFrom": "usage_events",
          "columnsFrom": ["pricing_model_id"],
          "tableTo": "pricing_models",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "usage_events_id_unique": {
          "name": "usage_events_id_unique",
          "columns": ["id"],
          "nullsNotDistinct": false
        }
      },
      "policies": {
        "Enable read for own organizations (usage_events)": {
          "name": "Enable read for own organizations (usage_events)",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": ["merchant"],
          "using": "\"customer_id\" in (select \"id\" from \"customers\" where \"organization_id\" in (select \"organization_id\" from \"memberships\"))"
        },
        "On insert, only allow usage events for prices with matching usage meter": {
          "name": "On insert, only allow usage events for prices with matching usage meter",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["merchant"],
          "withCheck": "\"price_id\" IS NULL OR \"price_id\" in (select \"id\" from \"prices\" where \"prices\".\"usage_meter_id\" = \"usage_meter_id\")"
        },
        "On update, only allow usage events for prices with matching usage meter": {
          "name": "On update, only allow usage events for prices with matching usage meter",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["merchant"],
          "using": "\"price_id\" IS NULL OR \"price_id\" in (select \"id\" from \"prices\" where \"prices\".\"usage_meter_id\" = \"usage_meter_id\")"
        },
        "On insert, only allow usage events for subscriptions with matching customer": {
          "name": "On insert, only allow usage events for subscriptions with matching customer",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["merchant"],
          "withCheck": "\"subscription_id\" in (select \"id\" from \"subscriptions\" where \"subscriptions\".\"customer_id\" = \"customer_id\")"
        },
        "On update, only allow usage events for subscriptions with matching customer": {
          "name": "On update, only allow usage events for subscriptions with matching customer",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["merchant"],
          "withCheck": "\"subscription_id\" in (select \"id\" from \"subscriptions\" where \"subscriptions\".\"customer_id\" = \"customer_id\")"
        },
        "On insert, only allow usage events for billing periods with matching subscription": {
          "name": "On insert, only allow usage events for billing periods with matching subscription",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["merchant"],
          "withCheck": "\"billing_period_id\" in (select \"id\" from \"billing_periods\" where \"billing_periods\".\"subscription_id\" = \"subscription_id\")"
        },
        "On update, only allow usage events for billing periods with matching subscription": {
          "name": "On update, only allow usage events for billing periods with matching subscription",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["merchant"],
          "withCheck": "\"billing_period_id\" in (select \"id\" from \"billing_periods\" where \"billing_periods\".\"subscription_id\" = \"subscription_id\")"
        },
        "Enable read for customers (usage_events)": {
          "name": "Enable read for customers (usage_events)",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["customer"],
          "using": "\"customer_id\" in (select \"id\" from \"customers\")"
        },
        "Check mode (usage_events)": {
          "name": "Check mode (usage_events)",
          "as": "RESTRICTIVE",
          "for": "ALL",
          "to": ["merchant"],
          "using": "current_setting('app.livemode')::boolean = livemode"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.usage_meters": {
      "name": "usage_meters",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by_commit": {
          "name": "created_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by_commit": {
          "name": "updated_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "livemode": {
          "name": "livemode",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "position": {
          "name": "position",
          "type": "bigserial",
          "primaryKey": false,
          "notNull": true
        },
        "organization_id": {
          "name": "organization_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "pricing_model_id": {
          "name": "pricing_model_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "slug": {
          "name": "slug",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "aggregation_type": {
          "name": "aggregation_type",
          "type": "UsageMeterAggregationType",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'sum'"
        }
      },
      "indexes": {
        "usage_meters_organization_id_idx": {
          "name": "usage_meters_organization_id_idx",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "usage_meters_pricing_model_id_idx": {
          "name": "usage_meters_pricing_model_id_idx",
          "columns": [
            {
              "expression": "pricing_model_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "usage_meters_organization_id_slug_pricing_model_id_unique_idx": {
          "name": "usage_meters_organization_id_slug_pricing_model_id_unique_idx",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "slug",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "pricing_model_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "usage_meters_organization_id_organizations_id_fk": {
          "name": "usage_meters_organization_id_organizations_id_fk",
          "tableFrom": "usage_meters",
          "columnsFrom": ["organization_id"],
          "tableTo": "organizations",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "usage_meters_pricing_model_id_pricing_models_id_fk": {
          "name": "usage_meters_pricing_model_id_pricing_models_id_fk",
          "tableFrom": "usage_meters",
          "columnsFrom": ["pricing_model_id"],
          "tableTo": "pricing_models",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "usage_meters_id_unique": {
          "name": "usage_meters_id_unique",
          "columns": ["id"],
          "nullsNotDistinct": false
        }
      },
      "policies": {
        "Enable read for customers (usage_meters)": {
          "name": "Enable read for customers (usage_meters)",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["customer"],
          "using": "\"pricing_model_id\" in (select \"pricing_model_id\" from \"customers\")"
        },
        "Enable read for own organizations (usage_meters)": {
          "name": "Enable read for own organizations (usage_meters)",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": ["merchant"],
          "using": "\"organization_id\" in (select \"organization_id\" from \"memberships\")"
        },
        "Check mode (usage_meters)": {
          "name": "Check mode (usage_meters)",
          "as": "RESTRICTIVE",
          "for": "ALL",
          "to": ["merchant"],
          "using": "current_setting('app.livemode')::boolean = livemode"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.users": {
      "name": "users",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by_commit": {
          "name": "created_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by_commit": {
          "name": "updated_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "position": {
          "name": "position",
          "type": "bigserial",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "clerk_id": {
          "name": "clerk_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "better_auth_id": {
          "name": "better_auth_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "stack_auth_id": {
          "name": "stack_auth_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "users_name_idx": {
          "name": "users_name_idx",
          "columns": [
            {
              "expression": "name",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "users_email_idx": {
          "name": "users_email_idx",
          "columns": [
            {
              "expression": "email",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "users_id_unique": {
          "name": "users_id_unique",
          "columns": ["id"],
          "nullsNotDistinct": false
        },
        "users_clerk_id_unique": {
          "name": "users_clerk_id_unique",
          "columns": ["clerk_id"],
          "nullsNotDistinct": false
        },
        "users_better_auth_id_unique": {
          "name": "users_better_auth_id_unique",
          "columns": ["better_auth_id"],
          "nullsNotDistinct": false
        },
        "users_stack_auth_id_unique": {
          "name": "users_stack_auth_id_unique",
          "columns": ["stack_auth_id"],
          "nullsNotDistinct": false
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.webhooks": {
      "name": "webhooks",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamptz",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by_commit": {
          "name": "created_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by_commit": {
          "name": "updated_by_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "livemode": {
          "name": "livemode",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "position": {
          "name": "position",
          "type": "bigserial",
          "primaryKey": false,
          "notNull": true
        },
        "event_subscriptions": {
          "name": "event_subscriptions",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "organization_id": {
          "name": "organization_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "url": {
          "name": "url",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "active": {
          "name": "active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        }
      },
      "indexes": {
        "webhooks_organization_id_idx": {
          "name": "webhooks_organization_id_idx",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "webhooks_active_idx": {
          "name": "webhooks_active_idx",
          "columns": [
            {
              "expression": "active",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "webhooks_organization_id_organizations_id_fk": {
          "name": "webhooks_organization_id_organizations_id_fk",
          "tableFrom": "webhooks",
          "columnsFrom": ["organization_id"],
          "tableTo": "organizations",
          "columnsTo": ["id"],
          "onUpdate": "no action",
          "onDelete": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "webhooks_id_unique": {
          "name": "webhooks_id_unique",
          "columns": ["id"],
          "nullsNotDistinct": false
        }
      },
      "policies": {
        "Enable read for own organizations (webhooks)": {
          "name": "Enable read for own organizations (webhooks)",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": ["merchant"],
          "using": "\"organization_id\" in (select \"organization_id\" from \"memberships\")"
        },
        "Check mode (webhooks)": {
          "name": "Check mode (webhooks)",
          "as": "RESTRICTIVE",
          "for": "ALL",
          "to": ["merchant"],
          "using": "current_setting('app.livemode')::boolean = livemode"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    }
  },
  "enums": {},
  "schemas": {},
  "views": {},
  "sequences": {},
  "roles": {},
  "policies": {},
  "_meta": {
    "columns": {},
    "schemas": {},
    "tables": {}
  }
}
